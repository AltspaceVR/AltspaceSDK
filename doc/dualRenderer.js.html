<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>shims/dualRenderer.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="utilities.ColorHoverEffect.html">ColorHoverEffect</a><ul class='methods'><li data-type='method'><a href="utilities.ColorHoverEffect.html#add">add</a></li><li data-type='method'><a href="utilities.ColorHoverEffect.html#init">init</a></li></ul></li><li><a href="utilities.DragPlaneEffect.html">DragPlaneEffect</a><ul class='methods'><li data-type='method'><a href="utilities.DragPlaneEffect.html#add">add</a></li><li data-type='method'><a href="utilities.DragPlaneEffect.html#init">init</a></li></ul></li><li><a href="multiloader.LoadRequest.html">LoadRequest</a><ul class='methods'><li data-type='method'><a href="multiloader.LoadRequest.html#error">error</a></li><li data-type='method'><a href="multiloader.LoadRequest.html#mtlUrls">mtlUrls</a></li><li data-type='method'><a href="multiloader.LoadRequest.html#objects">objects</a></li><li data-type='method'><a href="multiloader.LoadRequest.html#objectsLoaded">objectsLoaded</a></li><li data-type='method'><a href="multiloader.LoadRequest.html#objUrls">objUrls</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="multiloader.html">altspace/utilities/multiloader</a><ul class='methods'><li data-type='method'><a href="multiloader.html#init">init</a></li><li data-type='method'><a href="multiloader.html#load">load</a></li></ul></li><li><a href="bubbling.html">altspace/utilities/shims/bubbling</a></li><li><a href="cursor.html">altspace/utilities/shims/cursor</a><ul class='methods'><li data-type='method'><a href="cursor.html#init">init</a></li></ul></li><li><a href="dualRenderer.html">altspace/utilities/shims/dualRenderer</a><ul class='methods'><li data-type='method'><a href="dualRenderer.html#ambientLight">ambientLight</a></li><li data-type='method'><a href="dualRenderer.html#camera">camera</a></li><li data-type='method'><a href="dualRenderer.html#inAltMode">inAltMode</a></li><li data-type='method'><a href="dualRenderer.html#renderer">renderer</a></li><li data-type='method'><a href="dualRenderer.html#init">init</a></li><li data-type='method'><a href="dualRenderer.html#render">render</a></li></ul></li><li><a href="threebase.html">altspace/utilities/threebase</a><ul class='methods'><li data-type='method'><a href="threebase.html#add">add</a></li><li data-type='method'><a href="threebase.html#init">init</a></li><li data-type='method'><a href="threebase.html#save">save</a></li><li data-type='method'><a href="threebase.html#update">update</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">shims/dualRenderer.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Creates a simple scene and renders using AltRender or THREE.WebGLRenderer.
 * @module altspace/utilities/shims/dualRenderer
 */

altspace = window.altspace || {};
altspace.utilities = altspace.utilities || {};
altspace.utilities.shims = altspace.utilities.shims || {};
altspace.utilities.shims.dualRenderer = (function(){

  var scene;
  var camera;
  var ambientLight;
  var renderer;
  var inAltMode;

  var antialias;
  var clearColor;
  var lightColor;
  var TRACE;

  function init(myScene, myParams){
    if (!myScene || !myScene instanceof THREE.Scene){
      throw new Error('dualRender: init requires THREE.Scene argument.')
    } 
    scene = myScene;
    var p = myParams || {};
    var forceWebGL = p.forceWebGL || false;
    //auto-detect if running in Altspace, unless 'forceWebGL' given in params.
    inAltMode = !forceWebGL &amp;&amp; window.altspace &amp;&amp; window.altspace.inClient;

    antialias = p.antialias || true;
    clearColor = p.clearColor || new THREE.Color('silver');
    lightColor = p.clearColor || new THREE.Color('white');
    camera = p.camera || null;
    ambientLight = p.ambientLight || null;
    TRACE = p.TRACE || false;

    if (inAltMode) {
      renderer = altspace.getThreeJSRenderer();
      camera = null;
      ambientLight = null;
    } else {
      // See also: http://threejs.org/docs/#Manual/Introduction/Creating_a_scene
      document.body.style.margin = '0px';
      document.body.style.overflow = 'hidden';
      var container = document.createElement('div');
      document.body.appendChild(container);
      renderer = new THREE.WebGLRenderer({antialias: antialias});
      renderer.setClearColor(clearColor);
      container.appendChild(renderer.domElement);
      var resizeRender = function(){
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      };
      window.addEventListener('resize', resizeRender);
      if (!camera){
        camera = new THREE.PerspectiveCamera();
        camera.fov = 60;
        camera.near = 1;
        camera.far = 2000;
      }
      resizeRender();
      scene.add(camera);
      if (!ambientLight){
        // Throw in a default light since any loaded OBJ files use MeshPhongMaterial.
        ambientLight = new THREE.AmbientLight(lightColor);
      }
      scene.add(ambientLight);
    }
  }

  function render() {
    if (inAltMode) {
      renderer.render(scene);
    } else {
      renderer.render(scene, camera);
    }
  }

  var exports = {
    /**
     * Initializes the cursor module.
     * @method
     * @param {THREE.Scene} scene
     * @param {Object} [params] Optional parameters.
     * @param {Boolean} [params.forceWebGL=false] Force dualRenderer to use the 
     *  WebGL renderer.
     * @param {Boolean} [params.antialias=true]
     * @param {THREE.Color} [params.clearColor='silver']
     * @param {THREE.Color} [params.lightColor='white'] Color of the 
     *  AmbientLight in the WebGL scene.
     * @param {THREE.Camera} [params.camera=null] The camera you want to use
     *  for the WebGL scene.
     * @param {THREE.Light} [params.ambientLight=null] A light that you want to
     *  add to the WebGL scene.
     */
    init: init,

    /**
     * Render the scene.
     * @method
     */
    render: render,
  };

  /**
   * The camera being used by the WebGL renderer.
   * @readonly
   * @member {Three.Camera} camera
   * @memberof module:altspace/utilities/shims/dualRenderer
   */
  Object.defineProperty(exports, 'camera', {get: function(){return camera}});

  /**
   * The light added to the WebGL scene.
   * @readonly
   * @member {THREE.Light} ambientLight
   * @memberof module:altspace/utilities/shims/dualRenderer
   */
  Object.defineProperty(exports, 'ambientLight', {get: function(){return ambientLight}});

  /**
   * The renderer being used.
   * @readonly
   * @member {(THREE.WebGLRenderer|AltRenderer)} renderer
   * @memberof module:altspace/utilities/shims/dualRenderer
   */
  Object.defineProperty(exports, 'renderer', {get: function(){return renderer}});

  /**
   * Is the dualRenderer using the AltRenderer.
   * @readonly
   * @member {Boolean} inAltMode
   * @memberof module:altspace/utilities/shims/dualRenderer
   */
  Object.defineProperty(exports, 'inAltMode', {get: function(){return inAltMode}});

  return exports;

}());

</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Mon Oct 05 2015 04:07:53 GMT-0400 (Eastern Daylight Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
