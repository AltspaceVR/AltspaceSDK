<!DOCTYPE html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Spinning Cube</title>
<script src="https://sdk.altvr.com/libs/three.js/r71/build/three.min.js"></script>
<script src="https://sdk.altvr.com/libs/three.js/r71/
examples/js/loaders/MTLLoader.js"></script>
<script src="../utilities/CursorEffects.js"></script>
<script src="../utilities/ColorHoverEffect.js"></script>
<script src="../utilities/shims/CursorEvents.js"></script>
<script src="../utilities/shims/EventDispatcher.js"></script>
</head>
<body>
<script>

//Setup
var inAltspace = !!window.altspace;
var renderer, camera, scale;
var scene = new THREE.Scene();
if ( inAltspace ) {
	renderer = altspace.getThreeJSRenderer({version:'0.2.0'});
} else {
	renderer = new THREE.WebGLRenderer({antialias: true});
	renderer.setClearColor("#AAAAAA");
	renderer.setSize(window.innerWidth, window.innerHeight);
	document.body.appendChild(renderer.domElement);
	var aspect = window.innerWidth / window.innerHeight;
	camera = new THREE.PerspectiveCamera(45, aspect, 1, 2000);
	camera.position.z = 1000; // stand back from origin
	scene.add(camera);
	window.addEventListener('resize', function(event) {
		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize(window.innerWidth, window.innerHeight);
	});
}

// Use MTLLoader for loadTexture, to ensure image is power of 2
// else antialiasing won't work (this is a limitation of WebGL)
var materialCreator = new THREE.MTLLoader.MaterialCreator();
var texture = materialCreator.loadTexture('models/cube/altspace-logo.jpg');

//Cube
var geometry = new THREE.BoxGeometry(1, 1, 1);
var material = new THREE.MeshBasicMaterial({color:'cyan', map: texture});
var mesh = new THREE.Mesh(geometry, material);
mesh.scale.multiplyScalar(200);
scene.add(mesh);

// Effects
var cursorEffects = new CursorEffects(scene);
cursorEffects.enableMouseEvents(camera);
var hoverEffect = new ColorHoverEffect({color: new THREE.Color('yellow')});
cursorEffects.addEffect(hoverEffect, mesh);

// Update & Rendering
function animate() {
	requestAnimationFrame(animate);
	renderer.render(scene, camera);
	mesh.rotation.y += 0.01;
}
animate();

</script>
</body>
</html>