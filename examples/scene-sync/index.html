<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>Scene Sync Example</title>
		<script src="//aframe.io/releases/0.3.0/aframe.js"></script>
		<script src="//sdk.altvr.com/libs/altspace.js/0.28.1/altspace.js"></script>
		<script src="../../dist/aframe-altspace-component.js"></script>
	</head>
	<body>
		<a-scene altspace="fullspace: true" sync-system="author: altspacevr; app: test-scene-sync">
			<a-assets>
				<a-mixin id="box-hat"
					geometry="primitive: box;"
					material="color: red; shader: flat;"
					scale="0.1 0.1 0.1"></a-mixin>
				<a-mixin id="dunce-hat"
					geometry="primitive: cone; radius-top: 0.001; height: 4"
					material="color: yellow; shader: flat;"
					scale="0.1 0.1 0.1"></a-mixin>
				<a-mixin id="parent-to-head"
					position="0 0.35 -1"
					n-skeleton-parent="part: head;"
					></a-mixin>

				<a-mixin id="leather-armor"
					geometry="primitive: box; width: 0.5; depth: 0.2;"
					material="color: brown; shader: flat;"></a-mixin>
				<a-mixin id="metal-armor"
					geometry="primitive: box; width: 0.5; depth: 0.2;"
					material="color: grey; shader: flat;"></a-mixin>
				<a-mixin id="parent-to-chest"
					position="0 0.35 -1"
					n-skeleton-parent="part: spine;"
					></a-mixin>

				<a-mixin id="parent-to-left-hand"
					position="0 0.1 0"
					rotation="0 45 0"
					n-skeleton-parent="part: hand; side: left;"
					></a-mixin>
			</a-assets>

			<!-- 
			   Demonstrates an object that is attached to the skeleton.
			   Each user will see a green box attached to their right hand but will not see green boxes on other users'
			   hands. i.e. This only happens locally.
			-->
			<a-entity
				id="initial-local-box"
				geometry="primitive: box"
				material="color: green"
				n-skeleton-parent="part: hand; side: right;"
				position="0 0.1 0"
				rotation="0 45 0"
				scale="0.1 0.1 0.1">
			</a-entity>

			<!-- 
			   Demonstrates an object that is attached to the skeleton and is synced across clients.
			   Each user will see a red box attached to their left hand and all users will see each other
			   with a red box on their hands.
			-->
			<a-entity
				id="initial-synced-box"
				sync one-per-user="mixin: box-hat parent-to-left-hand">
			</a-entity>

			<!-- 
			   Demonstrates instantiators that instantiate synced objects attached to users' heads.
			-->
			<a-entity
				id="dunce-instantiator"
				mixin="dunce-hat"
				instantiator="on: click; mixin: dunce-hat parent-to-head"
				position="0 1 -5">
			</a-entity>
			<!--
				This instantiator has a different look compared to the objects that it instantiates.
			-->
			<a-entity
				id="box-instantiator"
				geometry="primitive: cylinder;"
				material="color: green"
				scale="0.1 0.1 0.1"
				instantiator="on: click; mixin: box-hat parent-to-head; toggleExisting: false"
				position="0 1 -6">
			</a-entity>

			<!-- 
			   Demonstrates a separate 'armor' group of instantiators that instantiate synced objects attached to 
			   users' chests.
			-->
			<a-entity
				id="leather-armor-instantiator"
				mixin="leather-armor"
				instantiator="group: armor; on: click; mixin: leather-armor parent-to-chest"
				position="3 1 -5">
			</a-entity>
			<a-entity
				id="metal-armor-instantiator"
				mixin="metal-armor"
				instantiator="group: armor; on: click; mixin: metal-armor parent-to-chest"
				position="3 1 -6">
			</a-entity>
		</a-scene>
	</body>
</html>
