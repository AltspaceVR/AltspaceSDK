!function(e,t){"use strict";function n(e){var t={};return t=e.__proto__?Object.assign(n(e.__proto__),e):Object.assign({schema:{},dependencies:[]},e),e.schema&&Object.assign(t.schema,e.schema),e.dependencies&&(i=t.dependencies).push.apply(i,e.dependencies),t;var i}function i(e,t){AFRAME.registerComponent(e,n(new t(!0)))}function a(e,t){AFRAME.registerSystem(e,n(new t(!0)))}function s(e,t,n){return 0===t.length?n:(e[t[0]]=s(e[t[0]]||{},t.slice(1),n),e)}function o(e){return e?encodeURIComponent(e).replace(/\./g,"%2E").replace(/%[A-Z0-9]{2}/g,"-"):null}function r(){var e=document.querySelector("link[rel=canonical]");return e?e.href:window.location.href}function c(e,t,n){return o(t||n)+":"+o(e||"")}function l(e){function t(){var t={},n=c(e.appId,e.authorId,R);t.app=s.child(n).child("app"),t.space=l?t.app.child("spaces").child(l):null,t.user=d?t.app.child("users").child(d):null;var i=t.app.child("instances");return r?t.instance=i.child(r):(t.instance=i.push(),r=t.instance.key()),t}function n(){i.query["altspace-sync-instance"]||(i.query["altspace-sync-instance"]=r,window.location.href=i.toString())}e=e||{};var i=new Url,a=e.baseRefUrl||"https://altspace-apps.firebaseio.com/apps/examples/",s=new E(a),r=e.instanceId||i.query["altspace-sync-instance"],l=e.spaceId||i.query["altspace-sync-space"],d=e.userId||i.query["altspace-sync-user"];if(!e.appId||!e.authorId)throw new Error("Both the appId and authorId must be provided to connect.");var p=[];return w&&(l||p.unshift(altspace.getSpace()),d||p.unshift(altspace.getUser())),Promise.all(p).then(function(e){w&&(l||(l=e.pop().sid),d||(d=e.pop().userId)),l=o(l),d=o(d),r=o(r);var i=t();return n(),i})}t="default"in t?t.default:t;var d=function(){},p={schema:{}};p.schema.get=function(){return null},d.prototype.init=function(){},d.prototype.tick=function(e,t){},d.prototype.pause=function(){},d.prototype.play=function(){},Object.defineProperties(d.prototype,p);var u=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(e){},t.prototype.remove=function(){},t.prototype.updateSchema=function(e){},t}(d),h=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={schema:{}};return n.schema.get=function(){return{enabled:{type:"boolean",default:"true"}}},t.prototype.init=function(){var e=this;this.setColliderFlag(this.data.enabled),this.el.addEventListener("model-loaded",function(){e.setColliderFlag(e.data.enabled)}.bind(this))},t.prototype.update=function(){this.setColliderFlag(this.data.enabled)},t.prototype.setColliderFlag=function(e){var t=this.el.object3D;t&&(console.log("Setting collider flag to",e),s(t.userData,["altspace","collider","enabled"],e),t.traverse(function(t){t instanceof THREE.Mesh&&s(t.userData,["altspace","collider","enabled"],e)}))},Object.defineProperties(t.prototype,n),t}(u),f=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(){this.gamepadIndex=null,this.trackedControlsSystem=document.querySelector("a-scene").systems["tracked-controls"],this.systemGamepads=0,altspace.getGamepads()},t.prototype.tick=function(){if(this.trackedControlsSystem&&this.systemGamepads!==this.trackedControlsSystem.controllers.length&&window.altspace&&altspace.getGamepads&&altspace.getGamepads().length){var e=this.el.components;e["paint-controls"]&&(this.gamepadIndex="left"===e["paint-controls"].data.hand?2:1),null===this.gamepadIndex&&e["hand-controls"]&&(this.gamepadIndex="left"===e["hand-controls"].data?2:1),null===this.gamepadIndex&&e["vive-controls"]&&(this.gamepadIndex="left"===e["vive-controls"].data.hand?2:1),null===this.gamepadIndex&&e["tracked-controls"]&&(this.gamepadIndex=e["tracked-controls"].data.controller),this.el.setAttribute("tracked-controls","id",altspace.getGamepads()[this.gamepadIndex].id),this.el.setAttribute("tracked-controls","controller",0),this.systemGamepads=this.trackedControlsSystem.controllers.length}},t}(u),y=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={schema:{}};return n.schema.get=function(){return{usePixelScale:{type:"boolean",default:"false"},verticalAlign:{type:"string",default:"middle"},enclosuresOnly:{type:"boolean",default:"true"},fullspace:{type:"boolean",default:"false"}}},t.prototype.init=function(){return this.version="AFRAME_ALTSPACE_VERSION",!this.el.object3D instanceof THREE.Scene?void console.warn("aframe-altspace-component can only be attached to a-scene"):void(window.altspace&&window.altspace.inClient?(this.el.setAttribute("vr-mode-ui",{enabled:!1}),this.initRenderer(),this.initCursorEvents(),this.initCollisionEvents()):console.warn("aframe-altspace-component only works inside of AltspaceVR"))},t.prototype.tick=function(e,t){this.el.object3D.updateAllBehaviors&&this.el.object3D.updateAllBehaviors()},t.prototype.initRenderer=function(){var e=this,t=this.el.object3D;altspace.getEnclosure().then(function(i){switch(e.data.fullspace&&(i.requestFullspace(),i.addEventListener("fullspacechange",function(){t.scale.setScalar(i.pixelsPerMeter)})),e.data.usePixelScale&&!e.data.fullspace||t.scale.setScalar(i.pixelsPerMeter),e.data.verticalAlign){case"bottom":t.position.y-=i.innerHeight/2;break;case"top":t.position.y+=i.innerHeight/2;break;case"middle":break;default:console.warn("Unexpected value for verticalAlign: ",e.data.verticalAlign)}e.data.enclosuresOnly&&1===i.innerDepth&&(e.el.renderer.render(new THREE.Scene),e.el.renderer=e.el.effect=n)}.bind(this));var n=this.el.renderer,i=this.el.renderer=this.el.effect=altspace.getThreeJSRenderer({aframeComponentVersion:this.version}),a=function(){};i.setSize=a,i.setPixelRatio=a,i.setClearColor=a,i.clear=a,i.enableScissorTest=a,i.setScissor=a,i.setViewport=a,i.getPixelRatio=a,i.getMaxAnisotropy=a,i.setFaceCulling=a,i.context={canvas:{}},i.shadowMap={}},t.prototype.initCursorEvents=function(){function e(e,t){var i=t.target.el;n&&n.emit(e,{target:i,ray:t.ray,point:t.point}),i&&i.emit(e,{target:i,ray:t.ray,point:t.point})}var t=this.el.object3D,n=document.querySelector("a-cursor")||document.querySelector("a-entity[cursor]");n&&(n.setAttribute("material","transparent",!0),n.setAttribute("material","opacity",0));var i=null;t.addEventListener("cursordown",function(t){i=t.target,e("mousedown",t)}),t.addEventListener("cursorup",function(t){e("mouseup",t),t.target.uuid===i.uuid&&e("click",t),i=null}),t.addEventListener("cursorenter",function(t){t.target.el&&(t.target.el.addState("hovered"),n&&n.addState("hovering"),e("mouseenter",t))}),t.addEventListener("cursorleave",function(t){t.target.el&&(t.target.el.removeState("hovered"),n&&n.removeState("hovering"),e("mouseleave",t))})},t.prototype.initCollisionEvents=function(){function e(e,t){var n=t.target.el;n&&(t.target=n,t.other&&t.other.el&&(t.other=t.other.el),n.emit(e,t))}var t=this.el.object3D;t.addEventListener("collisionenter",function(t){e("collisionenter",t)}),t.addEventListener("collisionexit",function(t){e("collisionexit",t)}),t.addEventListener("triggerenter",function(t){e("triggerenter",t)}),t.addEventListener("triggerexit",function(t){e("triggerexit",t)})},Object.defineProperties(t.prototype,n),t}(u),m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={dependencies:{}};return n.dependencies.get=function(){return["sync"]},t.prototype.init=function(){this.sync=this.el.components.sync,this.sync.isConnected?start():this.el.addEventListener("connected",this.start.bind(this))},t.prototype.start=function(){var e=this.sync.dataRef.child("material/color"),t=!1,n=!0;component.el.addEventListener("componentchanged",function(n){var i=n.detail.name,a=n.detail.oldData,s=n.detail.newData;"material"===i&&!t&&a.color!==s.color&&sync.isMine&&setTimeout(function(){return e.set(s.color)},0)}),e.on("value",function(e){if(!sync.isMine||n){var i=e.val();t=!0,component.el.setAttribute("material","color",i),t=!1,n=!1}})},Object.defineProperties(t.prototype,n),t}(u),v=function(e){function t(e){void 0===e&&(e=!1),this._isComponent=e,this.scene=void 0,this.syncSys=void 0,this.ref=void 0,this.key=void 0,this.dataRef=void 0,this.ownerRef=void 0,this.ownerId=void 0,this.isConnected=!1,this.isMine=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={schema:{}};return n.schema.get=function(){return{mode:{default:"link"},ownOn:{type:"string"}}},t.prototype.init=function(){var e=this;if(this.scene=this.el.sceneEl,this.syncSys=this.scene.systems["sync-system"],this.syncSys.isConnected?start():this.scene.addEventListener("connected",this.start.bind(this)),this.data.ownOn){var t=this.data.ownOn.split(/[ ,]+/);t.forEach(function(t){e.el.addEventListener(t,function(){e.isConnected&&e.takeOwnership()}.bind(e))}.bind(this))}},t.prototype.takeOwnership=function(){this.ownerRef.set(this.syncSys.clientId),this.ownerRef.onDisconnect().set(null)},t.prototype.start=function(){var e=this;if(this.scene.addEventListener("clientleft",function(t){var n=(!ownerId||ownerId===t.detail.id)&&e.syncSys.isMasterClient;n&&e.takeOwnership()}.bind(this)),"link"!==this.data.mode)return void console.error("Unsupported sync mode: "+this.data.mode);var t=this.el.id;return t?(console.log("syncSys: "+this.syncSys),console.log("syncSys.sceneRef: "+this.syncSys.sceneRef),this.link(this.syncSys.sceneRef.child(t)),this.setupReceive(),this.isConnected=!0,void this.el.emit("connected",null,!1)):void console.error("Entities cannot be synced using link mode without an id.")},t.prototype.link=function(e){this.ref=e,this.key=this.ref.key(),this.dataRef=this.ref.child("data"),this.ownerRef=this.ref.child("owner")},t.prototype.setupReceive=function(){var e=this;this.ownerRef.transaction(function(t){if(!t)return e.ownerRef.onDisconnect().set(null),e.syncSys.clientId}.bind(this)),this.ownerRef.on("value",function(t){var n=t.val(),i=n===e.syncSys.clientId&&!e.isMine;i&&e.el.emit("ownershipgained",null,!1);var a=n!==e.syncSys.clientId&&e.isMine;a&&(e.el.emit("ownershiplost",null,!1),e.ownerRef.onDisconnect().cancel()),e.ownerId=n,e.isMine=n===e.syncSys.clientId}.bind(this))},Object.defineProperties(t.prototype,n),t}(u),g=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={schema:{}};return n.schema.get=function(){return{author:{type:"string",default:null},app:{type:"string",default:null},instance:{type:"string",default:null},refUrl:{type:"string",default:null}}},t.prototype.init=function(){return this.data&&this.data.app?(console.log(this.data),this.isConnected=!1,void altspace.utilities.sync.connect({authorId:this.data.author,appId:this.data.app,instanceId:this.data.instance,baseRefUrl:this.data.refUrl}).then(this.connected.bind(this))):void console.warn("The sync-system must be present on the scene and configured with required data.")},t.prototype.connected=function(e){this.connection=e,this.sceneRef=this.connection.instance.child("scene"),this.clientsRef=this.connection.instance.child("clients"),this.clientId=this.sceneEl.object3D.uuid,this.masterClientId=null;var t=this;this.clientsRef.on("value",function(e){var n=e.val(),i=Object.keys(n)[0];t.masterClientId=n[i]}),this.clientsRef.on("child_added",function(e){var n=e.val();setTimeout(function(){t.sceneEl.emit("clientjoined",{id:n},!1)},0)}),this.clientsRef.on("child_removed",function(e){var n=e.val();setTimeout(function(){t.sceneEl.emit("clientleft",{id:n},!1)},0)}),this.clientsRef.push(this.clientId).onDisconnect().remove(),this.connection.instance.child("initialized").once("value",function(e){var n=!e.val();e.ref().set(!0),t.sceneEl.emit("connected",{shouldInitialize:n},!1),t.isConnected=!0})},t.prototype.isMasterClient=function(){return this.masterClientId===this.clientId},Object.defineProperties(t.prototype,n),t}(d);AFRAME.registerComponent("sync-transform",{dependencies:["sync"],schema:{},init:function(){function e(){function e(e,i){if(!n.isMine){var a=e.val();a&&t.el.setAttribute(i,a)}}function i(e){if(n.isMine){var t=e.detail.name,i=e.detail.newData;if("position"===t)l(i);else if("rotation"===t)d(i);else{if("scale"!==t)return;p(i)}}}function a(e,t,n){var i,a,s,o,r=0;n||(n={});var c=function(){r=n.leading===!1?0:Date.now(),i=null,o=e.apply(a,s),i||(a=s=null)},l=function(){var l=Date.now();r||n.leading!==!1||(r=l);var d=t-(l-r);return a=this,s=arguments,d<=0||d>t?(i&&(clearTimeout(i),i=null),r=l,o=e.apply(a,s),i||(a=s=null)):i||n.trailing===!1||(i=setTimeout(c,d)),o};return l.cancel=function(){clearTimeout(i),r=0,i=a=s=null},l}var s=n.dataRef.child("position"),o=n.dataRef.child("rotation"),r=n.dataRef.child("scale");t.updateRate=100;var c=[];t.el.addEventListener("ownershiplost",function(){for(var e=t.el.children,n=0;n<e.length;n++){var i=e[n].tagName.toLowerCase();"a-animation"===i&&(c.push(e[n]),e[n].stop())}}),t.el.addEventListener("ownershipgained",function(){for(var e=0;e<c.length;e++){var t=c[e];t.start()}c=[]}),s.on("value",function(t){e(t,"position")}),o.on("value",function(t){e(t,"rotation")}),r.on("value",function(t){e(t,"scale")});var l=a(function(e){s.set(e)},t.updateRate),d=a(function(e){o.set(e)},t.updateRate),p=a(function(e){r.set(e)},t.updateRate);t.el.addEventListener("componentchanged",i)}var t=this,n=t.el.components.sync;n.isConnected?e():t.el.addEventListener("connected",e)}});(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={dependencies:{}};return n.dependencies.get=function(){return["sync"]},Object.defineProperties(t.prototype,n),t})(u);AFRAME.registerComponent("sync-n-sound",{dependencies:["sync"],schema:{},init:function(){function e(){function e(e){if(n.isMine){var e={type:e.type,sender:a.clientId,el:t.el.id,time:Date.now()};t.soundEventRef.set(e)}}t.soundStateRef=n.dataRef.child("sound/state"),t.soundEventRef=n.dataRef.child("sound/event"),t.el.addEventListener("sound-played",e),t.el.addEventListener("sound-paused",e),t.soundEventRef.on("value",function(e){if(!n.isMine){var i=e.val();if(i&&i.el===t.el.id){var a=t.el.components["n-sound"];"sound-played"===i.type?a.playSound():a.pauseSound()}}}),t.el.addEventListener("componentchanged",function(e){if(n.isMine){var i=e.detail.name;"n-sound"===i&&t.soundStateRef.set(e.detail.newData)}}),t.soundStateRef.on("value",function(e){if(!n.isMine){var i=e.val();i&&t.el.setAttribute("n-sound",i)}})}var t=this,n=t.el.components.sync,i=document.querySelector("a-scene"),a=i.systems["sync-system"];n.isConnected?e():t.el.addEventListener("connected",e)},remove:function(){this.soundStateRef.off("value"),this.soundEventRef.off("value")}}),function(){function e(e){e.userData.altspace=e.userData.altspace||{},e.userData.altspace.collider=e.userData.altspace.collider||{},e.userData.altspace.collider.enabled=!1,altspace.addNativeComponent(e,this.name)}function t(){var t=this.el.getOrCreateObject3D("mesh",c);e.call(this,t),this.update(this.data)}function n(){var e=this.el.getObject3D("mesh");altspace.removeNativeComponent(e,this.name)}function i(e){altspace.updateNativeComponent(this.el.object3DMap.mesh,this.name,this.data)}function a(e,t){altspace.callNativeComponent(this.el.object3DMap.mesh,this.name,e,t)}if(!window.altspace||!altspace.inClient){var s=function(){};window.altspace={addNativeComponent:s,updateNativeComponent:s,removeNativeComponent:s}}var o=new THREE.BoxGeometry(.001,.001,.001),r=new THREE.MeshBasicMaterial({color:0});r.visible=!1;var c=function(){THREE.Mesh.call(this,o,r)};c.prototype=Object.create(THREE.Mesh.prototype),c.prototype.constructor=THREE.PlaceholderMesh,AFRAME.registerComponent("n-object",{schema:{res:{type:"string"}},init:t,update:i,remove:n}),AFRAME.registerComponent("n-spawner",{schema:{res:{type:"string"}},init:t,update:i,remove:n}),AFRAME.registerComponent("n-text",{init:t,update:i,remove:n,schema:{text:{default:"",type:"string"},fontSize:{default:"10",type:"int"},width:{default:"10",type:"number"},height:{default:"1",type:"number"},horizontalAlign:{default:"middle"},verticalAlign:{default:"middle"}}}),AFRAME.registerComponent("n-sphere-collider",{init:t,remove:n,update:i,schema:{isTrigger:{default:!1,type:"boolean"},center:{type:"vec3"},radius:{default:"0",type:"number"},type:{default:"object"}}}),AFRAME.registerComponent("n-box-collider",{init:t,remove:n,update:i,schema:{isTrigger:{default:!1,type:"boolean"},center:{type:"vec3"},size:{type:"vec3"},type:{default:"object"}}}),AFRAME.registerComponent("n-capsule-collider",{init:t,remove:n,update:i,schema:{isTrigger:{default:!1,type:"boolean"},center:{type:"vec3"},radius:{default:"0",type:"number"},height:{default:"0",type:"number"},direction:{default:"y"},type:{default:"object"}}}),AFRAME.registerComponent("n-mesh-collider",{_forEachMesh:function(e){var t=this.el.object3DMap.mesh;t&&(t instanceof THREE.Mesh&&e(t),t.traverse(function(t){t instanceof THREE.Mesh&&e(t)}.bind(this)))},_initObj:function(){this._forEachMesh(function(t){e.call(this,t),altspace.updateNativeComponent(t,this.name,this.data)}.bind(this))},init:function(){this.el.getOrCreateObject3D("mesh",c),this._initObj(),this.el.addEventListener("model-loaded",function(){this._initObj()}.bind(this))},remove:function(){this._forEachMesh(function(e){altspace.removeNativeComponent(e,this.name)}.bind(this))},update:function(e){this._forEachMesh(function(e){altspace.updateNativeComponent(e,this.name,this.data)}.bind(this))},schema:{isTrigger:{default:!1,type:"boolean"},convex:{default:!0,type:"boolean"},type:{default:"object"}}}),AFRAME.registerComponent("n-billboard",{init:t,remove:n}),AFRAME.registerComponent("n-container",{init:function(){t.call(this);var e=this.el,n=this;e.addEventListener("stateadded",function(t){"container-full"===t.detail.state&&e.emit("container-full"),"container-empty"===t.detail.state&&e.emit("container-empty")}),e.addEventListener("container-count-changed",function(e){n.count=e.detail.count})},remove:n,update:i,schema:{capacity:{default:4,type:"number"}}}),AFRAME.registerComponent("n-sound",{init:function(){var e=this.data.src;if(e&&!e.startsWith("http"))if(e.startsWith("/"))this.data.src=location.origin+e;else{var n=location.pathname;n.endsWith("/")||(n=location.pathname.split("/").slice(0,-1).join("/")+"/"),this.data.src=location.origin+n+e}t.call(this)},pauseSound:function(){a.call(this,"pause"),this.el.emit("sound-paused")},playSound:function(){a.call(this,"play"),this.el.emit("sound-played")},seek:function(e){a.call(this,"seek",{time:e})},remove:function(){n.call(this),this.playHandler&&this.el.removeEventListener(oldData.on,this.playHandler)},update:function(e){i.call(this,e),this.playHandler&&this.el.removeEventListener(e.on,this.playHandler),this.data.on&&(this.playHandler=this.playSound.bind(this),this.el.addEventListener(this.data.on,this.playHandler))},schema:{on:{type:"string"},res:{type:"string"},src:{type:"string"},loop:{type:"boolean"},volume:{type:"number",default:1},autoplay:{type:"boolean"},oneshot:{type:"boolean"},spatialBlend:{type:"float",default:1},pitch:{type:"float",default:1},minDistance:{type:"float",default:1},maxDistance:{type:"float",default:12},rolloff:{type:"string",default:"logarithmic"}}})}(),AFRAME.registerComponent("wire",{multiple:!0,schema:{on:{type:"string"},emit:{type:"string"},gained:{type:"string"},lost:{type:"string"},gain:{type:"string"},lose:{type:"string"},targets:{type:"selectorAll"},target:{type:"selector"}},update:function(e){e.on&&this.el.removeEventListener(e.on,this.actOnTargets),e.gained&&this.el.removeEventListener("stateadded",this.actOnTargetsIfStateMatches),e.lost&&this.el.removeEventListener("stateremoved",this.actOnTargetsIfStateMatches),this.actOnTargets=function(){function e(e){this.data.emit&&e.emit(this.data.emit),this.data.gain&&e.addState(this.data.gain),this.data.lose&&e.removeState(this.data.lose)}this.data.targets&&this.data.targets.forEach(e.bind(this)),this.data.target&&e.call(this,this.data.target)}.bind(this),this.actOnTargetsIfStateMatches=function(e){var t=e.detail.state;t!==this.data.gained&&t!==this.data.lost||this.actOnTargets()}.bind(this),this.data.on&&this.el.addEventListener(this.data.on,this.actOnTargets),this.data.gained&&this.el.addEventListener("stateadded",this.actOnTargetsIfStateMatches),this.data.lost&&this.el.addEventListener("stateremoved",this.actOnTargetsIfStateMatches)},remove:function(){this.el.removeEventListener(this.data.on,this.actOnTargets),this.el.removeEventListener("stateadded",this.actOnTargetsIfStateMatches),this.el.removeEventListener("stateremoved",this.actOnTargetsIfStateMatches)}}),window.AFRAME&&(a("sync-system",g),i("altspace-cursor-collider",h),i("altspace-tracked-controls",f),i("altspace",y),i("sync-color",m),i("sync",v));var b=Object.freeze({AltspaceComponent:y,AltspaceCursorCollider:h,AltspaceTrackedControls:f,SyncSystem:g,SyncComponent:v,SyncColor:m,flatten:n}),E=window.Firebase,w=altspace&&altspace.inClient,R=r(),C=Object.freeze({connect:l});window.altspace=window.altspace||{},window.altspace.utilities=window.altspace.utilities||{};var S=function(e){var t=e.auto;void 0===t&&(t=!0),this._scene=null,this._renderer=null,this._camera=null;var n=window.AFRAME&&document.querySelector("a-scene");if(n){var i=document.querySelector("a-scene");this._scene=i.object3D,this._renderer=i.renderer;var a=document.querySelector("a-camera");a&&(this._camera=a.object3D)}else window.altspace&&altspace.inClient?(this._scene=new THREE.Scene,this._renderer=altspace.getThreeJSRenderer(),this._camera=new THREE.PerspectiveCamera):this._setupWebGL();t&&!n&&this.loop()},_={scene:{},renderer:{},camera:{}};S.prototype._setupWebGL=function(){function e(){a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)}var n=this._scene=new THREE.Scene,i=this._renderer=new THREE.WebGLRenderer({antialias:!0}),a=this._camera=new THREE.PerspectiveCamera;document.addEventListener("DOMContentLoaded",function(e){document.body.style.margin="0px",document.body.style.overflow="hidden",i.setClearColor("#035F72");var t=document.createElement("div");document.body.appendChild(t),t.appendChild(i.domElement)}),window.addEventListener("resize",e),e(),a.position.z=500,a.fov=45,a.near=1,a.far=2e3,n.add(a),n.add(new THREE.AmbientLight("white")),this.cursor=new t(n,a)},S.prototype.loop=function(){window.requestAnimationFrame(this.loop.bind(this)),this.scene.updateAllBehaviors&&this.scene.updateAllBehaviors(),this.renderer.render(this.scene,this.camera)},_.scene.get=function(){return this._scene},_.renderer.get=function(){return this._renderer},_.camera.get=function(){return this._camera},Object.defineProperties(S.prototype,_);var A=Object.freeze({sync:C,Simulation:S}),M=VERSION;window.altspace&&window.altspace.requestVersion&&window.altspace.requestVersion(M),e.components=b,e.utilities=A}(this.altspace=this.altspace||{},CursorShim);
//# sourceMappingURL=altspace.min.js.map
