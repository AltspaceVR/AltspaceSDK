{"version":3,"file":"aframe-altspace-component.js","sources":["../src/AFrameComponent.js","../src/utilities.js","../src/AltspaceCursorCollider.js","../src/AltspaceTrackedControls.js","../src/AltspaceComponent.js","../src/SyncColor.js","../src/SyncComponent.js","../src/SyncSystem.js","../src/sync-transform.js","../src/sync-n-sound.js","../src/native-components.js","../src/wire.js","../src/components.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n* Stubs out the A-Frame \"system\" concept.\r\n* @see {@link https://aframe.io/docs/0.3.0/core/systems.html}\r\n*/\r\nclass AFrameSystem\r\n{\r\n\tget schema(){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tinit(){ }\r\n\ttick(time, timeDelta){ }\r\n\tpause(){ }\r\n\tplay(){ }\r\n}\r\n\r\n/**\r\n* Stubs out the A-Frame \"component\" concept.\r\n* @extends AFrameSystem\r\n* @see {@link https://aframe.io/docs/0.3.0/core/component.html}\r\n*/\r\nclass AFrameComponent extends AFrameSystem\r\n{\r\n\tupdate(oldData){ }\r\n\tremove(){ }\r\n\tupdateSchema(data){ }\r\n}\r\n\r\nfunction flatten(obj)\r\n{\r\n\tlet ret = {};\r\n\tif(!obj.__proto__){\r\n\t\tret = Object.assign( {schema: {}, dependencies: []}, obj );\r\n\t}\r\n\telse {\r\n\t\tret = Object.assign( flatten(obj.__proto__), obj );\r\n\t}\r\n\r\n\tif(obj.schema)\r\n\t\tObject.assign(ret.schema, obj.schema);\r\n\r\n\tif(obj.dependencies)\r\n\t\tret.dependencies.push(...obj.dependencies);\r\n\r\n\treturn ret;\r\n}\r\n\r\nfunction registerComponentClass(name, cls)\r\n{\r\n\tAFRAME.registerComponent(name, flatten(new cls(true)));\r\n}\r\n\r\nfunction registerSystemClass(name, cls)\r\n{\r\n\tAFRAME.registerSystem(name, flatten(new cls(true)));\r\n}\r\n\r\nexport { AFrameComponent, AFrameSystem, registerComponentClass, registerSystemClass, flatten };\r\n","'use strict';\r\n\r\nfunction safeDeepSet(obj, keys, value)\r\n{\r\n\tif(keys.length === 0)\r\n\t\treturn value;\r\n\telse {\r\n\t\tobj[keys[0]] = safeDeepSet(obj[keys[0]] || {}, keys.slice(1), value);\r\n\t\treturn obj;\r\n\t}\r\n}\r\n\r\nexport { safeDeepSet };\r\n","/**\r\n* Enable or disable cursor collision on the object.\r\n* @mixin altspace-cursor-collider\r\n* @memberof altspace\r\n* @prop {boolean} enabled=true - The state of the cursor collider.\r\n*/\r\n\r\n'use strict';\r\n\r\nimport {AFrameComponent} from './AFrameComponent';\r\nimport {safeDeepSet} from './utilities';\r\n\r\n\r\nexport default class AltspaceCursorCollider extends AFrameComponent\r\n{\r\n\tget schema(){\r\n\t\treturn {enabled: {type: 'boolean', default: 'true'}};\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tthis.setColliderFlag(this.data.enabled);\r\n\t\tthis.el.addEventListener('model-loaded', (() => {\r\n\t\t\tthis.setColliderFlag(this.data.enabled);\r\n\t\t}).bind(this));\r\n\t}\r\n\r\n\tupdate()\r\n\t{\r\n\t\tthis.setColliderFlag(this.data.enabled);\r\n\t}\r\n\r\n\tsetColliderFlag(state)\r\n\t{\r\n\t\tlet obj = this.el.object3D;\r\n\t\tif(obj){\r\n\t\t\tconsole.log('Setting collider flag to', state);\r\n\t\t\tsafeDeepSet(obj.userData, ['altspace','collider','enabled'], state);\r\n\t\t\tobj.traverse(subobj => {\r\n\t\t\t\tif( subobj instanceof THREE.Mesh ){\r\n\t\t\t\t\tsafeDeepSet(subobj.userData, ['altspace','collider','enabled'], state);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n","/**\r\n* Enables tracked control support for A-Frame applications that use the built-in\r\n* `tracked-controls`, `vive-controls` or `hand-controls` components.\r\n* @mixin altspace-tracked-controls\r\n* @memberof altspace\r\n*/\r\n'use strict';\r\n\r\nimport {AFrameComponent} from './AFrameComponent';\r\n\r\nexport default class AltspaceTrackedControls extends AFrameComponent\r\n{\r\n\tinit()\r\n\t{\r\n\t\tthis.gamepadIndex = null;\r\n\t\tthis.trackedControlsSystem = document.querySelector('a-scene').systems['tracked-controls'];\r\n\t\tthis.systemGamepads = 0;\r\n\t\taltspace.getGamepads();\r\n\t}\r\n\r\n\ttick()\r\n\t{\r\n\t\tif (\r\n\t\t\tthis.trackedControlsSystem &&\r\n\t\t\tthis.systemGamepads !== this.trackedControlsSystem.controllers.length &&\r\n\t\t\twindow.altspace && altspace.getGamepads && altspace.getGamepads().length\r\n\t\t) {\r\n\t\t\tvar components = this.el.components;\r\n\t\t\tif (components['paint-controls']) {\r\n\t\t\t\tthis.gamepadIndex = components['paint-controls'].data.hand === 'left' ? 2 : 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.gamepadIndex === null && components['hand-controls']) {\r\n\t\t\t\tthis.gamepadIndex = components['hand-controls'].data === 'left' ? 2 : 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.gamepadIndex === null && components['vive-controls']) {\r\n\t\t\t\tthis.gamepadIndex = components['vive-controls'].data.hand === 'left' ? 2 : 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.gamepadIndex === null && components['tracked-controls']) {\r\n\t\t\t\tthis.gamepadIndex = components['tracked-controls'].data.controller;\r\n\t\t\t}\r\n\r\n\t\t\tthis.el.setAttribute('tracked-controls', 'id', altspace.getGamepads()[this.gamepadIndex].id);\r\n\t\t\tthis.el.setAttribute('tracked-controls', 'controller', 0);\r\n\t\t\tthis.systemGamepads = this.trackedControlsSystem.controllers.length;\r\n\t\t}\r\n\t}\r\n}\r\n","/**\r\n* @namespace altspace\r\n*/\r\n\r\n/**\r\n* The altspace component makes A-Frame apps compatible with AltspaceVR.\r\n*\r\n* **Note**: If you use the `embedded` A-Frame component on your scene, you must include it *before* the `altspace` component, or your app will silently fail.\r\n* @mixin altspace\r\n* @memberof altspace\r\n* @property {boolean} usePixelScale=`false` - Allows you to use A-Frame units as CSS pixels.\r\n* This is the default behavior for three.js apps, but not for A-Frame apps.\r\n* @property {string} verticalAlign=`middle` - Puts the origin at the `bottom`, `middle` (default),\r\n* or `top` of the Altspace enclosure.\r\n* @property {boolean} enclosuresOnly=`true` - Prevents the scene from being created if\r\n* enclosure is flat.\r\n* @property {boolean} fullspace=`false` - Puts the app into fullspace mode.\r\n*\r\n* @example\r\n* <head>\r\n*   <title>My A-Frame Scene</title>\r\n*   <script src=\"https://aframe.io/releases/0.3.0/aframe.min.js\"></script>\r\n*   <script src=\"https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/vAFRAME_ALTSPACE_VERSION/dist/aframe-altspace-component.min.js\"></script>\r\n* </head>\r\n* <body>\r\n*   <a-scene altspace>\r\n*     <a-entity geometry=\"primitive: box\" material=\"color: #C03546\"></a-entity>\r\n*   </a-scene>\r\n* </body>\r\n*/\r\n'use strict';\r\n\r\nimport {AFrameComponent} from './AFrameComponent';\r\n\r\nexport default class AltspaceComponent extends AFrameComponent\r\n{\r\n\tget schema(){\r\n\t\treturn {\r\n\t\t\tusePixelScale: { type: 'boolean', default: 'false'},\r\n\t\t\tverticalAlign: { type: 'string',  default: 'middle'},\r\n\t\t\tenclosuresOnly:{ type: 'boolean', default: 'true'},\r\n\t\t\tfullspace:     { type: 'boolean', default: 'false'}\r\n\t\t}\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tthis.version = 'AFRAME_ALTSPACE_VERSION';\r\n\t\tif(!this.el.object3D instanceof THREE.Scene){\r\n\t\t\tconsole.warn('aframe-altspace-component can only be attached to a-scene');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (window.altspace && window.altspace.inClient) {\r\n\t\t\tthis.el.setAttribute('vr-mode-ui', {enabled: false});\r\n\t\t\tthis.initRenderer();\r\n\t\t\tthis.initCursorEvents();\r\n\t\t\tthis.initCollisionEvents();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.warn('aframe-altspace-component only works inside of AltspaceVR');\r\n\t\t}\r\n\t}\r\n\r\n\ttick(t, dt)\r\n\t{\r\n\t\tif(this.el.object3D.updateAllBehaviors)\r\n\t\t\tthis.el.object3D.updateAllBehaviors();\r\n\t}\r\n\r\n\t/*\r\n\t* Swap in Altspace renderer when running in AltspaceVR.\r\n\t*/\r\n\tinitRenderer()\r\n\t{\r\n\t\tlet scene = this.el.object3D;\r\n\t\taltspace.getEnclosure().then((e =>\r\n\t\t{\r\n\t\t\tif(this.data.fullspace){\r\n\t\t\t\te.requestFullspace();\r\n\t\t\t\te.addEventListener('fullspacechange', () => {\r\n\t\t\t\t\tscene.scale.setScalar(e.pixelsPerMeter);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.data.usePixelScale || this.data.fullspace){\r\n\t\t\t\tscene.scale.setScalar(e.pixelsPerMeter);\r\n\t\t\t}\r\n\r\n\t\t\tswitch (this.data.verticalAlign) {\r\n\t\t\t\tcase 'bottom':\r\n\t\t\t\t\tscene.position.y -= e.innerHeight / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'top':\r\n\t\t\t\t\tscene.position.y += e.innerHeight / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'middle':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.warn('Unexpected value for verticalAlign: ', this.data.verticalAlign);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.data.enclosuresOnly && e.innerDepth === 1){\r\n\t\t\t\tthis.el.renderer.render(new THREE.Scene());\r\n\t\t\t\tthis.el.renderer = this.el.effect = oldRenderer;\r\n\r\n\t\t\t}\r\n\t\t}).bind(this));\r\n\r\n\t\tlet oldRenderer = this.el.renderer;\r\n\t\tlet renderer = this.el.renderer = this.el.effect = altspace.getThreeJSRenderer({\r\n\t\t\taframeComponentVersion: this.version\r\n\t\t});\r\n\r\n\t\tlet noop = function() {};\r\n\t\trenderer.setSize = noop;\r\n\t\trenderer.setPixelRatio = noop;\r\n\t\trenderer.setClearColor = noop;\r\n\t\trenderer.clear = noop;\r\n\t\trenderer.enableScissorTest = noop;\r\n\t\trenderer.setScissor = noop;\r\n\t\trenderer.setViewport = noop;\r\n\t\trenderer.getPixelRatio = noop;\r\n\t\trenderer.getMaxAnisotropy = noop;\r\n\t\trenderer.setFaceCulling = noop;\r\n\t\trenderer.context = {canvas: {}};\r\n\t\trenderer.shadowMap = {};\r\n\t}\r\n\r\n\t/*\r\n\t* Emulate A-Frame cursor events when running in AltspaceVR.\r\n\t*/\r\n\tinitCursorEvents()\r\n\t{\r\n\r\n\t\tlet scene = this.el.object3D;\r\n\t\tlet cursorEl = document.querySelector('a-cursor') || document.querySelector('a-entity[cursor]');\r\n\t\tif (cursorEl) {\r\n\t\t\t// Hide A-Frame cursor mesh.\r\n\t\t\tcursorEl.setAttribute('material', 'transparent', true);\r\n\t\t\tcursorEl.setAttribute('material', 'opacity', 0.0);\r\n\t\t}\r\n\r\n\t\tfunction emit(eventName, event)\r\n\t\t{\r\n\t\t\t// Fire events on intersected object and A-Frame cursor.\r\n\t\t\tlet targetEl = event.target.el;\r\n\t\t\tif (cursorEl){\r\n\t\t\t\tcursorEl.emit(eventName, { target: targetEl, ray: event.ray, point: event.point });\r\n\t\t\t}\r\n\r\n\t\t\tif (targetEl){\r\n\t\t\t\ttargetEl.emit(eventName, { target: targetEl, ray: event.ray, point: event.point });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet cursordownObj = null;\r\n\t\tscene.addEventListener('cursordown', event => {\r\n\t\t\tcursordownObj = event.target;\r\n\t\t\temit('mousedown', event);\r\n\t\t});\r\n\r\n\t\tscene.addEventListener('cursorup', event => {\r\n\t\t\temit('mouseup', event);\r\n\t\t\tif (event.target.uuid === cursordownObj.uuid) {\r\n\t\t\t\temit('click', event);\r\n\t\t\t}\r\n\t\t\tcursordownObj = null;\r\n\t\t});\r\n\r\n\t\tscene.addEventListener('cursorenter', event => {\r\n\t\t\tif (!event.target.el){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevent.target.el.addState('hovered');\r\n\t\t\tif (cursorEl){\r\n\t\t\t\tcursorEl.addState('hovering');\r\n\t\t\t}\r\n\t\t\temit('mouseenter', event);\r\n\t\t});\r\n\r\n\t\tscene.addEventListener('cursorleave', event => {\r\n\t\t\tif (!event.target.el){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevent.target.el.removeState('hovered');\r\n\t\t\tif (cursorEl){\r\n\t\t\t\tcursorEl.removeState('hovering');\r\n\t\t\t}\r\n\t\t\temit('mouseleave', event);\r\n\t\t});\r\n    }\r\n\r\n\tinitCollisionEvents()\r\n\t{\r\n\t\tlet scene = this.el.object3D;\r\n\r\n\t\tfunction emit(eventName, event)\r\n\t\t{\r\n\t\t\tlet targetEl = event.target.el;\r\n\t\t\tif (!targetEl)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t//remap target and other from object3Ds to aframe element\r\n\t\t\tevent.target = targetEl;\r\n\t\t\tif (event.other && event.other.el) {\r\n\t\t\t\tevent.other = event.other.el;\r\n\t\t\t}\r\n\t\t\ttargetEl.emit(eventName, event);\r\n\t\t};\r\n\r\n\t\tscene.addEventListener('collisionenter', event => {\r\n\t\t\temit('collisionenter', event);\r\n\t\t});\r\n\r\n\t\tscene.addEventListener('collisionexit', event => {\r\n\t\t\temit('collisionexit', event);\r\n\t\t});\r\n\r\n\t\tscene.addEventListener('triggerenter', event => {\r\n\t\t\temit('triggerenter', event);\r\n\t\t});\r\n\r\n\t\tscene.addEventListener('triggerexit', event => {\r\n\t\t\temit('triggerexit', event);\r\n\t\t});\r\n\r\n    }\r\n}\r\n","/**\r\n* Sync the color property of the object between clients.\r\n* Requires both a {@link sync.sync-system} component on the `a-scene`, and a\r\n* {@link sync.sync} component on the target entity.\r\n* @mixin sync-color\r\n* @memberof sync\r\n*/\r\n'use strict';\r\n\r\nimport {AFrameComponent} from './AFrameComponent';\r\n\r\nexport default class SyncColor extends AFrameComponent\r\n{\r\n\tget dependencies(){\r\n\t\treturn ['sync'];\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tlet component = this;\r\n\t\tlet sync = component.el.components.sync;\r\n\r\n\t\t// wait for firebase connection to start sync routine\r\n\t\tif(sync.isConnected)\r\n\t\t\tstart();\r\n\t\telse\r\n\t\t\tcomponent.el.addEventListener('connected', start);\r\n\r\n\t\tfunction start()\r\n\t\t{\r\n\t\t\tlet colorRef = sync.dataRef.child('material/color');\r\n\t\t\tlet refChangedLocked = false;\r\n\t\t\tlet firstValue = true;\r\n\r\n\t\t\tcomponent.el.addEventListener('componentchanged', event =>\r\n\t\t\t{\r\n\t\t\t\tlet name = event.detail.name;\r\n\t\t\t\tlet oldData = event.detail.oldData;\r\n\t\t\t\tlet newData = event.detail.newData;\r\n\r\n\t\t\t\tif (name === 'material' && !refChangedLocked && oldData.color !== newData.color && sync.isMine)\r\n\t\t\t\t{\r\n\t\t\t\t\t//For some reason A-Frame has a misconfigured material reference if we do this too early\r\n\t\t\t\t\tsetTimeout(() => colorRef.set(newData.color), 0);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcolorRef.on('value', snapshot => {\r\n\t\t\t\tif(!sync.isMine || firstValue)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet color = snapshot.val();\r\n\r\n\t\t\t\t\trefChangedLocked = true;\r\n\t\t\t\t\tcomponent.el.setAttribute('material', 'color', color);\r\n\t\t\t\t\trefChangedLocked = false;\r\n\r\n\t\t\t\t\tfirstValue = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n","/**\r\n* Enables the synchronization of properties of entities. All property sync components\r\n* require both a {@link sync.sync-system} on `a-scene`, and a {@link sync.sync}\r\n* on the entity to be synced.\r\n* @name sync\r\n* @namespace sync\r\n* @example\r\n* <a-scene sync-system='app: example sync; author: altspacevr'>\r\n*   <a-entity sync='ownOn: cursordown' sync-color></a-entity>\r\n* </a-scene>\r\n*/\r\n\r\n/**\r\n* Enables the synchronization of properties of the entity. Must be used in\r\n* conjuction with the {@link sync.sync-system} component and a component for a\r\n* specific property (e.g. {@link sync.sync-transform}).\r\n* @memberof sync\r\n* @mixin sync\r\n* @prop {string} ownOn - The name of the event, or a list of events, that\r\n* will cause the local client to take ownership of this object. This field\r\n* cannot be updated after initialization.\r\n*/\r\n\r\nimport {AFrameComponent} from './AFrameComponent';\r\n\r\nexport default class SyncComponent extends AFrameComponent\r\n{\r\n\tconstructor(isComponent = false)\r\n\t{\r\n\t\tthis._isComponent = isComponent;\r\n\r\n\t\tthis.scene = undefined;\r\n\t\tthis.syncSys = undefined;\r\n\t\tthis.ref = undefined;\r\n\t\tthis.key = undefined;\r\n\t\tthis.dataRef = undefined;\r\n\t\tthis.ownerRef = undefined;\r\n\t\tthis.ownerId = undefined;\r\n\r\n\t\tthis.isConnected = false;\r\n\r\n\t\t/**\r\n\t\t* Indicates whether the sync ownership is yours.\r\n\t\t* @member sync.sync#isMine\r\n\t\t* @readonly\r\n\t\t*/\r\n\t\tthis.isMine = false;\r\n\t}\r\n\r\n\tget schema(){\r\n\t\treturn {\r\n\t\t\tmode: { default: 'link' },\r\n\t\t\townOn: { type: 'string' } //cannot be changed after creation\r\n\t\t};\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tthis.scene = this.el.sceneEl;\r\n\t\tthis.syncSys = this.scene.systems['sync-system'];\r\n\r\n\t\tif(this.syncSys.isConnected)\r\n\t\t\tstart();\r\n\t\telse\r\n\t\t\tthis.scene.addEventListener('connected', this.start.bind(this));\r\n\r\n\t\tif(this.data.ownOn)\r\n\t\t{\r\n\t\t\tlet ownershipEvents = this.data.ownOn.split(/[ ,]+/);\r\n\t\t\townershipEvents.forEach((e => {\r\n\t\t\t\tthis.el.addEventListener(e, (() => {\r\n\t\t\t\t\tif(this.isConnected){\r\n\t\t\t\t\t\tthis.takeOwnership();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).bind(this));\r\n\t\t\t}).bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Tell sync to start pushing local property values instead of updating\r\n\t* local from remote values.\r\n\t* @method sync.sync#takeOwnership\r\n\t*/\r\n\ttakeOwnership()\r\n\t{\r\n\t\tthis.ownerRef.set(this.syncSys.clientId);\r\n\r\n\t\t//clear our ownership if we disconnect\r\n\t\t//this is needed if we are the last user in the room, but we expect people to join later\r\n\t\tthis.ownerRef.onDisconnect().set(null);\r\n\t}\r\n\r\n\tstart()\r\n\t{\r\n\t\t//Make sure someone always owns an object. If the owner leaves and we are the master client, we will take it.\r\n\t\t//This ensures, for example, that synced animations keep playing\r\n\t\tthis.scene.addEventListener('clientleft', (event => {\r\n\t\t\tlet shouldTakeOwnership = (!ownerId || ownerId === event.detail.id) && this.syncSys.isMasterClient;\r\n\t\t\tif(shouldTakeOwnership)\r\n\t\t\t\tthis.takeOwnership();\r\n\t\t}).bind(this));\r\n\r\n\t\tif (this.data.mode === 'link') {\r\n\t\t\tlet id = this.el.id;\r\n\t\t\tif (!id) {\r\n\t\t\t\tconsole.error('Entities cannot be synced using link mode without an id.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log('syncSys: ' + this.syncSys);\r\n\t\t\tconsole.log('syncSys.sceneRef: ' + this.syncSys.sceneRef);\r\n\r\n\t\t\tthis.link(this.syncSys.sceneRef.child(id));\r\n\t\t\tthis.setupReceive();\r\n\r\n\t\t} else {\r\n\t\t\tconsole.error('Unsupported sync mode: ' + this.data.mode);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.isConnected = true;\r\n\t\tthis.el.emit('connected', null, false);\r\n\t}\r\n\r\n\tlink(entityRef)\r\n\t{\r\n\t\tthis.ref = entityRef;\r\n\t\tthis.key = this.ref.key();\r\n\t\tthis.dataRef = this.ref.child('data');\r\n\t\tthis.ownerRef = this.ref.child('owner');\r\n\t}\r\n\r\n\tsetupReceive()\r\n\t{\r\n\t\t//if nobody has owned the object yet, we will.\r\n\t\tthis.ownerRef.transaction((owner => {\r\n\t\t\tif (owner) return undefined;\r\n\t\t\tthis.ownerRef.onDisconnect().set(null);\r\n\t\t\treturn this.syncSys.clientId;\r\n\t\t}).bind(this));\r\n\r\n\t\tthis.ownerRef.on('value', (snapshot =>\r\n\t\t{\r\n\t\t\tlet newOwnerId = snapshot.val();\r\n\t\t\tlet gained = newOwnerId === this.syncSys.clientId && !this.isMine;\r\n\t\t\tif (gained)\r\n\t\t\t\tthis.el.emit('ownershipgained', null, false);\r\n\r\n\t\t\t//note this also fires when we start up without ownership\r\n\t\t\tlet lost = newOwnerId !== this.syncSys.clientId && this.isMine;\r\n\t\t\tif (lost){\r\n\t\t\t\tthis.el.emit('ownershiplost', null, false);\r\n\r\n\t\t\t\t//we no longer have to clear our ownership when we disconnect\r\n\t\t\t\tthis.ownerRef.onDisconnect().cancel();\r\n\t\t\t}\r\n\r\n\t\t\tthis.ownerId = newOwnerId;\r\n\r\n\t\t\tthis.isMine = newOwnerId === this.syncSys.clientId;\r\n\t\t}).bind(this));\r\n\t}\r\n}\r\n","'use strict';\r\n\r\nimport {AFrameSystem} from './AFrameComponent';\r\n\r\n/**\r\n* Connect to a remote Firebase server, and facilitate synchronization. These\r\n* options correspond exactly with the configuration options for\r\n* [altspace.utilities.sync.connect]{@link http://altspacevr.github.io/AltspaceSDK/doc/module-altspace_utilities_sync.html#.connect}.\r\n* This component must be present on `a-scene` for any other sync components to work.\r\n* @extends AFrameSystem\r\n* @memberof module:altspace/components\r\n*/\r\nclass SyncSystem extends AFrameSystem\r\n{\r\n\t/**\r\n\t* @prop {string} author - A unique identifier for you or your organization.\r\n\t* @prop {string} app - The name of the app.\r\n\t* @prop {string} refUrl - Override the base reference. Set this to use your own Firebase.\r\n\t* @prop {string} instance - Override the instance ID. Can also be overridden with\r\n\t* a URL parameter.\r\n\t*/\r\n\tget schema(){\r\n\t\treturn {\r\n\t\t\tauthor: { type: 'string', default: null },\r\n\t\t\tapp: { type: 'string', default: null },\r\n\t\t\tinstance: { type: 'string', default: null },\r\n\t\t\trefUrl: { type: 'string', default: null }\r\n\t\t};\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tif(!this.data || !this.data.app){\r\n\t\t\tconsole.warn('The sync-system must be present on the scene and configured with required data.');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconsole.log(this.data);\r\n\r\n\t\tthis.isConnected = false;\r\n\t\taltspace.utilities.sync.connect({\r\n\t\t\tauthorId: this.data.author,\r\n\t\t\tappId: this.data.app,\r\n\t\t\tinstanceId: this.data.instance,\r\n\t\t\tbaseRefUrl: this.data.refUrl\r\n\t\t}).then(this.connected.bind(this));\r\n\t}\r\n\r\n\tconnected(connection)\r\n\t{\r\n\t\tthis.connection = connection;\r\n\r\n\t\tthis.sceneRef = this.connection.instance.child('scene');\r\n\t\tthis.clientsRef = this.connection.instance.child('clients');\r\n\r\n\t\t// temporary way of having unique identifiers for each client\r\n\t\tthis.clientId = this.sceneEl.object3D.uuid;\r\n\t\tthis.masterClientId = null;\r\n\r\n\t\tlet self = this;\r\n\r\n\t\t// local client connected\r\n\t\tthis.clientsRef.on(\"value\", snapshot => {\r\n\t\t\tlet clientIds = snapshot.val();\r\n\t\t\tlet masterClientKey = Object.keys(clientIds)[0];\r\n\t\t\tself.masterClientId = clientIds[masterClientKey];\r\n\t\t});\r\n\r\n\t\t// remote client connected\r\n\t\tthis.clientsRef.on('child_added', childSnapshot => {\r\n\t\t\tlet joinedClientId = childSnapshot.val();\r\n\t\t\t//let the master client flag get set first\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tself.sceneEl.emit('clientjoined', {id: joinedClientId}, false);\r\n\t\t\t}, 0);\r\n\t\t});\r\n\r\n\t\t// remote client disconnected\r\n\t\tthis.clientsRef.on('child_removed', childSnapshot => {\r\n\t\t\tlet leftClientId = childSnapshot.val();\r\n\t\t\t//let the master client flag get set first\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tself.sceneEl.emit('clientleft', {id: leftClientId}, false);\r\n\t\t\t}, 0);\r\n\t\t});\r\n\r\n\t\t// add our client ID to the list of connected clients,\r\n\t\t// but have it be automatically removed by firebase if we disconnect for any reason\r\n\t\tthis.clientsRef.push(this.clientId).onDisconnect().remove();\r\n\r\n\t\tthis.connection.instance.child('initialized').once('value', snapshot => {\r\n\t\t\tlet shouldInitialize = !snapshot.val();\r\n\t\t\tsnapshot.ref().set(true);\r\n\r\n\t\t\tself.sceneEl.emit('connected', { shouldInitialize: shouldInitialize }, false);\r\n\t\t\tself.isConnected = true;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t* Returns true if the local client is the master client.\r\n\t*/\r\n\tisMasterClient()\r\n\t{\r\n\t\treturn this.masterClientId === this.clientId;\r\n\t}\r\n}\r\n\r\nexport default SyncSystem;\r\n","//TODO: We need to figure out a way to recieve our first update without caring about ownership.\r\n// firstValue is probably not the right way to go, probably something about having sent yet. Need to change for both\r\n\r\n/**\r\n* Synchronize the position, rotation, and scale of this object with all clients.\r\n* Requires both a {@link sync.sync-system} component on the `a-scene`, and a\r\n* {@link sync.sync} component on the target entity.\r\n* @mixin sync-transform\r\n* @memberof sync\r\n*/\r\nAFRAME.registerComponent('sync-transform',\r\n{\r\n\tdependencies: ['sync'],\r\n\tschema: {\r\n\t},\r\n\tinit: function () {\r\n\t\tvar component = this;\r\n\t\tvar sync = component.el.components.sync;\r\n\t\tif(sync.isConnected) start(); else component.el.addEventListener('connected', start);\r\n\r\n\t\tfunction start(){\r\n\r\n\t\t\tvar positionRef = sync.dataRef.child('position');\r\n\t\t\tvar rotationRef = sync.dataRef.child('rotation');\r\n\t\t\tvar scaleRef = sync.dataRef.child('scale');\r\n\r\n\t\t\tcomponent.updateRate = 100;\r\n\r\n\t\t\tvar stoppedAnimations = [];\r\n\t\t\t//pause all animations on ownership loss\r\n\t\t\tcomponent.el.addEventListener('ownershiplost', function() {\r\n\t\t\t\tvar children = component.el.children;\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar tagName = children[i].tagName.toLowerCase();\r\n\t\t\t\t\tif (tagName === \"a-animation\") {\r\n\t\t\t\t\t\tstoppedAnimations.push(children[i]);\r\n\t\t\t\t\t\tchildren[i].stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcomponent.el.addEventListener('ownershipgained', function () {\r\n\t\t\t\tfor (var i = 0; i < stoppedAnimations.length; i++) {\r\n\t\t\t\t\tvar animation = stoppedAnimations[i];\r\n\t\t\t\t\tanimation.start();\r\n\t\t\t\t}\r\n\t\t\t\tstoppedAnimations = [];\r\n\t\t\t});\r\n\r\n\t\t\tfunction onTransform(snapshot, componentName) {\r\n\t\t\t\tif (sync.isMine) return;\r\n\r\n\t\t\t\tvar value = snapshot.val();\r\n\t\t\t\tif (!value) return;\r\n\r\n\t\t\t\tcomponent.el.setAttribute(componentName, value);\r\n\t\t\t}\r\n\r\n\t\t\tpositionRef.on('value', function (snapshot) {\r\n\t\t\t\tonTransform(snapshot, 'position');\r\n\t\t\t});\r\n\r\n\t\t\trotationRef.on('value', function (snapshot) {\r\n\t\t\t\tonTransform(snapshot, 'rotation');\r\n\t\t\t});\r\n\r\n\t\t\tscaleRef.on('value', function (snapshot) {\r\n\t\t\t\tonTransform(snapshot, 'scale');\r\n\t\t\t});\r\n\r\n\t\t\tvar sendPosition = throttle(function(value){\r\n\t\t\t\tpositionRef.set(value);\r\n\t\t\t}, component.updateRate);\r\n\r\n\t\t\tvar sendRotation = throttle(function(value){\r\n\t\t\t\trotationRef.set(value);\r\n\t\t\t}, component.updateRate);\r\n\r\n\t\t\tvar sendScale = throttle(function(value){\r\n\t\t\t\tscaleRef.set(value);\r\n\t\t\t}, component.updateRate);\r\n\r\n\t\t\tfunction onComponentChanged(event){\r\n\t\t\t\tif (!sync.isMine) return;\r\n\r\n\t\t\t\tvar name = event.detail.name;\r\n\t\t\t\tvar newData = event.detail.newData;\r\n\r\n\t\t\t\tif (name === 'position') {\r\n\t\t\t\t\tsendPosition(newData);\r\n\t\t\t\t} else if (name === 'rotation') {\r\n\t\t\t\t\tsendRotation(newData);\r\n\t\t\t\t} else if (name === 'scale') {\r\n\t\t\t\t\tsendScale(newData);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//from underscore.js\r\n\t\t\tfunction throttle(func, wait, options) {\r\n\t\t\t\tvar timeout, context, args, result;\r\n\t\t\t\tvar previous = 0;\r\n\t\t\t\tif (!options) options = {};\r\n\r\n\t\t\t\tvar later = function() {\r\n\t\t\t\t  previous = options.leading === false ? 0 : Date.now();\r\n\t\t\t\t  timeout = null;\r\n\t\t\t\t  result = func.apply(context, args);\r\n\t\t\t\t  if (!timeout) context = args = null;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar throttled = function() {\r\n\t\t\t\t  var now = Date.now();\r\n\t\t\t\t  if (!previous && options.leading === false) previous = now;\r\n\t\t\t\t  var remaining = wait - (now - previous);\r\n\t\t\t\t  context = this;\r\n\t\t\t\t  args = arguments;\r\n\t\t\t\t  if (remaining <= 0 || remaining > wait) {\r\n\t\t\t\t\tif (timeout) {\r\n\t\t\t\t\t  clearTimeout(timeout);\r\n\t\t\t\t\t  timeout = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprevious = now;\r\n\t\t\t\t\tresult = func.apply(context, args);\r\n\t\t\t\t\tif (!timeout) context = args = null;\r\n\t\t\t\t  } else if (!timeout && options.trailing !== false) {\r\n\t\t\t\t\ttimeout = setTimeout(later, remaining);\r\n\t\t\t\t  }\r\n\t\t\t\t  return result;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthrottled.cancel = function() {\r\n\t\t\t\t  clearTimeout(timeout);\r\n\t\t\t\t  previous = 0;\r\n\t\t\t\t  timeout = context = args = null;\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn throttled;\r\n\t\t\t  };\r\n\r\n\r\n\t\t\tcomponent.el.addEventListener('componentchanged', onComponentChanged);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport default null;\r\n","/**\r\n* Synchronize the playback state of an {@link n.n-sound} component between clients.\r\n* Requires both a {@link sync.sync-system} component on the `a-scene`, and a\r\n* {@link sync.sync} component on the target entity.\r\n* @mixin sync-n-sound\r\n* @memberof sync\r\n*/\r\n'use strict';\r\n\r\nimport {AFrameComponent} from './AFrameComponent';\r\n\r\nexport default class SyncNSound extends AFrameComponent\r\n{\r\n\tget dependencies(){\r\n\t\treturn ['sync'];\r\n\t}\r\n}\r\n\r\nAFRAME.registerComponent('sync-n-sound',\r\n{\r\n\tdependencies: ['sync'],\r\n\tschema: { },\r\n\tinit: function () {\r\n\t\tvar component = this;\r\n\t\tvar sync = component.el.components.sync;\r\n\t\tvar scene = document.querySelector('a-scene');\r\n\t\tvar syncSys = scene.systems['sync-system'];\r\n\t\tif(sync.isConnected) start(); else component.el.addEventListener('connected', start);\r\n\r\n\t\tfunction start(){\r\n\t\t\tcomponent.soundStateRef = sync.dataRef.child('sound/state');\r\n\t\t\tcomponent.soundEventRef = sync.dataRef.child('sound/event');\r\n\r\n\t\t\tfunction sendEvent(event) {\r\n\t\t\t\tif (!sync.isMine) return;\r\n\t\t\t\tvar event = {\r\n\t\t\t\t\ttype: event.type,\r\n\t\t\t\t\tsender: syncSys.clientId,\r\n\t\t\t\t\tel: component.el.id,\r\n\t\t\t\t\ttime: Date.now()\r\n\t\t\t\t};\r\n\t\t\t\tcomponent.soundEventRef.set(event);\r\n\t\t\t}\r\n\r\n\t\t\tcomponent.el.addEventListener('sound-played', sendEvent);\r\n\t\t\tcomponent.el.addEventListener('sound-paused', sendEvent);\r\n\r\n\t\t\tcomponent.soundEventRef.on('value', function (snapshot) {\r\n\t\t\t\tif (sync.isMine) return;\r\n\t\t\t\tvar event = snapshot.val();\r\n\t\t\t\tif (!event) return;\r\n\t\t\t\tif (event.el === component.el.id) {\r\n\t\t\t\t\tvar sound = component.el.components['n-sound'];\r\n\t\t\t\t\tif (event.type === 'sound-played') {\r\n\t\t\t\t\t\tsound.playSound();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsound.pauseSound();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcomponent.el.addEventListener('componentchanged', function (event) {\r\n\t\t\t\tif (!sync.isMine) return;\r\n\t\t\t\tvar name = event.detail.name;\r\n\t\t\t\tif (name !== 'n-sound') return;\r\n\t\t\t\tcomponent.soundStateRef.set(event.detail.newData);\r\n\t\t\t});\r\n\r\n\t\t\tcomponent.soundStateRef.on('value', function (snapshot) {\r\n\t\t\t\tif (sync.isMine) return;\r\n\t\t\t\tvar state = snapshot.val();\r\n\t\t\t\tif (!state) return;\r\n\t\t\t\tcomponent.el.setAttribute('n-sound', state);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tremove: function () {\r\n\t\tthis.soundStateRef.off('value');\r\n\t\tthis.soundEventRef.off('value');\r\n\t}\r\n});\r\n","\r\n/**\r\n* This set of components map to various objects and effects that are provided\r\n* natively by AltspaceVR. Your management of these objects may be limited to\r\n* some degree, but they will tend to be more performant than SDK equivalents,\r\n* or may provide some functionality not otherwise available to the SDK.\r\n* @namespace native\r\n*/\r\n(function () {\r\n\tif (!window.altspace || !altspace.inClient) {\r\n\t\tvar noop = function () {};\r\n\t\twindow.altspace = {\r\n\t\t\taddNativeComponent: noop,\r\n\t\t\tupdateNativeComponent: noop,\r\n\t\t\tremoveNativeComponent: noop\r\n\t\t};\r\n\t}\r\n\r\n\tvar placeholderGeometry = new THREE.BoxGeometry(0.001, 0.001, 0.001);\r\n\tvar placeholderMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });\r\n\tplaceholderMaterial.visible = false;\r\n\tvar PlaceholderMesh = function () {\r\n\t\tTHREE.Mesh.call( this, placeholderGeometry, placeholderMaterial );\r\n\t};\r\n\tPlaceholderMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tPlaceholderMesh.prototype.constructor = THREE.PlaceholderMesh;\r\n\r\n\tfunction meshInit(mesh) {\r\n\t\t//If you attach native components to an entity, it will not use a default collider\r\n\t\tmesh.userData.altspace = mesh.userData.altspace || {};\r\n\t\tmesh.userData.altspace.collider = mesh.userData.altspace.collider || {};\r\n\t\tmesh.userData.altspace.collider.enabled = false;\r\n\r\n\t\taltspace.addNativeComponent(mesh, this.name);\r\n\t}\r\n\r\n\tfunction nativeComponentInit() {\r\n\t\tvar mesh = this.el.getOrCreateObject3D('mesh', PlaceholderMesh);\r\n\r\n\t\tmeshInit.call(this, mesh);\r\n\r\n\t\t//to pass defaults\r\n\t\tthis.update(this.data);\r\n\t}\r\n\tfunction nativeComponentRemove() {\r\n\t\tvar mesh = this.el.getObject3D('mesh');\r\n\t\taltspace.removeNativeComponent(mesh, this.name);\r\n\t}\r\n\tfunction nativeComponentUpdate(oldData) {\r\n\t\taltspace.updateNativeComponent(this.el.object3DMap.mesh, this.name, this.data);\r\n\t}\r\n\r\n\tfunction callComponent(functionName, functionArguments) {\r\n\t\taltspace.callNativeComponent(this.el.object3DMap.mesh, this.name, functionName, functionArguments)\r\n\t}\r\n\r\n\t/**\r\n\t* Attach a given native object to this entity.\r\n\t* @mixin n-object\r\n\t* @memberof native\r\n\t* @prop {string} res - The identifier for the resource you want. This component\r\n\t* can accept all resources except for `interactables`.\r\n\t* @example <a-entity n-object='res:architecture/wall-4w-4h'></a-entity>\r\n\t*/\r\n\tAFRAME.registerComponent('n-object', {\r\n\t\tschema: {\r\n\t\t\tres: {type: 'string'}\r\n\t\t},\r\n\t\tinit: nativeComponentInit,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tremove: nativeComponentRemove\r\n\t});\r\n\r\n\t/**\r\n\t* Create an object that spawns additional copies of itself when grabbed by a user (the copies are not spawners themselves).\r\n\t* These copies will be physically interactive and automatically synchronized\r\n\t* between users.\r\n\t* @mixin n-spawner\r\n\t* @memberof native\r\n\t* @prop {string} res - The identifier for the resource you want. This component\r\n\t* can only accept resources of type `interactables`.\r\n\t* @example <a-entity n-spawner='res: interactables/basketball'></a-entity>\r\n\t*/\r\n\tAFRAME.registerComponent('n-spawner', {\r\n\t\tschema: {\r\n\t\t\tres: {type: 'string'}\r\n\t\t},\r\n\t\tinit: nativeComponentInit,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tremove: nativeComponentRemove\r\n\t});\r\n\r\n\t/**\r\n\t* Creates dynamic 2D text on the entity. The text will wrap automatically based on the width and height provided.\r\n\t* This text will be clearer than texture-based text and more performant than geometry-based test.\r\n\t* @mixin n-text\r\n\t* @memberof native\r\n\t* @prop {string} text - The text to be drawn.\r\n\t* @prop {number} fontSize=10 - The height of the letters. 10pt ~= 1m\r\n\t* @prop {number} width=10 - The width of the text area in meters. If the\r\n\t* text is wider than this value, the overflow will be wrapped to the next line.\r\n\t* @prop {number} height=1 - The height of the text area in meters. If the\r\n\t* text is taller than this value, the overflow will be cut off.\r\n\t* @prop {string} horizontalAlign=middle - The horizontal anchor point for\r\n\t* the text. Can be `left`, `middle`, or `right`.\r\n\t* @prop {string} verticalAlign=middle - The vertical anchor point for the\r\n\t* text. Can be `top`, `middle`, or `bottom`.\r\n\t*/\r\n\tAFRAME.registerComponent('n-text', {\r\n\t\tinit: nativeComponentInit,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tschema: {\r\n\t\t\ttext: { default: '', type: 'string' },\r\n\t\t\t/*color: { default: 'white',\r\n\t\t\t\tparse: function(value) {\r\n\t\t\t\t\treturn parseFloat(value, 10);\r\n\t\t\t\t},\r\n\t\t\t\tstringify: function(value) {\r\n\t\t\t\t\treturn value.toString();\r\n\t\t\t\t}},*/\r\n\t\t\tfontSize: { default: '10', type: 'int' },//roughly a meter tall\r\n\t\t\twidth: { default: '10', type: 'number' },//in meters\r\n\t\t\theight: { default: '1', type: 'number' },//in meters\r\n\t\t\thorizontalAlign: { default: 'middle'},\r\n\t\t\tverticalAlign: { default: 'middle'}\r\n\t\t}\r\n\t});\r\n\r\n\t//object: collides against: objects / enviroment / cursor\r\n\t//environment: can be teleported onto, and collides against: objects / environment / cursor\r\n\t//hologram: collides against: cursor / holograms\r\n\r\n\t/**\r\n\t* Abstract base class for {@link n.n-sphere-collider}, {@link n.n-box-collider},\r\n\t* {@link n.n-capsule-collider}, and {@link n.n-mesh-collider}. You cannot use\r\n\t* this class directly, but instead you should add one of those components\r\n\t* to your objects.\r\n\t* @name n-collider\r\n\t* @mixin n-collider\r\n\t* @memberof native\r\n\t* @prop {vec3} center=0,0,0 - The offset of the collider in local space.\r\n\t* @prop {string} type=hologram - The type of collider, one of: `object` | `environment` | `hologram`.\r\n\t* Object colliders collide with other objects, the environment, and the cursor.\r\n\t* Environment colliders collide with everything objects do, but you can also\r\n\t* teleport onto them. Hologram colliders only collide with other holograms and\r\n\t* the cursor.\r\n\t*/\r\n\r\n\t/**\r\n\t* Create a spherical collider on this entity.\r\n\t* @mixin n-sphere-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @prop {number} radius=1 - The size of the collider in meters.\r\n\t*/\r\n\tAFRAME.registerComponent('n-sphere-collider', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tcenter: { type: 'vec3' },\r\n\t\t\tradius: { default: '0', type: 'number' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t/**\r\n\t* Create a box-shaped collider on this entity.\r\n\t* @mixin n-box-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @prop {vec3} size=1,1,1 - The dimensions of the collider.\r\n\t*/\r\n\tAFRAME.registerComponent('n-box-collider', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tcenter: { type: 'vec3' },\r\n\t\t\tsize: { type: 'vec3' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Create a capsule-shaped collider on this entity. Capsules\r\n\t* are a union of a cylinder and two spheres on top and bottom.\r\n\t* @mixin n-capsule-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @prop {number} radius=1 - The radius of the capsule in meters.\r\n\t* @prop {number} height=1 - The height of the shaft of the capsule in meters.\r\n\t* @prop {string} direction=y - The axis with which the capsule is aligned.\r\n\t* One of `x`, `y`, or `z`.\r\n\t*/\r\n\tAFRAME.registerComponent('n-capsule-collider', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tcenter: { type: 'vec3' },\r\n\t\t\tradius: { default: '0', type: 'number' },\r\n\t\t\theight: { default: '0', type: 'number' },\r\n\t\t\tdirection: { default: 'y' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Enable collision for the entire attached mesh. This is expensive to evaluate, so should only be used on\r\n\t* low-poly meshes.\r\n\t* @mixin n-mesh-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @example <a-box n-mesh-collider></a-box>\r\n\t* @prop {bool} convex=true - Whether the collider should be convex or concave. Set this to false if you have holes\r\n\t* in your mesh. Convex colliders are limited to 255 triangles. Note: concave colliders can be significantly more\r\n\t* expensive comparet to conves colliders.\r\n\t*/\r\n\tAFRAME.registerComponent('n-mesh-collider', {\r\n\t\t_forEachMesh: function (func) {\r\n\t\t\tvar obj = this.el.object3DMap.mesh;\r\n\t\t\tif (!obj) { return; }\r\n\t\t\tif (obj instanceof THREE.Mesh) {\r\n\t\t\t\tfunc(obj);\r\n\t\t\t}\r\n\t\t\tobj.traverse(function (childObj) {\r\n\t\t\t\tif (childObj instanceof THREE.Mesh) {\r\n\t\t\t\t\tfunc(childObj);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t_initObj: function () {\r\n\t\t\tthis._forEachMesh(function (mesh) {\r\n\t\t\t\tmeshInit.call(this, mesh);\r\n\r\n\t\t\t\t//to pass defaults\r\n\t\t\t\taltspace.updateNativeComponent(mesh, this.name, this.data);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tinit: function () {\r\n\t\t\t// Allow a-frame to create a PlaceholderMesh if there isn't already one, so that the native collider is\r\n\t\t\t// registered.\r\n\t\t\tthis.el.getOrCreateObject3D('mesh', PlaceholderMesh);\r\n\r\n\t\t\t// Initialize the existing mesh\r\n\t\t\tthis._initObj();\r\n\r\n\t\t\tthis.el.addEventListener('model-loaded', function () {\r\n\t\t\t\t// Re-initialize the collider if a new model is loaded\r\n\t\t\t\tthis._initObj();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tremove: function () {\r\n\t\t\tthis._forEachMesh(function (mesh) {\r\n\t\t\t\taltspace.removeNativeComponent(mesh, this.name);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tupdate: function (oldData) {\r\n\t\t\tthis._forEachMesh(function (mesh) {\r\n\t\t\t\taltspace.updateNativeComponent(mesh, this.name, this.data);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tconvex: { default: true, type: 'boolean' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Make the object's +Z always face the viewer. Currently will only directly apply to main mesh or native component on the attached entity, not any children or submeshes.\r\n\t* @mixin n-billboard\r\n\t* @memberof native\r\n\t* @example <a-plane n-billboard></a-plane>\r\n\t*/\r\n\tAFRAME.registerComponent('n-billboard', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t});\r\n\r\n\t/**\r\n\t* A container keeps a running tally of how many objects are within\r\n\t* its bounds, and adds and removes the states `container-full` and\r\n\t* `container-empty` based on the current count of objects. Can fire three\r\n\t* special events: `container-full`, `container-empty`, and `container-count-changed`.\r\n\t* @mixin n-container\r\n\t* @memberof native\r\n\t* @prop {number} capacity=4 - The value at which the container will fire the\r\n\t* `container-full` event.\r\n\t*/\r\n\tAFRAME.registerComponent('n-container', {\r\n\t\tinit: function(){\r\n\t\t\tnativeComponentInit.call(this);\r\n\r\n\t\t\tvar el = this.el;\r\n\t\t\tvar component = this;\r\n\r\n\t\t\tel.addEventListener('stateadded', function(event){\r\n\t\t\t\tif(event.detail.state === 'container-full'){\r\n\t\t\t\t\tel.emit('container-full');\r\n\t\t\t\t}\r\n\t\t\t\tif(event.detail.state === 'container-empty'){\r\n\t\t\t\t\tel.emit('container-empty');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tel.addEventListener('container-count-changed', function(event){\r\n\t\t\t\tcomponent.count = event.detail.count;\r\n\t\t\t});\r\n\t\t},\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tcapacity: { default: 4, type: 'number' },\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Play the sound given by the `src` or `res` property from the location\r\n\t* of the entity.\r\n\t* @mixin n-sound\r\n\t* @memberof native\r\n\t* @prop {string} res - The resource identifier for a built-in sound clip.\r\n\t* @prop {string} src - A URL to an external sound clip. The sound can be in WAV, OGG or MP3 format. However. only\r\n\t* WAV is supported on all platforms. MP3 is supported on Gear VR and OGG is supported on desktop.\r\n\t* @prop {string} on - The name of the event that will play this sound clip.\r\n\t* @prop {boolean} loop=false - Tells the clip to loop back to the beginning of the clip\r\n\t* once it's finished.\r\n\t* @prop {boolean} autoplay=false - Tells the clip to start automatically when\r\n\t* the scene loads, instead of waiting for `playSound()`.\r\n\t* @prop {boolean} oneshot=false - Tells the clip to clean itself up when it\r\n\t* finishes playing. Allows for overlapping instances of the sound.\r\n\t* @prop {number} volume=1 - The volume of the clip, from [0,1].\r\n\t* @prop {number} spatialBlend=1 - How spatialized a sound is, from [0,1].\r\n\t* A value of 1 will be fully localized, and the sound will pan left and\r\n\t* right as you turn your head. A value of 0 makes it non-spatialized, and\r\n\t* it will always be heard in both ears.\r\n\t* @prop {number} pitch=1 - The speed multiplier for the sound. 0.5 is one\r\n\t* octave down, and 2 is one octave up.\r\n\t* @prop {number} minDistance=1 - Inside this distance in meters,\r\n\t* the sound volume is at full volume.\r\n\t* @prop {number} maxDistance=12 - If rolloff is 'logarithmic', the sound will stop attenuating at this distance.\r\n\t* If rolloff is 'linear' or 'cosine', the sound will be silent at this distance.\r\n\t* @prop {string} rolloff='logarithmic' - Set this to 'linear' or 'cosine' if you want to cut sounds off at a\r\n\t* maxDistance.\r\n\t*/\r\n\t/**\r\n\t* Fired when a sound has loaded and is ready to be played\r\n\t* @event native.n-sound#n-sound-loaded\r\n\t*/\r\n\tAFRAME.registerComponent('n-sound', {\r\n\t\tinit: function () {\r\n\t\t\tvar src = this.data.src;\r\n\t\t\tif (src && !src.startsWith('http')) {\r\n\t\t\t\tif (src.startsWith('/')) {\r\n\t\t\t\t\tthis.data.src = location.origin + src;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar currPath = location.pathname;\r\n\t\t\t\t\tif (!currPath.endsWith('/')) {\r\n\t\t\t\t\t\tcurrPath = location.pathname.split('/').slice(0, -1).join('/') + '/';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.data.src = location.origin + currPath + src;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnativeComponentInit.call(this);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Stop the playing sound, and preserve position in clip.\r\n\t\t* @method native.n-sound#pauseSound\r\n\t\t*/\r\n\t\tpauseSound: function () {\r\n\t\t\tcallComponent.call(this, 'pause');\r\n\t\t\tthis.el.emit('sound-paused');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Start the sound playing.\r\n\t\t* @method native.n-sound#playSound\r\n\t\t*/\r\n\t\tplaySound: function () {\r\n\t\t\tcallComponent.call(this, 'play');\r\n\t\t\tthis.el.emit('sound-played');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Jump to a position in the clip.\r\n\t\t* @method native.n-sound#seek\r\n\t\t* @param {number} time - The time in milliseconds to jump to.\r\n\t\t*/\r\n\t\tseek: function (time) {\r\n\t\t\tcallComponent.call(this, 'seek', {time: time});\r\n\t\t},\r\n\t\tremove: function () {\r\n\t\t\tnativeComponentRemove.call(this);\r\n\t\t\tif (this.playHandler) {\r\n\t\t\t  this.el.removeEventListener(oldData.on, this.playHandler);\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdate: function (oldData) {\r\n\t\t\tnativeComponentUpdate.call(this, oldData);\r\n\t\t\tif (this.playHandler) {\r\n\t\t\t  this.el.removeEventListener(oldData.on, this.playHandler);\r\n\t\t\t}\r\n\t\t\tif (this.data.on) {\r\n\t\t\t  this.playHandler = this.playSound.bind(this);\r\n\t\t\t  this.el.addEventListener(this.data.on, this.playHandler);\r\n\t\t\t}\r\n\t\t},\r\n\t\tschema: {\r\n\t\t\ton: { type: 'string' },\r\n\t\t\tres: { type: 'string' },\r\n\t\t\tsrc: { type: 'string' },\r\n\t\t\tloop: { type: 'boolean' },\r\n\t\t\tvolume: { type: 'number', default: 1 },\r\n\t\t\tautoplay: { type: 'boolean' },\r\n\t\t\toneshot: { type: 'boolean' },\r\n\t\t\tspatialBlend: { type: 'float', default: 1 },\r\n\t\t\tpitch: { type: 'float', default: 1 },\r\n\t\t\tminDistance: { type: 'float', default: 1 },\r\n\t\t\tmaxDistance: { type: 'float', default: 12 },\r\n\t\t\trolloff: { type: 'string', default: 'logarithmic' },\r\n\t\t}\r\n\t});\r\n\r\n})();\r\n\r\nexport default null;\r\n","/**\r\n * The wire component allows you to trigger an event on another entity when an event occurs on an entity\r\n * @mixin wire\r\n * @property {string} on Name of an event to listen to\r\n * @property {string} gained Name of a state to watch for\r\n * @property {string} lost Name of a state to watch for\r\n * @property {string} emit Name of an event to trigger on the targets\r\n * @property {string} gain Name of a state to add on the target\r\n * @property {string} lose Name of a state to remove on the target\r\n * @property {selector} targets A selector to pick which objects to wire to\r\n * @property {selector} target - A selector to pick a single object to wire to\r\n **/\r\nAFRAME.registerComponent('wire',\r\n{\r\n\tmultiple: true,\r\n\tschema: {\r\n\t\ton: {type: 'string'},\r\n\t\temit: {type: 'string'},\r\n\t\tgained: {type: 'string'},\r\n\t\tlost: {type: 'string'},\r\n\t\tgain: {type: 'string'},\r\n\t\tlose: {type: 'string'},\r\n\t\ttargets: {type: 'selectorAll'},\r\n\t\ttarget: {type: 'selector'}\r\n\t},\r\n\tupdate: function (oldData) {\r\n\t\tif (oldData.on) {\r\n\t\t\tthis.el.removeEventListener(oldData.on, this.actOnTargets);\r\n\t\t}\r\n\t\tif (oldData.gained) {\r\n\t\t\tthis.el.removeEventListener('stateadded', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\t\tif (oldData.lost) {\r\n\t\t\tthis.el.removeEventListener('stateremoved', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\r\n\t\tthis.actOnTargets = function () {\r\n\t\t\tfunction act(el) {\r\n\t\t\t\tif (this.data.emit) {\r\n\t\t\t\t\tel.emit(this.data.emit);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.data.gain) {\r\n\t\t\t\t\tel.addState(this.data.gain);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.data.lose) {\r\n\t\t\t\t\tel.removeState(this.data.lose);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.data.targets) this.data.targets.forEach(act.bind(this));\r\n\t\t\tif(this.data.target) act.call(this, this.data.target);\r\n\t\t}.bind(this);\r\n\r\n\t\tthis.actOnTargetsIfStateMatches = function (event) {\r\n\t\t\tvar state = event.detail.state;\r\n\t\t\tif (state === this.data.gained || state === this.data.lost) {\r\n\t\t\t\tthis.actOnTargets();\r\n\t\t\t}\r\n\t\t}.bind(this);\r\n\r\n\t\tif (this.data.on) {\r\n\t\t\tthis.el.addEventListener(this.data.on, this.actOnTargets);\r\n\t\t}\r\n\t\tif (this.data.gained) {\r\n\t\t\tthis.el.addEventListener('stateadded', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\t\tif (this.data.lost) {\r\n\t\t\tthis.el.addEventListener('stateremoved', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\t},\r\n\tremove: function () {\r\n\t\tthis.el.removeEventListener(this.data.on, this.actOnTargets);\r\n\t\tthis.el.removeEventListener('stateadded', this.actOnTargetsIfStateMatches);\r\n\t\tthis.el.removeEventListener('stateremoved', this.actOnTargetsIfStateMatches);\r\n\t}\r\n});\r\n\r\nexport default null;\r\n","/**\r\n* @module altspace/components\r\n*/\r\n\r\n'use strict';\r\n\r\nif (typeof AFRAME === 'undefined') {\r\n    throw new Error('Component attempted to register before AFRAME was available.');\r\n}\r\n\r\nimport {registerComponentClass, registerSystemClass, flatten} from './AFrameComponent';\r\n\r\nimport AltspaceCursorCollider from './AltspaceCursorCollider';\r\nregisterComponentClass('altspace-cursor-collider', AltspaceCursorCollider);\r\n\r\nimport AltspaceTrackedControls from './AltspaceTrackedControls';\r\nregisterComponentClass('altspace-tracked-controls', AltspaceTrackedControls);\r\n\r\nimport AltspaceComponent from './AltspaceComponent';\r\nregisterComponentClass('altspace', AltspaceComponent);\r\n\r\nimport SyncColor from './SyncColor';\r\nregisterComponentClass('sync-color', SyncColor);\r\n\r\nimport SyncComponent from './SyncComponent';\r\nregisterComponentClass('sync', SyncComponent);\r\n\r\n/**\r\n* @mixin sync-system\r\n* @memberof module:altspace/components\r\n* @see {@link module:altspace/components.SyncSystem}\r\n*/\r\nimport SyncSystem from './SyncSystem';\r\nregisterSystemClass('sync-system', SyncSystem);\r\n\r\nimport SyncTransform from './sync-transform';\r\nimport SyncNSound from './sync-n-sound';\r\nimport NativeComponents from './native-components';\r\nimport Wire from './wire';\r\n\r\nexport {AltspaceComponent, AltspaceCursorCollider, AltspaceTrackedControls, SyncSystem, SyncComponent, SyncColor, flatten };\r\n"],"names":["let","this"],"mappings":"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"}