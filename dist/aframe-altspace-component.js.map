{"version":3,"file":"aframe-altspace-component.js","sources":["../src/AFrameComponent.js","../src/utilities.js","../src/AltspaceCursorCollider.js","../src/index.js"],"sourcesContent":["'use strict';\r\n\r\nfunction flatten(obj)\r\n{\r\n\tif(!obj.__proto__){\r\n\t\treturn Object.assign( {}, obj );\r\n\t}\r\n\telse {\r\n\t\treturn Object.assign( flatten(obj.__proto__), obj );\r\n\t}\r\n}\r\n\r\nexport default class AFrameComponent\r\n{\r\n\tconstructor(){\r\n\t\tthis.schema = null;\r\n\t}\r\n\t\r\n\tinit(){ }\r\n\tupdate(oldData){ }\r\n\tremove(){ }\r\n\ttick(time, timeDelta){ }\r\n\tpause(){ }\r\n\tplay(){ }\r\n\tupdateSchema(data){ }\r\n\r\n\tregister(name)\r\n\t{\r\n\t\tlet definition = flatten(this);\r\n\t\tAFRAME.registerComponent(name, definition);\r\n\t\tconsole.log('definition:', definition);\r\n\t\tconsole.log('class:', this);\r\n\t}\r\n}\r\n","'use strict';\r\n\r\nfunction safeDeepSet(obj, keys, value)\r\n{\r\n\tif(keys.length === 0)\r\n\t\treturn value;\r\n\telse {\r\n\t\tobj[keys[0]] = safeDeepSet(obj[keys[0]] || {}, keys.slice(1), value);\r\n\t\treturn obj;\r\n\t}\r\n}\r\n\r\nexport { safeDeepSet };\r\n","/**\r\n* Enable or disable cursor collision on the object.\r\n* @mixin altspace-cursor-collider\r\n* @memberof altspace\r\n* @prop {boolean} enabled=true - The state of the cursor collider.\r\n*/\r\n\r\n'use strict';\r\n\r\nimport AFrameComponent from './AFrameComponent';\r\nimport {safeDeepSet} from './utilities';\r\n\r\n\r\nexport default class AltspaceCursorCollider extends AFrameComponent\r\n{\r\n\tconstructor(){\r\n\t\tthis.schema = {enabled: {type: 'boolean', default: 'true'}};\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tthis.setColliderFlag(this.el.object3D, this.data.enabled);\r\n\t\tthis.el.addEventListener('model-loaded', (() => {\r\n\t\t\tthis.setColliderFlag(this.data.enabled);\r\n\t\t}).bind(this));\r\n\t}\r\n\r\n\tupdate()\r\n\t{\r\n\t\tthis.setColliderFlag(this.data.enabled);\r\n\t}\r\n\r\n\tsetColliderFlag(state)\r\n\t{\r\n\t\tlet obj = this.el.object3D;\r\n\t\tif(obj){\r\n\t\t\tconsole.log('Setting collider flag to', state);\r\n\t\t\tsafeDeepSet(obj.userData, ['altspace','collider','enabled'], state);\r\n\t\t\tobj.traverse(subobj => {\r\n\t\t\t\tif( subobj instanceof THREE.Mesh ){\r\n\t\t\t\t\tsafeDeepSet(subobj.userData, ['altspace','collider','enabled'], state);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n","'use strict';\r\n\r\nif (typeof AFRAME === 'undefined') {\r\n  throw new Error('Component attempted to register before AFRAME was available.');\r\n}\r\n\r\nimport AltspaceCursorCollider from './AltspaceCursorCollider';\r\n(new AltspaceCursorCollider()).register('altspace-cursor-collider');\r\n\r\nexport {AltspaceCursorCollider};\r\n"],"names":["this","let"],"mappings":"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"}