{"version":3,"sources":["webpack:///webpack/bootstrap 4d409d583224f60e7a34","webpack:///./src/index.js","webpack:///./src/altspace.js","webpack:///./src/altspace-cursor-collider.js","webpack:///./src/altspace-tracked-controls.js","webpack:///./src/native-components.js","webpack:///./src/native-resources.js","webpack:///./src/sync.js","webpack:///./src/sync-system.js","webpack:///./src/sync-transform.js","webpack:///./src/sync-color.js","webpack:///./src/sync-n-sound.js","webpack:///./src/wire.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA,cAAa,OAAO;AACpB;AACA,cAAa,QAAQ;AACrB;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,mCAAmC;AACpD,kBAAiB,oCAAoC;AACrD,kBAAiB,kCAAkC;AACnD,kBAAiB;AACjB,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAuC,eAAe;AACtD;AACA;AACA;AACA,GAAE;AACF;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,wBAAuB,EAAE;;AAEzB;AACA;AACA;AACA,0BAAyB,EAAE;;AAE3B;AACA;AACA;AACA;AACA,uBAAsB,EAAE;;AAExB;AACA;AACA;AACA;AACA,sBAAqB,EAAE;;;AAGvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA0C,uDAAuD;AACjG,2CAA0C,uDAAuD;AACjG,GAAE;;AAEF;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA,GAAE;;AAEF;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA,GAAE;;AAEF,IAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;;AAEA,EAAC;;;;;;;AC5OD;;AAEA;AACA,4BAA2B,WAAW;AACtC;AACA;AACA,8BAA6B,WAAW;AACxC;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAU,QAAQ;AAClB;AACA;AACA,YAAW,WAAW,gBAAgB,EAAE;AACxC;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA,GAAE;;AAEF,EAAC;;;;;;;AC9BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;ACpCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yDAAwD,kBAAkB;AAC1E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,IAAG;AACH;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,IAAG;AACH;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,WAAU,OAAO;AACjB,WAAU,OAAO;AACjB;AACA,WAAU,OAAO;AACjB;AACA,WAAU,OAAO;AACjB;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,8BAA8B;AACxC,cAAa;AACb;AACA;AACA,MAAK;AACL;AACA;AACA,OAAM;AACN,eAAc,6BAA6B;AAC3C,YAAW,gCAAgC;AAC3C,aAAY,+BAA+B;AAC3C,sBAAqB,mBAAmB;AACxC,oBAAmB;AACnB;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA,6BAA4B,0BAA0B,GAAG,uBAAuB;AAChF,KAAI,2BAA2B,OAAO,wBAAwB;AAC9D;AACA;AACA;AACA;AACA;AACA,WAAU,KAAK;AACf,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,kCAAkC;AACjD,aAAY,eAAe;AAC3B,aAAY,+BAA+B;AAC3C,WAAU;AACV;AACA,GAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,WAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,kCAAkC;AACjD,aAAY,eAAe;AAC3B,WAAU,eAAe;AACzB,WAAU;AACV;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,WAAU,OAAO;AACjB,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,kCAAkC;AACjD,aAAY,eAAe;AAC3B,aAAY,+BAA+B;AAC3C,aAAY,+BAA+B;AAC3C,gBAAe,eAAe;AAC9B,WAAU;AACV;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA,gBAAe,kCAAkC;AACjD,aAAY,iCAAiC;AAC7C,WAAU;AACV;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA,eAAc,6BAA6B;AAC3C;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,WAAU,OAAO;AACjB;AACA,WAAU,OAAO;AACjB,WAAU,QAAQ;AAClB;AACA,WAAU,QAAQ;AAClB;AACA,WAAU,QAAQ;AAClB;AACA,WAAU,OAAO;AACjB,WAAU,OAAO;AACjB;AACA;AACA;AACA,WAAU,OAAO;AACjB;AACA,WAAU,OAAO;AACjB;AACA,WAAU,OAAO;AACjB;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA,sCAAqC,WAAW;AAChD,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,SAAQ,iBAAiB;AACzB,UAAS,iBAAiB;AAC1B,UAAS,iBAAiB;AAC1B,WAAU,kBAAkB;AAC5B,aAAY,6BAA6B;AACzC,eAAc,kBAAkB;AAChC,cAAa,kBAAkB;AAC/B,mBAAkB,4BAA4B;AAC9C,YAAW,4BAA4B;AACvC,kBAAiB,4BAA4B;AAC7C,kBAAiB,6BAA6B;AAC9C,cAAa,yCAAyC;AACtD;AACA,GAAE;;AAEF,EAAC;;;;;;;AChbD;;AAEA;AACA;AACA;AACA,IAAG,kBAAkB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChMA;AACA;AACA,mBAAkB,uBAAuB,sBAAsB;AAC/D;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;;;;AAIA;AACA;AACA,wBAAuB,uBAAuB;AAC9C,4BAA2B,0BAA0B;AACrD;AACA;AACA,UAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,kBAAkB;AAC3B,WAAU,iBAAiB;AAC3B,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,mCAAkC;;;AAGlC;AACA;AACA;AACA,gDAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA,IAAG;AACH;AACA,EAAC;;;;;;;AC5JD;AACA;AACA;AACA,qCAAoC,+FAA+F;AACnI;AACA;AACA;AACA,UAAS,OAAO;AAChB,UAAS,OAAO;AAChB,UAAS,OAAO;AAChB,UAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;AACA,YAAW,gCAAgC;AAC3C,SAAQ,gCAAgC;AACxC,cAAa,gCAAgC;AAC7C,YAAW;AACX,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA,8CAA6C,mBAAmB;AAChE,MAAK;AACL,KAAI;;AAEJ;AACA;AACA;AACA;AACA,4CAA2C,iBAAiB;AAC5D,MAAK;AACL,KAAI;;AAEJ;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,0CAAyC,qCAAqC;AAC9E;AACA,KAAI;;;AAGJ;AACA,uBAAsB,yCAAyC,EAAE;AACjE,KAAI;AACJ,IAAG;AACH;AACA,EAAC;;;;;;;ACvFD;AACA;;AAEA;AACA;AACA,oBAAmB,uBAAuB;AAC1C,IAAG,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,gCAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,oBAAmB,8BAA8B;AACjD;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAI;;AAEJ;AACA;AACA,KAAI;;AAEJ;AACA;AACA,KAAI;;AAEJ;AACA;AACA,KAAI;;AAEJ;AACA;AACA,KAAI;;AAEJ;AACA;AACA,KAAI;;AAEJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,EAAC;;;;;;;ACjJD;AACA;AACA,oBAAmB,uBAAuB;AAC1C,IAAG,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,gCAA+B;;AAE/B;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,8BAA6B;AAC7B;AACA,QAAO;AACP;AACA;AACA,KAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;AACA,EAAC;;;;;;;ACrDD;AACA,yCAAwC,gBAAgB;AACxD,oBAAmB,uBAAuB;AAC1C,IAAG,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,EAAE;AACZ;AACA;AACA;AACA;AACA;AACA,gCAA+B;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACtED;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,SAAS;AACvB,eAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA,QAAO,eAAe;AACtB,UAAS,eAAe;AACxB,YAAW,eAAe;AAC1B,UAAS,eAAe;AACxB,UAAS,eAAe;AACxB,UAAS,eAAe;AACxB,aAAY,oBAAoB;AAChC,YAAW;AACX,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAC","file":"aframe-altspace-component.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4d409d583224f60e7a34\n **/","if (typeof AFRAME === 'undefined') {\r\n  throw new Error('Component attempted to register before AFRAME was available.');\r\n}\r\n\r\nrequire('./altspace');\r\nrequire('./altspace-cursor-collider');\r\nrequire('./altspace-tracked-controls');\r\nrequire('./native-components');\r\nrequire('./native-resources');\r\nrequire('./sync');\r\nrequire('./sync-system');\r\nrequire('./sync-transform');\r\nrequire('./sync-color');\r\nrequire('./sync-n-sound');\r\nrequire('./wire');\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","/**\r\n* @namespace altspace\r\n*/\r\n\r\n/**\r\n* The altspace component makes A-Frame apps compatible with AltspaceVR.\r\n*\r\n* **Note**: If you use the `embedded` A-Frame component on your scene, you must include it *before* the `altspace` component, or your app will silently fail.\r\n* @mixin altspace\r\n* @memberof altspace\r\n* @property {boolean} usePixelScale=`false` - Allows you to use A-Frame units as CSS pixels.\r\n* This is the default behavior for three.js apps, but not for A-Frame apps.\r\n* @property {string} verticalAlign=`middle` - Puts the origin at the `bottom`, `middle` (default),\r\n* or `top` of the Altspace enclosure.\r\n* @property {boolean} enclosuresOnly=`true` - Prevents the scene from being created if\r\n* enclosure is flat.\r\n* @property {boolean} fullspace=`false` - Puts the app into fullspace mode.\r\n*\r\n* @example\r\n* <head>\r\n*   <title>My A-Frame Scene</title>\r\n*   <script src=\"https://aframe.io/releases/0.3.0/aframe.min.js\"></script>\r\n*   <script src=\"https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/v1.3.2/dist/aframe-altspace-component.min.js\"></script>\r\n* </head>\r\n* <body>\r\n*   <a-scene altspace>\r\n*     <a-entity geometry=\"primitive: box\" material=\"color: #C03546\"></a-entity>\r\n*   </a-scene>\r\n* </body>\r\n*/\r\nAFRAME.registerComponent('altspace', {\r\n  version: '1.3.2',\r\n  schema: {\r\n\tusePixelScale: { type: 'boolean', default: 'false'},\r\n\tverticalAlign: { type: 'string',  default: 'middle'},\r\n\tenclosuresOnly:{ type: 'boolean', default: 'true'},\r\n\tfullspace:     { type: 'boolean', default: 'false'}\r\n  },\r\n\r\n  /*\r\n   * Called once when component is attached. Generally for initial setup.\r\n   */\r\n  init: function () {\r\n\tif (!(this.el.object3D instanceof THREE.Scene)) {\r\n\t  console.warn('aframe-altspace-component can only be attached to a-scene');\r\n\t  return;\r\n\t}\r\n\r\n\tif (window.altspace && window.altspace.inClient) {\r\n\t  this.el.setAttribute('vr-mode-ui', {enabled: false});\r\n\t  this.initRenderer();\r\n\t  this.initCursorEvents();\r\n\t  this.initCollisionEvents();\r\n\t} else {\r\n\t  console.warn('aframe-altspace-component only works inside of AltspaceVR');\r\n\t}\r\n\r\n  },\r\n\r\n  /*\r\n   * Called on every single tick or render loop of the scene.\r\n   */\r\n  tick: function (t, dt) {\r\n      if(this.el.object3D.updateAllBehaviors)\r\n        this.el.object3D.updateAllBehaviors();\r\n  },\r\n\r\n  /*\r\n   * Called when a component is removed (e.g., via removeAttribute).\r\n   * Generally undoes all modifications to the entity.\r\n   */\r\n  remove: function () { },\r\n\r\n  /*\r\n   * Called on each scene tick.\r\n   */\r\n  // tick: function (t) { },\r\n\r\n  /*\r\n   * Called when entity pauses.\r\n   * Use to stop or remove any dynamic or background behavior such as events.\r\n   */\r\n  pause: function () { },\r\n\r\n  /*\r\n   * Called when entity resumes.\r\n   * Use to continue or add any dynamic or background behavior such as events.\r\n   */\r\n  play: function () { },\r\n\r\n\r\n  /********** Helper Methods **********/\r\n\r\n  /*\r\n   * Swap in Altspace renderer when running in AltspaceVR.\r\n   */\r\n  initRenderer: function () {\r\n\r\n\tvar scene = this.el.object3D;\r\n\taltspace.getEnclosure().then(function(e)\r\n\t{\r\n\t\tif(this.data.fullspace){\r\n\t\t\te.requestFullspace();\r\n\t\t\te.addEventListener('fullspacechange', function(){\r\n\t\t\t\tscene.scale.setScalar(e.pixelsPerMeter);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (!this.data.usePixelScale || this.data.fullspace){\r\n\t\t\tscene.scale.setScalar(e.pixelsPerMeter);\r\n\t\t}\r\n\r\n\t  switch (this.data.verticalAlign) {\r\n\t\tcase 'bottom':\r\n\t\t  scene.position.y -= e.innerHeight / 2;\r\n\t\t  break;\r\n\t\tcase 'top':\r\n\t\t  scene.position.y += e.innerHeight / 2;\r\n\t\t  break;\r\n\t\tcase 'middle':\r\n\t\t  break;\r\n\t\tdefault:\r\n\t\t  console.warn('Unexpected value for verticalAlign: ', this.data.verticalAlign);\r\n\t  }\r\n\r\n\t  if(this.data.enclosuresOnly && e.innerDepth === 1){\r\n\t\tthis.el.renderer.render(new THREE.Scene());\r\n\t\tthis.el.renderer = this.el.effect = oldRenderer;\r\n\r\n\t  }\r\n\t}.bind(this));\r\n\r\n\tvar oldRenderer = this.el.renderer;\r\n\tvar renderer = this.el.renderer = this.el.effect = altspace.getThreeJSRenderer({\r\n\t  aframeComponentVersion: this.version\r\n\t});\r\n\tvar noop = function() {};\r\n\trenderer.setSize = noop;\r\n\trenderer.setPixelRatio = noop;\r\n\trenderer.setClearColor = noop;\r\n\trenderer.clear = noop;\r\n\trenderer.enableScissorTest = noop;\r\n\trenderer.setScissor = noop;\r\n\trenderer.setViewport = noop;\r\n\trenderer.getPixelRatio = noop;\r\n\trenderer.getMaxAnisotropy = noop;\r\n\trenderer.setFaceCulling = noop;\r\n\trenderer.context = {canvas: {}};\r\n\trenderer.shadowMap = {};\r\n\r\n  },\r\n\r\n  /*\r\n   * Emulate A-Frame cursor events when running in altspaceVR.\r\n   */\r\n  initCursorEvents: function() {\r\n\r\n\tvar scene = this.el.object3D;\r\n\tvar cursorEl = document.querySelector('a-cursor') || document.querySelector('a-entity[cursor]');\r\n\tif (cursorEl) {\r\n\t  // Hide A-Frame cursor mesh.\r\n\t  cursorEl.setAttribute('material', 'transparent', true);\r\n\t  cursorEl.setAttribute('material', 'opacity', 0.0);\r\n\t}\r\n\r\n\tvar emit = function (eventName, event) {\r\n\t\t// Fire events on intersected object and A-Frame cursor.\r\n\t\tvar targetEl = event.target.el;\r\n\t\tif (cursorEl) cursorEl.emit(eventName, { target: targetEl, ray: event.ray, point: event.point });\r\n\t\tif (targetEl) targetEl.emit(eventName, { target: targetEl, ray: event.ray, point: event.point });\r\n\t} ;\r\n\r\n\tvar cursordownObj = null;\r\n\tscene.addEventListener('cursordown', function(event) {\r\n\t  cursordownObj = event.target;\r\n\t  emit('mousedown', event);\r\n\t});\r\n\r\n\tscene.addEventListener('cursorup', function(event) {\r\n\t  emit('mouseup', event);\r\n\t  if (event.target.uuid === cursordownObj.uuid) {\r\n\t\temit('click', event);\r\n\t  }\r\n\t  cursordownObj = null;\r\n\t});\r\n\r\n\tscene.addEventListener('cursorenter', function(event) {\r\n\t  if (!event.target.el) { return; }\r\n\t  event.target.el.addState('hovered');\r\n\t  if (cursorEl) cursorEl.addState('hovering');\r\n\t  emit('mouseenter', event);\r\n\t});\r\n\r\n\tscene.addEventListener('cursorleave', function(event) {\r\n\t  if (!event.target.el) { return; }\r\n\t  event.target.el.removeState('hovered');\r\n\t  if (cursorEl) cursorEl.removeState('hovering');\r\n\t  emit('mouseleave', event);\r\n\t});\r\n\r\n  },\r\n\r\n  initCollisionEvents: function () {\r\n\r\n\tvar scene = this.el.object3D;\r\n\r\n\tvar emit = function (eventName, event) {\r\n\t\tvar targetEl = event.target.el;\r\n\t\tif (!targetEl) return;\r\n\r\n\t\t//remap target and other from object3Ds to aframe element\r\n\t\tevent.target = targetEl;\r\n\t\tif (event.other && event.other.el) {\r\n\t\t\tevent.other = event.other.el;\r\n\t\t}\r\n\t\ttargetEl.emit(eventName, event);\r\n\t};\r\n\r\n\tscene.addEventListener('collisionenter', function (event) {\r\n\t\temit('collisionenter', event);\r\n\t});\r\n\r\n\tscene.addEventListener('collisionexit', function (event) {\r\n\t\temit('collisionexit', event);\r\n\t});\r\n\r\n\tscene.addEventListener('triggerenter', function (event) {\r\n\t\temit('triggerenter', event);\r\n\t});\r\n\r\n\tscene.addEventListener('triggerexit', function (event) {\r\n\t\temit('triggerexit', event);\r\n\t});\r\n\r\n  }\r\n\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/altspace.js\n ** module id = 1\n ** module chunks = 0\n **/","(function(){\r\n\r\n\tfunction setColliderFlag(obj, state) {\r\n\t\tobj.userData.altspace = {collider: {enabled: state}};\r\n\t\tobj.traverse(function (obj) {\r\n\t\t\tif (obj instanceof THREE.Mesh) {\r\n\t\t\t\tobj.userData.altspace = {collider: {enabled: state}};\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t* Enable or disable cursor collision on the object.\r\n\t* @mixin altspace-cursor-collider\r\n\t* @memberof altspace\r\n\t* @prop {boolean} enabled=true - The state of the cursor collider.\r\n\t*/\r\n\tAFRAME.registerComponent('altspace-cursor-collider', {\r\n\t\tschema: { enabled: { default: true } },\r\n\t\tinit: function () {\r\n\t\t\tsetColliderFlag(this.el.object3D, this.data.enabled);\r\n\t\t\tthis.el.addEventListener('model-loaded', (function(){\r\n\t\t\t\tsetColliderFlag(this.el.object3D, this.data.enabled);\r\n\t\t\t}).bind(this));\r\n\t\t},\r\n\t\tupdate: function () {\r\n\t\t\tsetColliderFlag(this.el.object3D, this.data.enabled);\r\n\t\t}\r\n\t});\r\n\r\n})();\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/altspace-cursor-collider.js\n ** module id = 2\n ** module chunks = 0\n **/","/**\r\n* Enables tracked control support for A-Frame applications that use the built-in\r\n* `tracked-controls`, `vive-controls` or `hand-controls` components.\r\n* @mixin altspace-tracked-controls\r\n* @memberof altspace\r\n*/\r\nAFRAME.registerComponent('altspace-tracked-controls', {\r\n  init: function () {\r\n\tthis.gamepadIndex = null;\r\n\tthis.trackedControlsSystem = document.querySelector('a-scene').systems['tracked-controls'];\r\n\tthis.systemGamepads = 0;\r\n\taltspace.getGamepads();\r\n  },\r\n  tick: function () {\r\n\t  if (\r\n\t\tthis.trackedControlsSystem &&\r\n\t\tthis.systemGamepads !== this.trackedControlsSystem.controllers.length &&\r\n\t\twindow.altspace && altspace.getGamepads && altspace.getGamepads().length\r\n\t  ) {\r\n\t\tvar components = this.el.components;\r\n\t\tif (components['paint-controls']) {\r\n\t\t  this.gamepadIndex = components['paint-controls'].data.hand === 'left' ? 2 : 1;\r\n\t\t}\r\n\t\tif (this.gamepadIndex === null && components['hand-controls']) {\r\n\t\t  this.gamepadIndex = components['hand-controls'].data === 'left' ? 2 : 1;\r\n\t\t}\r\n\t\tif (this.gamepadIndex === null && components['vive-controls']) {\r\n\t\t  this.gamepadIndex = components['vive-controls'].data.hand === 'left' ? 2 : 1;\r\n\t\t}\r\n\t\tif (this.gamepadIndex === null && components['tracked-controls']) {\r\n\t\t  this.gamepadIndex = components['tracked-controls'].data.controller;\r\n\t\t}\r\n\t\tthis.el.setAttribute('tracked-controls', 'id', altspace.getGamepads()[this.gamepadIndex].id);\r\n\t\tthis.el.setAttribute('tracked-controls', 'controller', 0);\r\n\t\tthis.systemGamepads = this.trackedControlsSystem.controllers.length;\r\n\t  }\r\n  }\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/altspace-tracked-controls.js\n ** module id = 3\n ** module chunks = 0\n **/","\r\n/**\r\n* This set of components map to various objects and effects that are provided\r\n* natively by AltspaceVR. Your management of these objects may be limited to\r\n* some degree, but they will tend to be more performant than SDK equivalents,\r\n* or may provide some functionality not otherwise available to the SDK.\r\n* @namespace native\r\n*/\r\n(function () {\r\n\tif (!window.altspace || !altspace.inClient) {\r\n\t\tvar noop = function () {};\r\n\t\twindow.altspace = {\r\n\t\t\taddNativeComponent: noop,\r\n\t\t\tupdateNativeComponent: noop,\r\n\t\t\tremoveNativeComponent: noop\r\n\t\t};\r\n\t}\r\n\r\n\tvar placeholderGeometry = new THREE.BoxGeometry(0.001, 0.001, 0.001);\r\n\tvar placeholderMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });\r\n\tplaceholderMaterial.visible = false;\r\n\tvar PlaceholderMesh = function () {\r\n\t\tTHREE.Mesh.call( this, placeholderGeometry, placeholderMaterial );\r\n\t};\r\n\tPlaceholderMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tPlaceholderMesh.prototype.constructor = THREE.PlaceholderMesh;\r\n\r\n\tfunction meshInit(mesh) {\r\n\t\t//If you attach native components to an entity, it will not use a default collider\r\n\t\tmesh.userData.altspace = mesh.userData.altspace || {};\r\n\t\tmesh.userData.altspace.collider = mesh.userData.altspace.collider || {};\r\n\t\tmesh.userData.altspace.collider.enabled = false;\r\n\r\n\t\taltspace.addNativeComponent(mesh, this.name);\r\n\t}\r\n\r\n\tfunction nativeComponentInit() {\r\n\t\tvar mesh = this.el.getOrCreateObject3D('mesh', PlaceholderMesh);\r\n\r\n\t\tmeshInit.call(this, mesh);\r\n\r\n\t\t//to pass defaults\r\n\t\tthis.update(this.data);\r\n\t}\r\n\tfunction nativeComponentRemove() {\r\n\t\tvar mesh = this.el.getObject3D('mesh');\r\n\t\taltspace.removeNativeComponent(mesh, this.name);\r\n\t}\r\n\tfunction nativeComponentUpdate(oldData) {\r\n\t\taltspace.updateNativeComponent(this.el.object3DMap.mesh, this.name, this.data);\r\n\t}\r\n\r\n\tfunction callComponent(functionName, functionArguments) {\r\n\t\taltspace.callNativeComponent(this.el.object3DMap.mesh, this.name, functionName, functionArguments)\r\n\t}\r\n\r\n\t/**\r\n\t* Attach a given native object to this entity.\r\n\t* @mixin n-object\r\n\t* @memberof native\r\n\t* @prop {string} res - The identifier for the resource you want. This component\r\n\t* can accept all resources except for `interactables`.\r\n\t* @example <a-entity n-object='res:architecture/wall-4w-4h'></a-entity>\r\n\t*/\r\n\tAFRAME.registerComponent('n-object', {\r\n\t\tschema: {\r\n\t\t\tres: {type: 'string'}\r\n\t\t},\r\n\t\tinit: nativeComponentInit,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tremove: nativeComponentRemove\r\n\t});\r\n\r\n\t/**\r\n\t* Create an object that spawns additional copies of itself when grabbed by a user (the copies are not spawners themselves).\r\n\t* These copies will be physically interactive and automatically synchronized\r\n\t* between users.\r\n\t* @mixin n-spawner\r\n\t* @memberof native\r\n\t* @prop {string} res - The identifier for the resource you want. This component\r\n\t* can only accept resources of type `interactables`.\r\n\t* @example <a-entity n-spawner='res: interactables/basketball'></a-entity>\r\n\t*/\r\n\tAFRAME.registerComponent('n-spawner', {\r\n\t\tschema: {\r\n\t\t\tres: {type: 'string'}\r\n\t\t},\r\n\t\tinit: nativeComponentInit,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tremove: nativeComponentRemove\r\n\t});\r\n\r\n\t/**\r\n\t* Creates dynamic 2D text on the entity. The text will wrap automatically based on the width and height provided.\r\n\t* This text will be clearer than texture-based text and more performant than geometry-based test.\r\n\t* @mixin n-text\r\n\t* @memberof native\r\n\t* @prop {string} text - The text to be drawn.\r\n\t* @prop {number} fontSize=10 - The height of the letters. 10pt ~= 1m\r\n\t* @prop {number} width=10 - The width of the text area in meters. If the\r\n\t* text is wider than this value, the overflow will be wrapped to the next line.\r\n\t* @prop {number} height=1 - The height of the text area in meters. If the\r\n\t* text is taller than this value, the overflow will be cut off.\r\n\t* @prop {string} horizontalAlign=middle - The horizontal anchor point for\r\n\t* the text. Can be `left`, `middle`, or `right`.\r\n\t* @prop {string} verticalAlign=middle - The vertical anchor point for the\r\n\t* text. Can be `top`, `middle`, or `bottom`.\r\n\t*/\r\n\tAFRAME.registerComponent('n-text', {\r\n\t\tinit: nativeComponentInit,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tschema: {\r\n\t\t\ttext: { default: '', type: 'string' },\r\n\t\t\t/*color: { default: 'white',\r\n\t\t\t\tparse: function(value) {\r\n\t\t\t\t\treturn parseFloat(value, 10);\r\n\t\t\t\t},\r\n\t\t\t\tstringify: function(value) {\r\n\t\t\t\t\treturn value.toString();\r\n\t\t\t\t}},*/\r\n\t\t\tfontSize: { default: '10', type: 'int' },//roughly a meter tall\r\n\t\t\twidth: { default: '10', type: 'number' },//in meters\r\n\t\t\theight: { default: '1', type: 'number' },//in meters\r\n\t\t\thorizontalAlign: { default: 'middle'},\r\n\t\t\tverticalAlign: { default: 'middle'}\r\n\t\t}\r\n\t});\r\n\r\n\t//object: collides against: objects / enviroment / cursor\r\n\t//environment: can be teleported onto, and collides against: objects / environment / cursor\r\n\t//hologram: collides against: cursor / holograms\r\n\r\n\t/**\r\n\t* Abstract base class for {@link n.n-sphere-collider}, {@link n.n-box-collider},\r\n\t* {@link n.n-capsule-collider}, and {@link n.n-mesh-collider}. You cannot use\r\n\t* this class directly, but instead you should add one of those components\r\n\t* to your objects.\r\n\t* @name n-collider\r\n\t* @mixin n-collider\r\n\t* @memberof native\r\n\t* @prop {vec3} center=0,0,0 - The offset of the collider in local space.\r\n\t* @prop {string} type=hologram - The type of collider, one of: `object` | `environment` | `hologram`.\r\n\t* Object colliders collide with other objects, the environment, and the cursor.\r\n\t* Environment colliders collide with everything objects do, but you can also\r\n\t* teleport onto them. Hologram colliders only collide with other holograms and\r\n\t* the cursor.\r\n\t*/\r\n\r\n\t/**\r\n\t* Create a spherical collider on this entity.\r\n\t* @mixin n-sphere-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @prop {number} radius=1 - The size of the collider in meters.\r\n\t*/\r\n\tAFRAME.registerComponent('n-sphere-collider', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tcenter: { type: 'vec3' },\r\n\t\t\tradius: { default: '0', type: 'number' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t/**\r\n\t* Create a box-shaped collider on this entity.\r\n\t* @mixin n-box-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @prop {vec3} size=1,1,1 - The dimensions of the collider.\r\n\t*/\r\n\tAFRAME.registerComponent('n-box-collider', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tcenter: { type: 'vec3' },\r\n\t\t\tsize: { type: 'vec3' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Create a capsule-shaped collider on this entity. Capsules\r\n\t* are a union of a cylinder and two spheres on top and bottom.\r\n\t* @mixin n-capsule-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @prop {number} radius=1 - The radius of the capsule in meters.\r\n\t* @prop {number} height=1 - The height of the shaft of the capsule in meters.\r\n\t* @prop {string} direction=y - The axis with which the capsule is aligned.\r\n\t* One of `x`, `y`, or `z`.\r\n\t*/\r\n\tAFRAME.registerComponent('n-capsule-collider', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tcenter: { type: 'vec3' },\r\n\t\t\tradius: { default: '0', type: 'number' },\r\n\t\t\theight: { default: '0', type: 'number' },\r\n\t\t\tdirection: { default: 'y' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Enable collision for the entire attached mesh. This is expensive to evaluate, so should only be used on\r\n\t* low-poly meshes.\r\n\t* @mixin n-mesh-collider\r\n\t* @memberof native\r\n\t* @extends native.n-collider\r\n\t* @example <a-box n-mesh-collider></a-box>\r\n\t* @prop {bool} convex=true - Whether the collider should be convex or concave. Set this to false if you have holes\r\n\t* in your mesh. Convex colliders are limited to 255 triangles. Note: concave colliders can be significantly more\r\n\t* expensive comparet to conves colliders.\r\n\t*/\r\n\tAFRAME.registerComponent('n-mesh-collider', {\r\n\t\t_forEachMesh: function (func) {\r\n\t\t\tvar obj = this.el.object3DMap.mesh;\r\n\t\t\tif (!obj) { return; }\r\n\t\t\tif (obj instanceof THREE.Mesh) {\r\n\t\t\t\tfunc(obj);\r\n\t\t\t}\r\n\t\t\tobj.traverse(function (childObj) {\r\n\t\t\t\tif (childObj instanceof THREE.Mesh) {\r\n\t\t\t\t\tfunc(childObj);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t_initObj: function () {\r\n\t\t\tthis._forEachMesh(function (mesh) {\r\n\t\t\t\tmeshInit.call(this, mesh);\r\n\r\n\t\t\t\t//to pass defaults\r\n\t\t\t\taltspace.updateNativeComponent(mesh, this.name, this.data);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tinit: function () {\r\n\t\t\t// Allow a-frame to create a PlaceholderMesh if there isn't already one, so that the native collider is\r\n\t\t\t// registered.\r\n\t\t\tthis.el.getOrCreateObject3D('mesh', PlaceholderMesh);\r\n\r\n\t\t\t// Initialize the existing mesh\r\n\t\t\tthis._initObj();\r\n\r\n\t\t\tthis.el.addEventListener('model-loaded', function () {\r\n\t\t\t\t// Re-initialize the collider if a new model is loaded\r\n\t\t\t\tthis._initObj();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tremove: function () {\r\n\t\t\tthis._forEachMesh(function (mesh) {\r\n\t\t\t\taltspace.removeNativeComponent(mesh, this.name);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tupdate: function (oldData) {\r\n\t\t\tthis._forEachMesh(function (mesh) {\r\n\t\t\t\taltspace.updateNativeComponent(mesh, this.name, this.data);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tschema: {\r\n\t\t\tisTrigger: { default: false, type: 'boolean' },\r\n\t\t\tconvex: { default: true, type: 'boolean' },\r\n\t\t\ttype: {default: 'object'}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Make the object's +Z always face the viewer. Currently will only directly apply to main mesh or native component on the attached entity, not any children or submeshes.\r\n\t* @mixin n-billboard\r\n\t* @memberof native\r\n\t* @example <a-plane n-billboard></a-plane>\r\n\t*/\r\n\tAFRAME.registerComponent('n-billboard', {\r\n\t\tinit:nativeComponentInit,\r\n\t\tremove: nativeComponentRemove,\r\n\t});\r\n\r\n\t/**\r\n\t* A container keeps a running tally of how many objects are within\r\n\t* its bounds, and adds and removes the states `container-full` and\r\n\t* `container-empty` based on the current count of objects. Can fire three\r\n\t* special events: `container-full`, `container-empty`, and `container-count-changed`.\r\n\t* @mixin n-container\r\n\t* @memberof native\r\n\t* @prop {number} capacity=4 - The value at which the container will fire the\r\n\t* `container-full` event.\r\n\t*/\r\n\tAFRAME.registerComponent('n-container', {\r\n\t\tinit: function(){\r\n\t\t\tnativeComponentInit.call(this);\r\n\r\n\t\t\tvar el = this.el;\r\n\t\t\tvar component = this;\r\n\r\n\t\t\tel.addEventListener('stateadded', function(event){\r\n\t\t\t\tif(event.detail.state === 'container-full'){\r\n\t\t\t\t\tel.emit('container-full');\r\n\t\t\t\t}\r\n\t\t\t\tif(event.detail.state === 'container-empty'){\r\n\t\t\t\t\tel.emit('container-empty');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tel.addEventListener('container-count-changed', function(event){\r\n\t\t\t\tcomponent.count = event.detail.count;\r\n\t\t\t});\r\n\t\t},\r\n\t\tremove: nativeComponentRemove,\r\n\t\tupdate: nativeComponentUpdate,\r\n\t\tschema: {\r\n\t\t\tcapacity: { default: 4, type: 'number' },\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Play the sound given by the `src` or `res` property from the location\r\n\t* of the entity.\r\n\t* @mixin n-sound\r\n\t* @memberof native\r\n\t* @prop {string} res - The resource identifier for a built-in sound clip.\r\n\t* @prop {string} src - A URL to an external sound clip. The sound can be in WAV, OGG or MP3 format. However. only\r\n\t* WAV is supported on all platforms. MP3 is supported on Gear VR and OGG is supported on desktop.\r\n\t* @prop {string} on - The name of the event that will play this sound clip.\r\n\t* @prop {boolean} loop=false - Tells the clip to loop back to the beginning of the clip\r\n\t* once it's finished.\r\n\t* @prop {boolean} autoplay=false - Tells the clip to start automatically when\r\n\t* the scene loads, instead of waiting for `playSound()`.\r\n\t* @prop {boolean} oneshot=false - Tells the clip to clean itself up when it\r\n\t* finishes playing. Allows for overlapping instances of the sound.\r\n\t* @prop {number} volume=1 - The volume of the clip, from [0,1].\r\n\t* @prop {number} spatialBlend=1 - How spatialized a sound is, from [0,1].\r\n\t* A value of 1 will be fully localized, and the sound will pan left and\r\n\t* right as you turn your head. A value of 0 makes it non-spatialized, and\r\n\t* it will always be heard in both ears.\r\n\t* @prop {number} pitch=1 - The speed multiplier for the sound. 0.5 is one\r\n\t* octave down, and 2 is one octave up.\r\n\t* @prop {number} minDistance=1 - Inside this distance in meters,\r\n\t* the sound volume is at full volume.\r\n\t* @prop {number} maxDistance=12 - If rolloff is 'logarithmic', the sound will stop attenuating at this distance.\r\n\t* If rolloff is 'linear' or 'cosine', the sound will be silent at this distance.\r\n\t* @prop {string} rolloff='logarithmic' - Set this to 'linear' or 'cosine' if you want to cut sounds off at a\r\n\t* maxDistance.\r\n\t*/\r\n\t/**\r\n\t* Fired when a sound has loaded and is ready to be played\r\n\t* @event native.n-sound#n-sound-loaded\r\n\t*/\r\n\tAFRAME.registerComponent('n-sound', {\r\n\t\tinit: function () {\r\n\t\t\tvar src = this.data.src;\r\n\t\t\tif (src && !src.startsWith('http')) {\r\n\t\t\t\tif (src.startsWith('/')) {\r\n\t\t\t\t\tthis.data.src = location.origin + src;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar currPath = location.pathname;\r\n\t\t\t\t\tif (!currPath.endsWith('/')) {\r\n\t\t\t\t\t\tcurrPath = location.pathname.split('/').slice(0, -1).join('/') + '/';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.data.src = location.origin + currPath + src;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnativeComponentInit.call(this);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Stop the playing sound, and preserve position in clip.\r\n\t\t* @method native.n-sound#pauseSound\r\n\t\t*/\r\n\t\tpauseSound: function () {\r\n\t\t\tcallComponent.call(this, 'pause');\r\n\t\t\tthis.el.emit('sound-paused');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Start the sound playing.\r\n\t\t* @method native.n-sound#playSound\r\n\t\t*/\r\n\t\tplaySound: function () {\r\n\t\t\tcallComponent.call(this, 'play');\r\n\t\t\tthis.el.emit('sound-played');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Jump to a position in the clip.\r\n\t\t* @method native.n-sound#seek\r\n\t\t* @param {number} time - The time in milliseconds to jump to.\r\n\t\t*/\r\n\t\tseek: function (time) {\r\n\t\t\tcallComponent.call(this, 'seek', {time: time});\r\n\t\t},\r\n\t\tremove: function () {\r\n\t\t\tnativeComponentRemove.call(this);\r\n\t\t\tif (this.playHandler) {\r\n\t\t\t  this.el.removeEventListener(oldData.on, this.playHandler);\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdate: function (oldData) {\r\n\t\t\tnativeComponentUpdate.call(this, oldData);\r\n\t\t\tif (this.playHandler) {\r\n\t\t\t  this.el.removeEventListener(oldData.on, this.playHandler);\r\n\t\t\t}\r\n\t\t\tif (this.data.on) {\r\n\t\t\t  this.playHandler = this.playSound.bind(this);\r\n\t\t\t  this.el.addEventListener(this.data.on, this.playHandler);\r\n\t\t\t}\r\n\t\t},\r\n\t\tschema: {\r\n\t\t\ton: { type: 'string' },\r\n\t\t\tres: { type: 'string' },\r\n\t\t\tsrc: { type: 'string' },\r\n\t\t\tloop: { type: 'boolean' },\r\n\t\t\tvolume: { type: 'number', default: 1 },\r\n\t\t\tautoplay: { type: 'boolean' },\r\n\t\t\toneshot: { type: 'boolean' },\r\n\t\t\tspatialBlend: { type: 'float', default: 1 },\r\n\t\t\tpitch: { type: 'float', default: 1 },\r\n\t\t\tminDistance: { type: 'float', default: 1 },\r\n\t\t\tmaxDistance: { type: 'float', default: 12 },\r\n\t\t\trolloff: { type: 'string', default: 'logarithmic' },\r\n\t\t}\r\n\t});\r\n\r\n})();\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/native-components.js\n ** module id = 4\n ** module chunks = 0\n **/","// this file is just for good measure. didn't want native-components getting too cluttered.\r\n\r\n/**\r\n* This namespace describes strings that are valid inputs to the various native\r\n* components. Some components can only take certain types of resources, i.e.\r\n* {@link n.n-spawner} can only accept `interactables`.\r\n* @namespace resources\r\n* @example <a-entity n-object='res: architecture/ceiling-2w-2l'></a-entity>\r\n*/\r\n\r\n/**\r\n* Generic modular building pieces. All pieces are aligned to one corner, such that\r\n* the piece extends out toward -X and +Z.\r\n* @name architecture\r\n* @enum architecture\r\n* @memberof resources\r\n*\r\n* @prop architecture/ceiling-2w-2l\r\n* @prop architecture/ceiling-4w-4l\r\n* @prop architecture/ceiling-4w-4l\r\n* @prop architecture/ceiling-skylight-4w-4l\r\n* @prop architecture/ceiling-skylight-corner-2w-2l\r\n* @prop architecture/ceiling-skylight-edge-2w\r\n* @prop architecture/ceiling-skylight-edge-4w\r\n* @prop architecture/ceiling-skylight-filler-4w-4l-2\r\n* @prop architecture/ceiling-skylight-filler-4w-4l\r\n* @prop architecture/ceiling-slice-concave-2r\r\n* @prop architecture/ceiling-slice-concave-4r\r\n* @prop architecture/ceiling-slice-convex-2r\r\n* @prop architecture/ceiling-slice-convex-4r\r\n* @prop architecture/door-4w-4h\r\n* @prop architecture/floor-2w-2l\r\n* @prop architecture/floor-2w-4l\r\n* @prop architecture/floor-4w-2l\r\n* @prop architecture/floor-4w-4l\r\n* @prop architecture/floor-slice-concave-2r\r\n* @prop architecture/floor-slice-concave-4r\r\n* @prop architecture/floor-slice-convex-2r\r\n* @prop architecture/floor-slice-convex-4r\r\n* @prop architecture/railing-2l\r\n* @prop architecture/railing-4l\r\n* @prop architecture/railing-curve-concave-2r\r\n* @prop architecture/wall-2w-4h\r\n* @prop architecture/wall-4w-4h\r\n* @prop architecture/wall-base-2w\r\n* @prop architecture/wall-base-4w\r\n* @prop architecture/wall-base-curve-concave-2r\r\n* @prop architecture/wall-base-curve-concave-4r\r\n* @prop architecture/wall-base-curve-convex-2r\r\n* @prop architecture/wall-base-curve-convex-4r\r\n* @prop architecture/wall-bulkhead-2w\r\n* @prop architecture/wall-bulkhead-4w\r\n* @prop architecture/wall-bulkhead-curve-concave-2r\r\n* @prop architecture/wall-bulkhead-curve-concave-4r\r\n* @prop architecture/wall-bulkhead-curve-convex-2r\r\n* @prop architecture/wall-bulkhead-curve-convex-4r\r\n* @prop architecture/wall-curve-concave-2r-4h\r\n* @prop architecture/wall-curve-concave-4r-4h\r\n* @prop architecture/wall-curve-convex-2r-4h\r\n* @prop architecture/wall-curve-convex-4r-4h\r\n* @prop architecture/wall-curve-window-concave-4r-4h\r\n* @prop architecture/wall-curve-window-concave-filler-4r-4h\r\n* @prop architecture/wall-curve-window-gap-concave-4r-4h\r\n* @prop architecture/wall-curve-window-gap-end-l-concave-4r-4h\r\n* @prop architecture/wall-curve-window-gap-end-r-concave-4r-4h\r\n* @prop architecture/wall-filler-corner-inner-4h\r\n* @prop architecture/wall-filler-corner-outer-4h\r\n* @prop architecture/wall-window-4w-4h\r\n* @prop architecture/wall-window-filler-2\r\n* @prop architecture/wall-window-gap-2w-4h\r\n* @prop architecture/wall-window-gap-4w-4h\r\n* @prop architecture/wall-window-gap-end-l-2w-4h\r\n* @prop architecture/wall-window-gap-end-l-4w-4h\r\n* @prop architecture/wall-window-gap-end-r-2w-4h\r\n* @prop architecture/wall-window-gap-end-r-4w-4h\r\n*/\r\n\r\n/**\r\n* Particle systems and other native effects\r\n* @name effects\r\n* @enum effects\r\n* @memberof resources\r\n*\r\n* @prop effects/explosion - A particle system with a central flash, then debris flying outward.\r\n* This is a non-looping effect.\r\n* @prop effects/fire - An animated fire particle, suitable for a torch.\r\n* @prop effects/fire-trail - Fire that trails the entity through space as it moves. Only is visible while an object is in motion\r\n* @prop effects/fireworks - A compound particle system that shoots up from the entity,\r\n* explodes into colored sparks, then transitions to gold streamers.\r\n* @prop effects/smoke - Billowing smoke particle system.\r\n* @prop effects/sparkler - Emits sparks in all directions\r\n* @prop effects/steam - Small white steam rising upwards\r\n*/\r\n\r\n/**\r\n* Objects that can be picked up, thrown, and otherwise interacted with.\r\n* @name interactables\r\n* @enum interactables\r\n* @memberof resources\r\n*\r\n* @prop interactables/basketball\r\n* @prop interactables/bowlingball\r\n* @prop interactables/bowling-pin\r\n* @prop interactables/box\r\n* @prop interactables/coin\r\n* @prop interactables/gem\r\n* @prop interactables/ring\r\n* @prop interactables/soccerball\r\n*/\r\n\r\n/**\r\n* Static models that you can place in your scene.\r\n* @name objects\r\n* @enum objects\r\n* @memberof resources\r\n*\r\n* @prop objects/basketball-hoop\r\n* @prop objects/coin\r\n* @prop objects/cup\r\n* @prop objects/gem\r\n* @prop objects/hoop\r\n* @prop objects/ring\r\n* @prop objects/target-archery\r\n*/\r\n\r\n/**\r\n* A selection of pipes/chutes/etc.\r\n* @name pipes\r\n* @enum pipes\r\n* @memberof resources\r\n*\r\n* @prop pipes/pipe-full-cap-1d\r\n* @prop pipes/pipe-full-cross-1d\r\n* @prop pipes/pipe-full-elbow-1d\r\n* @prop pipes/pipe-full-fork-1d\r\n* @prop pipes/pipe-full-straight-1d-1l\r\n* @prop pipes/pipe-full-straight-1d-2l\r\n* @prop pipes/pipe-full-straight-1d-4l\r\n* @prop pipes/pipe-full-tee-1d\r\n* @prop pipes/pipe-half-cap-1d\r\n* @prop pipes/pipe-half-cross-1d\r\n* @prop pipes/pipe-half-elbow-1d\r\n* @prop pipes/pipe-half-fork-1d\r\n* @prop pipes/pipe-half-straight-1d-1l\r\n* @prop pipes/pipe-half-straight-1d-2l\r\n* @prop pipes/pipe-half-straight-1d-4l\r\n* @prop pipes/pipe-half-tee-1d\r\n*/\r\n\r\n/**\r\n* Common UI sounds can be used for a consistent UI experience.\r\n* @name sounds-ui\r\n* @enum sounds-ui\r\n* @memberof resources\r\n*\r\n* @prop ui/select\r\n* @prop ui/toggle\r\n* @prop ui/notify\r\n* @prop ui/error\r\n* @prop ui/complete\r\n* @prop ui/succeed\r\n* @prop ui/over\r\n* @prop ui/join\r\n* @prop ui/click\r\n*/\r\n\r\n/**\r\n* Foley sounds are real sounds designed for tangible, touchable objects as they are heard in the real world.\r\n* @name sounds-foley\r\n* @enum sounds-foley\r\n* @memberof resources\r\n*\r\n* @prop foley/metal-scrape\r\n* @prop foley/metal-clack\r\n* @prop foley/metal-rattle\r\n* @prop foley/coin-jingle\r\n* @prop foley/paper-shuffle\r\n* @prop foley/explode\r\n*/\r\n\r\n/**\r\n* Effect sounds for a variety of use cases.\r\n* @name sounds-effects\r\n* @enum sounds-effects\r\n* @memberof resources\r\n*\r\n* @prop effects/fanfare-succeed - The \"success!\" sound from Holograms Against Humanity.\r\n* @prop effects/fanfare-start - The \"Game has started!\" sound from HaH.\r\n* @prop effects/fanfare-fail\r\n* @prop effects/timer-10s - a 10 second timer that triggers a bell at exactly 10 seconds.\r\n* The bell lasts for 2 seconds. This allows for timer length changes.\r\n* @prop effects/gain-coin\r\n*/\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/native-resources.js\n ** module id = 5\n ** module chunks = 0\n **/","/**\r\n* Enables the synchronization of properties of entities. All property sync components\r\n* require both a {@link sync.sync-system} on `a-scene`, and a {@link sync.sync}\r\n* on the entity to be synced.\r\n* @name sync\r\n* @namespace sync\r\n* @example\r\n* <a-scene sync-system='app: example sync; author: altspacevr'>\r\n*   <a-entity sync='ownOn: cursordown' sync-color></a-entity>\r\n* </a-scene>\r\n*/\r\n\r\n\r\n\r\n/**\r\n* Enables the synchronization of properties of the entity. Must be used in\r\n* conjuction with the {@link sync.sync-system} component and a component for a\r\n* specific property (e.g. {@link sync.sync-transform}).\r\n* @memberof sync\r\n* @mixin sync\r\n* @prop {string} ownOn - The name of the event, or a list of events, that\r\n* will cause the local client to take ownership of this object. This field\r\n* cannot be updated after initialization.\r\n*/\r\nAFRAME.registerComponent('sync',\r\n{\r\n\tschema: {\r\n\t\tmode: { default: 'link' },\r\n\t\townOn: { type: 'string' } //cannot be changed after creation\r\n\t},\r\n\tinit: function () {\r\n\t\tvar scene = document.querySelector('a-scene');\r\n\t\tvar syncSys = scene.systems['sync-system'];\r\n\r\n\t\tvar ref;\r\n\t\tvar key;\r\n\t\tvar dataRef;\r\n\t\tvar ownerRef;\r\n\t\tvar ownerId;\r\n\t\tvar isMine = false;\r\n\r\n\t\tvar component = this;\r\n\r\n\t\tcomponent.isConnected = false;\r\n\r\n\t\tif(syncSys.isConnected) start(); else scene.addEventListener('connected', start);\r\n\r\n\r\n\t\tif(component.data.ownOn)\r\n\t\t{\r\n\t\t\tvar ownershipEvents = component.data.ownOn.split(/[ ,]+/);\r\n\t\t\tfor(var i = 0, max = ownershipEvents.length; i < max; i++){\r\n\t\t\t\tcomponent.el.addEventListener(ownershipEvents[i], function(){\r\n\t\t\t\t\tif(component.isConnected){\r\n\t\t\t\t\t\tcomponent.takeOwnership();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction start(){\r\n\t\t\t//Make sure someone always owns an object. If the owner leaves and we are the master client, we will take it.\r\n\t\t\t//This ensures, for example, that synced animations keep playing\r\n\t\t\tscene.addEventListener('clientleft', function(event){\r\n\t\t\t\tvar shouldTakeOwnership = (!ownerId || ownerId === event.detail.id) && syncSys.isMasterClient;\r\n\r\n\t\t\t\tif(shouldTakeOwnership) component.takeOwnership();\r\n\t\t\t});\r\n\r\n\t\t\tif (component.data.mode === 'link') {\r\n\t\t\t\tvar id = component.el.id;\r\n\t\t\t\tif (!id) {\r\n\t\t\t\t\tconsole.error('Entities cannot be synced using link mode without an id.');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log('syncSys: ' + syncSys);\r\n\t\t\t\tconsole.log('syncSys.sceneRef: ' + syncSys.sceneRef);\r\n\r\n\t\t\t\tlink(syncSys.sceneRef.child(id));\r\n\t\t\t\tsetupReceive();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('Unsupported sync mode: ' + component.data.mode);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tcomponent.isConnected = true;\r\n\t\t\tcomponent.el.emit('connected', null, false);\r\n\t\t}\r\n\r\n\t\tfunction link(entityRef) {\r\n\t\t\tref = entityRef;\r\n\t\t\tkey = ref.key();\r\n\t\t\tdataRef = ref.child('data');\r\n\t\t\tcomponent.dataRef = dataRef;\r\n\t\t\townerRef = ref.child('owner');\r\n\t\t}\r\n\r\n\t\tfunction setupReceive() {\r\n\r\n\t\t\t//if nobody has owned the object yet, we will.\r\n\t\t\townerRef.transaction(function (owner) {\r\n\t\t\t\tif (owner) return undefined;\r\n\r\n\t\t\t\townerRef.onDisconnect().set(null);\r\n\t\t\t\treturn syncSys.clientId;\r\n\t\t\t});\r\n\r\n\t\t\townerRef.on('value',\r\n\t\t\t\tfunction(snapshot) {\r\n\t\t\t\t\tvar newOwnerId = snapshot.val();\r\n\r\n\t\t\t\t\tvar gained = newOwnerId === syncSys.clientId && !isMine;\r\n\t\t\t\t\tif (gained) component.el.emit('ownershipgained', null, false);\r\n\r\n\r\n\t\t\t\t\t//note this also fires when we start up without ownership\r\n\t\t\t\t\tvar lost = newOwnerId !== syncSys.clientId && isMine;\r\n\t\t\t\t\tif (lost){\r\n\t\t\t\t\t\tcomponent.el.emit('ownershiplost', null, false);\r\n\r\n\t\t\t\t\t\t//we no longer have to clear our ownership when we disconnect\r\n\t\t\t\t\t\townerRef.onDisconnect().cancel();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\townerId = newOwnerId;\r\n\r\n\t\t\t\t\tisMine = newOwnerId === syncSys.clientId;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* Tell sync to start pushing local property values instead of updating\r\n\t\t* local from remote values.\r\n\t\t* @method sync.sync#takeOwnership\r\n\t\t*/\r\n\t\tcomponent.takeOwnership = function() {\r\n\t\t\townerRef.set(syncSys.clientId);\r\n\r\n\t\t\t//clear our ownership if we disconnect\r\n\t\t\t//this is needed if we are the last user in the room, but we expect people to join later\r\n\t\t\townerRef.onDisconnect().set(null);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* Indicates whether the sync ownership is yours.\r\n\t\t* @member sync.sync#isMine\r\n\t\t* @readonly\r\n\t\t*/\r\n\t\tObject.defineProperty(component, 'isMine', {\r\n\t\t\tget: function () {\r\n\t\t\t\treturn isMine;//TODO: Should this be state instead?\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sync.js\n ** module id = 6\n ** module chunks = 0\n **/","/**\r\n* Connect to a remote Firebase server, and facilitate synchronization. These\r\n* options correspond exactly with the configuration options for\r\n* [altspace.utilities.sync.connect]{@link http://altspacevr.github.io/AltspaceSDK/doc/module-altspace_utilities_sync.html#.connect}.\r\n* This component must be present on `a-scene` for any other sync components to work.\r\n* @memberof sync\r\n* @mixin sync-system\r\n* @prop {string} author - A unique identifier for you or your organization.\r\n* @prop {string} app - The name of the app.\r\n* @prop {string} refUrl - Override the base reference. Set this to use your own Firebase.\r\n* @prop {string} instance - Override the instance ID. Can also be overridden with\r\n* a URL parameter.\r\n*/\r\nAFRAME.registerSystem('sync-system',\r\n{\r\n\tschema: {\r\n\t\tauthor: { type: 'string', default: null },\r\n\t\tapp: { type: 'string', default: null },\r\n\t\tinstance: { type: 'string', default: null },\r\n\t\trefUrl: { type: 'string', default: null }\r\n\t},\r\n\tinit: function() {\r\n\t\tvar component = this;\r\n\r\n\t\tif(!this.data || !this.data.app){\r\n\t\t\tconsole.warn('The sync-system must be present on the scene and configured with required data.');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcomponent.isConnected = false;\r\n\t\tconsole.log(this.data);\r\n\t\taltspace.utilities.sync.connect({\r\n\t\t\tauthorId: this.data.author,\r\n\t\t\tappId: this.data.app,\r\n\t\t\tinstanceId: this.data.instance,\r\n\t\t\tbaseRefUrl: this.data.refUrl\r\n\t\t}).then(function(connection) {\r\n\t\t\tthis.connection = connection;\r\n\r\n\t\t\tthis.sceneRef = this.connection.instance.child('scene');\r\n\t\t\tthis.clientsRef = this.connection.instance.child('clients');\r\n\r\n\t\t\t// temporary way of having unique identifiers for each client\r\n\t\t\tthis.clientId = this.sceneEl.object3D.uuid;\r\n\t\t\tvar masterClientId;\r\n\t\t\tthis.clientsRef.on(\"value\", function (snapshot) {\r\n\t\t\t\tvar clientIds = snapshot.val();\r\n\r\n\t\t\t\tvar masterClientKey = Object.keys(clientIds)[0];\r\n\t\t\t\tmasterClientId = clientIds[masterClientKey];\r\n\t\t\t});\r\n\r\n\t\t\tthis.clientsRef.on('child_added', function(childSnapshot) {\r\n\t\t\t\tvar joinedClientId = childSnapshot.val();\r\n\t\t\t\t//let the master client flag get set first\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tcomponent.sceneEl.emit('clientjoined', {id: joinedClientId}, false);\r\n\t\t\t\t}, 0);\r\n\t\t\t});\r\n\r\n\t\t\tthis.clientsRef.on('child_removed', function(childSnapshot) {\r\n\t\t\t\tvar leftClientId = childSnapshot.val();\r\n\t\t\t\t//let the master client flag get set first\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tcomponent.sceneEl.emit('clientleft', {id: leftClientId}, false);\r\n\t\t\t\t}, 0);\r\n\t\t\t});\r\n\r\n\t\t\t// add our client ID to the list of connected clients,\r\n\t\t\t// but have it be automatically removed by firebase if we disconnect for any reason\r\n\t\t\tthis.clientsRef.push(this.clientId).onDisconnect().remove();\r\n\r\n\r\n\t\t\tthis.connection.instance.child('initialized').once('value', function (snapshot) {\r\n\t\t\t\tvar shouldInitialize = !snapshot.val();\r\n\t\t\t\tsnapshot.ref().set(true);\r\n\r\n\t\t\t\tcomponent.sceneEl.emit('connected', { shouldInitialize: shouldInitialize }, false);\r\n\t\t\t\tcomponent.isConnected = true;\r\n\t\t\t}.bind(this));\r\n\r\n\r\n\t\t\tObject.defineProperty(this, 'isMasterClient', {\r\n\t\t\t\tget: function () { return masterClientId === this.clientId; }.bind(this)\r\n\t\t\t});\r\n\t\t}.bind(this));\r\n\t}\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sync-system.js\n ** module id = 7\n ** module chunks = 0\n **/","//TODO: We need to figure out a way to recieve our first update without caring about ownership.\r\n// firstValue is probably not the right way to go, probably something about having sent yet. Need to change for both\r\n\r\n/**\r\n* Synchronize the position, rotation, and scale of this object with all clients.\r\n* Requires both a {@link sync.sync-system} component on the `a-scene`, and a\r\n* {@link sync.sync} component on the target entity.\r\n* @mixin sync-transform\r\n* @memberof sync\r\n*/\r\nAFRAME.registerComponent('sync-transform',\r\n{\r\n\tdependencies: ['sync'],\r\n\tschema: {\r\n\t},\r\n\tinit: function () {\r\n\t\tvar component = this;\r\n\t\tvar sync = component.el.components.sync;\r\n\t\tif(sync.isConnected) start(); else component.el.addEventListener('connected', start);\r\n\r\n\t\tfunction start(){\r\n\r\n\t\t\tvar positionRef = sync.dataRef.child('position');\r\n\t\t\tvar rotationRef = sync.dataRef.child('rotation');\r\n\t\t\tvar scaleRef = sync.dataRef.child('scale');\r\n\r\n\t\t\tcomponent.updateRate = 100;\r\n\r\n\t\t\tvar stoppedAnimations = [];\r\n\t\t\t//pause all animations on ownership loss\r\n\t\t\tcomponent.el.addEventListener('ownershiplost', function() {\r\n\t\t\t\tvar children = component.el.children;\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar tagName = children[i].tagName.toLowerCase();\r\n\t\t\t\t\tif (tagName === \"a-animation\") {\r\n\t\t\t\t\t\tstoppedAnimations.push(children[i]);\r\n\t\t\t\t\t\tchildren[i].stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcomponent.el.addEventListener('ownershipgained', function () {\r\n\t\t\t\tfor (var i = 0; i < stoppedAnimations.length; i++) {\r\n\t\t\t\t\tvar animation = stoppedAnimations[i];\r\n\t\t\t\t\tanimation.start();\r\n\t\t\t\t}\r\n\t\t\t\tstoppedAnimations = [];\r\n\t\t\t});\r\n\r\n\t\t\tfunction onTransform(snapshot, componentName) {\r\n\t\t\t\tif (sync.isMine) return;\r\n\r\n\t\t\t\tvar value = snapshot.val();\r\n\t\t\t\tif (!value) return;\r\n\r\n\t\t\t\tcomponent.el.setAttribute(componentName, value);\r\n\t\t\t}\r\n\r\n\t\t\tpositionRef.on('value', function (snapshot) {\r\n\t\t\t\tonTransform(snapshot, 'position');\r\n\t\t\t});\r\n\r\n\t\t\trotationRef.on('value', function (snapshot) {\r\n\t\t\t\tonTransform(snapshot, 'rotation');\r\n\t\t\t});\r\n\r\n\t\t\tscaleRef.on('value', function (snapshot) {\r\n\t\t\t\tonTransform(snapshot, 'scale');\r\n\t\t\t});\r\n\r\n\t\t\tvar sendPosition = throttle(function(value){\r\n\t\t\t\tpositionRef.set(value);\r\n\t\t\t}, component.updateRate);\r\n\r\n\t\t\tvar sendRotation = throttle(function(value){\r\n\t\t\t\trotationRef.set(value);\r\n\t\t\t}, component.updateRate);\r\n\r\n\t\t\tvar sendScale = throttle(function(value){\r\n\t\t\t\tscaleRef.set(value);\r\n\t\t\t}, component.updateRate);\r\n\r\n\t\t\tfunction onComponentChanged(event){\r\n\t\t\t\tif (!sync.isMine) return;\r\n\r\n\t\t\t\tvar name = event.detail.name;\r\n\t\t\t\tvar newData = event.detail.newData;\r\n\r\n\t\t\t\tif (name === 'position') {\r\n\t\t\t\t\tsendPosition(newData);\r\n\t\t\t\t} else if (name === 'rotation') {\r\n\t\t\t\t\tsendRotation(newData);\r\n\t\t\t\t} else if (name === 'scale') {\r\n\t\t\t\t\tsendScale(newData);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//from underscore.js\r\n\t\t\tfunction throttle(func, wait, options) {\r\n\t\t\t\tvar timeout, context, args, result;\r\n\t\t\t\tvar previous = 0;\r\n\t\t\t\tif (!options) options = {};\r\n\r\n\t\t\t\tvar later = function() {\r\n\t\t\t\t  previous = options.leading === false ? 0 : Date.now();\r\n\t\t\t\t  timeout = null;\r\n\t\t\t\t  result = func.apply(context, args);\r\n\t\t\t\t  if (!timeout) context = args = null;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar throttled = function() {\r\n\t\t\t\t  var now = Date.now();\r\n\t\t\t\t  if (!previous && options.leading === false) previous = now;\r\n\t\t\t\t  var remaining = wait - (now - previous);\r\n\t\t\t\t  context = this;\r\n\t\t\t\t  args = arguments;\r\n\t\t\t\t  if (remaining <= 0 || remaining > wait) {\r\n\t\t\t\t\tif (timeout) {\r\n\t\t\t\t\t  clearTimeout(timeout);\r\n\t\t\t\t\t  timeout = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprevious = now;\r\n\t\t\t\t\tresult = func.apply(context, args);\r\n\t\t\t\t\tif (!timeout) context = args = null;\r\n\t\t\t\t  } else if (!timeout && options.trailing !== false) {\r\n\t\t\t\t\ttimeout = setTimeout(later, remaining);\r\n\t\t\t\t  }\r\n\t\t\t\t  return result;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthrottled.cancel = function() {\r\n\t\t\t\t  clearTimeout(timeout);\r\n\t\t\t\t  previous = 0;\r\n\t\t\t\t  timeout = context = args = null;\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn throttled;\r\n\t\t\t  };\r\n\r\n\r\n\t\t\tcomponent.el.addEventListener('componentchanged', onComponentChanged);\r\n\t\t}\r\n\t}\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sync-transform.js\n ** module id = 8\n ** module chunks = 0\n **/","/**\r\n* Sync the color property of the object between clients.\r\n* Requires both a {@link sync.sync-system} component on the `a-scene`, and a\r\n* {@link sync.sync} component on the target entity.\r\n* @mixin sync-color\r\n* @memberof sync\r\n*/\r\nAFRAME.registerComponent('sync-color',\r\n{\r\n\tdependencies: ['sync'],\r\n\tschema: {\r\n\t},\r\n\tinit: function () {\r\n\t\tvar component = this;\r\n\t\tvar sync = component.el.components.sync;\r\n\t\tif(sync.isConnected) start(); else component.el.addEventListener('connected', start);\r\n\r\n\t\tfunction start(){\r\n\t\t\tvar colorRef = sync.dataRef.child('material/color');\r\n\r\n\t\t\tvar refChangedLocked = false;\r\n\r\n\t\t\tvar firstValue = true;\r\n\r\n\t\t\tcomponent.el.addEventListener('componentchanged', function (event) {\r\n\t\t\t\tvar name = event.detail.name;\r\n\t\t\t\tvar oldData = event.detail.oldData;\r\n\t\t\t\tvar newData = event.detail.newData;\r\n\r\n\t\t\t\tif (name !== 'material') return;\r\n\t\t\t\tif (refChangedLocked) return;\r\n\r\n\t\t\t\tif (oldData.color !== newData.color) {\r\n\t\t\t\t\tif(sync.isMine){\r\n\t\t\t\t\t\tsetTimeout(function() {//For some reason A-Frame has a misconfigured material reference if we do this too early\r\n\t\t\t\t\t\t\tcolorRef.set(newData.color);\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcolorRef.on('value', function (snapshot) {\r\n\t\t\t\tif (sync.isMine && !firstValue) return;\r\n\t\t\t\tvar color = snapshot.val();\r\n\r\n\t\t\t\trefChangedLocked = true;\r\n\t\t\t\tcomponent.el.setAttribute('material', 'color', color);\r\n\t\t\t\trefChangedLocked = false;\r\n\r\n\t\t\t\tfirstValue = false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sync-color.js\n ** module id = 9\n ** module chunks = 0\n **/","/**\r\n* Synchronize the playback state of an {@link n.n-sound} component between clients.\r\n* Requires both a {@link sync.sync-system} component on the `a-scene`, and a\r\n* {@link sync.sync} component on the target entity.\r\n* @mixin sync-n-sound\r\n* @memberof sync\r\n*/\r\nAFRAME.registerComponent('sync-n-sound',\r\n{\r\n\tdependencies: ['sync'],\r\n\tschema: { },\r\n\tinit: function () {\r\n\t\tvar component = this;\r\n\t\tvar sync = component.el.components.sync;\r\n\t\tvar scene = document.querySelector('a-scene');\r\n\t\tvar syncSys = scene.systems['sync-system'];\r\n\t\tif(sync.isConnected) start(); else component.el.addEventListener('connected', start);\r\n\r\n\t\tfunction start(){\r\n\t\t\tcomponent.soundStateRef = sync.dataRef.child('sound/state');\r\n\t\t\tcomponent.soundEventRef = sync.dataRef.child('sound/event');\r\n\r\n\t\t\tfunction sendEvent(event) {\r\n\t\t\t\tif (!sync.isMine) return;\r\n\t\t\t\tvar event = {\r\n\t\t\t\t\ttype: event.type,\r\n\t\t\t\t\tsender: syncSys.clientId,\r\n\t\t\t\t\tel: component.el.id,\r\n\t\t\t\t\ttime: Date.now()\r\n\t\t\t\t};\r\n\t\t\t\tcomponent.soundEventRef.set(event);\r\n\t\t\t}\r\n\r\n\t\t\tcomponent.el.addEventListener('sound-played', sendEvent);\r\n\t\t\tcomponent.el.addEventListener('sound-paused', sendEvent);\r\n\r\n\t\t\tcomponent.soundEventRef.on('value', function (snapshot) {\r\n\t\t\t\tif (sync.isMine) return;\r\n\t\t\t\tvar event = snapshot.val();\r\n\t\t\t\tif (!event) return;\r\n\t\t\t\tif (event.el === component.el.id) {\r\n\t\t\t\t\tvar sound = component.el.components['n-sound'];\r\n\t\t\t\t\tif (event.type === 'sound-played') {\r\n\t\t\t\t\t\tsound.playSound();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsound.pauseSound();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcomponent.el.addEventListener('componentchanged', function (event) {\r\n\t\t\t\tif (!sync.isMine) return;\r\n\t\t\t\tvar name = event.detail.name;\r\n\t\t\t\tif (name !== 'n-sound') return;\r\n\t\t\t\tcomponent.soundStateRef.set(event.detail.newData);\r\n\t\t\t});\r\n\r\n\t\t\tcomponent.soundStateRef.on('value', function (snapshot) {\r\n\t\t\t\tif (sync.isMine) return;\r\n\t\t\t\tvar state = snapshot.val();\r\n\t\t\t\tif (!state) return;\r\n\t\t\t\tcomponent.el.setAttribute('n-sound', state);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tremove: function () {\r\n\t\tthis.soundStateRef.off('value');\r\n\t\tthis.soundEventRef.off('value');\r\n\t}\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/sync-n-sound.js\n ** module id = 10\n ** module chunks = 0\n **/","/**\r\n * The wire component allows you to trigger an event on another entity when an event occurs on an entity\r\n * @mixin wire\r\n * @property {string} on Name of an event to listen to\r\n * @property {string} gained Name of a state to watch for\r\n * @property {string} lost Name of a state to watch for\r\n * @property {string} emit Name of an event to trigger on the targets\r\n * @property {string} gain Name of a state to add on the target\r\n * @property {string} lose Name of a state to remove on the target\r\n * @property {selector} targets A selector to pick which objects to wire to\r\n * @property {selector} target - A selector to pick a single object to wire to\r\n **/\r\nAFRAME.registerComponent('wire',\r\n{\r\n\tmultiple: true,\r\n\tschema: {\r\n\t\ton: {type: 'string'},\r\n\t\temit: {type: 'string'},\r\n\t\tgained: {type: 'string'},\r\n\t\tlost: {type: 'string'},\r\n\t\tgain: {type: 'string'},\r\n\t\tlose: {type: 'string'},\r\n\t\ttargets: {type: 'selectorAll'},\r\n\t\ttarget: {type: 'selector'}\r\n\t},\r\n\tupdate: function (oldData) {\r\n\t\tif (oldData.on) {\r\n\t\t\tthis.el.removeEventListener(oldData.on, this.actOnTargets);\r\n\t\t}\r\n\t\tif (oldData.gained) {\r\n\t\t\tthis.el.removeEventListener('stateadded', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\t\tif (oldData.lost) {\r\n\t\t\tthis.el.removeEventListener('stateremoved', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\r\n\t\tthis.actOnTargets = function () {\r\n\t\t\tfunction act(el) {\r\n\t\t\t\tif (this.data.emit) {\r\n\t\t\t\t\tel.emit(this.data.emit);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.data.gain) {\r\n\t\t\t\t\tel.addState(this.data.gain);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.data.lose) {\r\n\t\t\t\t\tel.removeState(this.data.lose);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.data.targets) this.data.targets.forEach(act.bind(this));\r\n\t\t\tif(this.data.target) act.call(this, this.data.target);\r\n\t\t}.bind(this);\r\n\r\n\t\tthis.actOnTargetsIfStateMatches = function (event) {\r\n\t\t\tvar state = event.detail.state;\r\n\t\t\tif (state === this.data.gained || state === this.data.lost) {\r\n\t\t\t\tthis.actOnTargets();\r\n\t\t\t}\r\n\t\t}.bind(this);\r\n\r\n\t\tif (this.data.on) {\r\n\t\t\tthis.el.addEventListener(this.data.on, this.actOnTargets);\r\n\t\t}\r\n\t\tif (this.data.gained) {\r\n\t\t\tthis.el.addEventListener('stateadded', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\t\tif (this.data.lost) {\r\n\t\t\tthis.el.addEventListener('stateremoved', this.actOnTargetsIfStateMatches);\r\n\t\t}\r\n\t},\r\n\tremove: function () {\r\n\t\tthis.el.removeEventListener(this.data.on, this.actOnTargets);\r\n\t\tthis.el.removeEventListener('stateadded', this.actOnTargetsIfStateMatches);\r\n\t\tthis.el.removeEventListener('stateremoved', this.actOnTargetsIfStateMatches);\r\n\t}\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/wire.js\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":""}