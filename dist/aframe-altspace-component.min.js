!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");n(3),n(1),n(2),n(4),n(5),n(10),n(8),n(9),n(6),n(7),n(11)},function(e,t){!function(){function e(e,t){e.userData.altspace={collider:{enabled:t}},e.traverse(function(e){e instanceof THREE.Mesh&&(e.userData.altspace={collider:{enabled:t}})})}AFRAME.registerComponent("altspace-cursor-collider",{schema:{enabled:{"default":!0}},init:function(){e(this.el.object3D,this.data.enabled),this.el.addEventListener("model-loaded",function(){e(this.el.object3D,this.data.enabled)}.bind(this))},update:function(){e(this.el.object3D,this.data.enabled)}})}()},function(e,t){AFRAME.registerComponent("altspace-tracked-controls",{init:function(){this.gamepadIndex=null,this.trackedControlsSystem=document.querySelector("a-scene").systems["tracked-controls"],this.systemGamepads=0,altspace.getGamepads()},tick:function(){if(this.trackedControlsSystem&&this.systemGamepads!==this.trackedControlsSystem.controllers.length&&window.altspace&&altspace.getGamepads&&altspace.getGamepads().length){var e=this.el.components;e["paint-controls"]&&(this.gamepadIndex="left"===e["paint-controls"].data.hand?2:1),null===this.gamepadIndex&&e["hand-controls"]&&(this.gamepadIndex="left"===e["hand-controls"].data?2:1),null===this.gamepadIndex&&e["vive-controls"]&&(this.gamepadIndex="left"===e["vive-controls"].data.hand?2:1),null===this.gamepadIndex&&e["tracked-controls"]&&(this.gamepadIndex=e["tracked-controls"].data.controller),this.el.setAttribute("tracked-controls","id",altspace.getGamepads()[this.gamepadIndex].id),this.el.setAttribute("tracked-controls","controller",0),this.systemGamepads=this.trackedControlsSystem.controllers.length}}})},function(e,t){AFRAME.registerComponent("altspace",{version:"1.3.2",schema:{usePixelScale:{type:"boolean","default":"false"},verticalAlign:{type:"string","default":"middle"},enclosuresOnly:{type:"boolean","default":"true"},fullspace:{type:"boolean","default":"false"}},init:function(){return this.el.object3D instanceof THREE.Scene?void(window.altspace&&window.altspace.inClient?(this.el.setAttribute("vr-mode-ui",{enabled:!1}),this.initRenderer(),this.initCursorEvents(),this.initCollisionEvents()):console.warn("aframe-altspace-component only works inside of AltspaceVR")):void console.warn("aframe-altspace-component can only be attached to a-scene")},tick:function(e,t){this.el.object3D.updateAllBehaviors&&this.el.object3D.updateAllBehaviors()},remove:function(){},pause:function(){},play:function(){},initRenderer:function(){var e=this.el.object3D;altspace.getEnclosure().then(function(n){switch(this.data.fullspace&&(n.requestFullspace(),n.addEventListener("fullspacechange",function(){e.scale.setScalar(n.pixelsPerMeter)})),this.data.usePixelScale&&!this.data.fullspace||e.scale.setScalar(n.pixelsPerMeter),this.data.verticalAlign){case"bottom":e.position.y-=n.innerHeight/2;break;case"top":e.position.y+=n.innerHeight/2;break;case"middle":break;default:console.warn("Unexpected value for verticalAlign: ",this.data.verticalAlign)}this.data.enclosuresOnly&&1===n.innerDepth&&(this.el.renderer.render(new THREE.Scene),this.el.renderer=this.el.effect=t)}.bind(this));var t=this.el.renderer,n=this.el.renderer=this.el.effect=altspace.getThreeJSRenderer({aframeComponentVersion:this.version}),i=function(){};n.setSize=i,n.setPixelRatio=i,n.setClearColor=i,n.clear=i,n.enableScissorTest=i,n.setScissor=i,n.setViewport=i,n.getPixelRatio=i,n.getMaxAnisotropy=i,n.setFaceCulling=i,n.context={canvas:{}},n.shadowMap={}},initCursorEvents:function(){var e=this.el.object3D,t=document.querySelector("a-cursor")||document.querySelector("a-entity[cursor]");t&&(t.setAttribute("material","transparent",!0),t.setAttribute("material","opacity",0));var n=function(e,n){var i=n.target.el;t&&t.emit(e,{target:i,ray:n.ray,point:n.point}),i&&i.emit(e,{target:i,ray:n.ray,point:n.point})},i=null;e.addEventListener("cursordown",function(e){i=e.target,n("mousedown",e)}),e.addEventListener("cursorup",function(e){n("mouseup",e),e.target.uuid===i.uuid&&n("click",e),i=null}),e.addEventListener("cursorenter",function(e){e.target.el&&(e.target.el.addState("hovered"),t&&t.addState("hovering"),n("mouseenter",e))}),e.addEventListener("cursorleave",function(e){e.target.el&&(e.target.el.removeState("hovered"),t&&t.removeState("hovering"),n("mouseleave",e))})},initCollisionEvents:function(){var e=this.el.object3D,t=function(e,t){var n=t.target.el;n&&(t.target=n,t.other&&t.other.el&&(t.other=t.other.el),n.emit(e,t))};e.addEventListener("collisionenter",function(e){t("collisionenter",e)}),e.addEventListener("collisionexit",function(e){t("collisionexit",e)}),e.addEventListener("triggerenter",function(e){t("triggerenter",e)}),e.addEventListener("triggerexit",function(e){t("triggerexit",e)})}})},function(e,t){!function(){function e(e){e.userData.altspace=e.userData.altspace||{},e.userData.altspace.collider=e.userData.altspace.collider||{},e.userData.altspace.collider.enabled=!1,altspace.addNativeComponent(e,this.name)}function t(){var t=this.el.getOrCreateObject3D("mesh",l);e.call(this,t),this.update(this.data)}function n(){var e=this.el.getObject3D("mesh");altspace.removeNativeComponent(e,this.name)}function i(e){altspace.updateNativeComponent(this.el.object3DMap.mesh,this.name,this.data)}function a(e,t){altspace.callNativeComponent(this.el.object3DMap.mesh,this.name,e,t)}if(!window.altspace||!altspace.inClient){var s=function(){};window.altspace={addNativeComponent:s,updateNativeComponent:s,removeNativeComponent:s}}var o=new THREE.BoxGeometry(.001,.001,.001),r=new THREE.MeshBasicMaterial({color:0});r.visible=!1;var l=function(){THREE.Mesh.call(this,o,r)};l.prototype=Object.create(THREE.Mesh.prototype),l.prototype.constructor=THREE.PlaceholderMesh,AFRAME.registerComponent("n-object",{schema:{res:{type:"string"}},init:t,update:i,remove:n}),AFRAME.registerComponent("n-spawner",{schema:{res:{type:"string"}},init:t,update:i,remove:n}),AFRAME.registerComponent("n-text",{init:t,update:i,remove:n,schema:{text:{"default":"",type:"string"},fontSize:{"default":"10",type:"int"},width:{"default":"10",type:"number"},height:{"default":"1",type:"number"},horizontalAlign:{"default":"middle"},verticalAlign:{"default":"middle"}}}),AFRAME.registerComponent("n-sphere-collider",{init:t,remove:n,update:i,schema:{isTrigger:{"default":!1,type:"boolean"},center:{type:"vec3"},radius:{"default":"0",type:"number"},type:{"default":"object"}}}),AFRAME.registerComponent("n-box-collider",{init:t,remove:n,update:i,schema:{isTrigger:{"default":!1,type:"boolean"},center:{type:"vec3"},size:{type:"vec3"},type:{"default":"object"}}}),AFRAME.registerComponent("n-capsule-collider",{init:t,remove:n,update:i,schema:{isTrigger:{"default":!1,type:"boolean"},center:{type:"vec3"},radius:{"default":"0",type:"number"},height:{"default":"0",type:"number"},direction:{"default":"y"},type:{"default":"object"}}}),AFRAME.registerComponent("n-mesh-collider",{_forEachMesh:function(e){var t=this.el.object3DMap.mesh;t&&(t instanceof THREE.Mesh&&e(t),t.traverse(function(t){t instanceof THREE.Mesh&&e(t)}.bind(this)))},_initObj:function(){this._forEachMesh(function(t){e.call(this,t),altspace.updateNativeComponent(t,this.name,this.data)}.bind(this))},init:function(){this.el.getOrCreateObject3D("mesh",l),this._initObj(),this.el.addEventListener("model-loaded",function(){this._initObj()}.bind(this))},remove:function(){this._forEachMesh(function(e){altspace.removeNativeComponent(e,this.name)}.bind(this))},update:function(e){this._forEachMesh(function(e){altspace.updateNativeComponent(e,this.name,this.data)}.bind(this))},schema:{isTrigger:{"default":!1,type:"boolean"},convex:{"default":!0,type:"boolean"},type:{"default":"object"}}}),AFRAME.registerComponent("n-billboard",{init:t,remove:n}),AFRAME.registerComponent("n-container",{init:function(){t.call(this);var e=this.el,n=this;e.addEventListener("stateadded",function(t){"container-full"===t.detail.state&&e.emit("container-full"),"container-empty"===t.detail.state&&e.emit("container-empty")}),e.addEventListener("container-count-changed",function(e){n.count=e.detail.count})},remove:n,update:i,schema:{capacity:{"default":4,type:"number"}}}),AFRAME.registerComponent("n-sound",{init:function(){var e=this.data.src;if(e&&!e.startsWith("http"))if(e.startsWith("/"))this.data.src=location.origin+e;else{var n=location.pathname;n.endsWith("/")||(n=location.pathname.split("/").slice(0,-1).join("/")+"/"),this.data.src=location.origin+n+e}t.call(this)},pauseSound:function(){a.call(this,"pause"),this.el.emit("sound-paused")},playSound:function(){a.call(this,"play"),this.el.emit("sound-played")},seek:function(e){a.call(this,"seek",{time:e})},remove:function(){n.call(this),this.playHandler&&this.el.removeEventListener(oldData.on,this.playHandler)},update:function(e){i.call(this,e),this.playHandler&&this.el.removeEventListener(e.on,this.playHandler),this.data.on&&(this.playHandler=this.playSound.bind(this),this.el.addEventListener(this.data.on,this.playHandler))},schema:{on:{type:"string"},res:{type:"string"},src:{type:"string"},loop:{type:"boolean"},volume:{type:"number","default":1},autoplay:{type:"boolean"},oneshot:{type:"boolean"},spatialBlend:{type:"float","default":1},pitch:{type:"float","default":1},minDistance:{type:"float","default":1},maxDistance:{type:"float","default":12},rolloff:{type:"string","default":"logarithmic"}}})}()},function(e,t){},function(e,t){AFRAME.registerComponent("sync-color",{dependencies:["sync"],schema:{},init:function(){function e(){var e=n.dataRef.child("material/color"),i=!1,a=!0;t.el.addEventListener("componentchanged",function(t){var a=t.detail.name,s=t.detail.oldData,o=t.detail.newData;"material"===a&&(i||s.color!==o.color&&n.isMine&&setTimeout(function(){e.set(o.color)},0))}),e.on("value",function(e){if(!n.isMine||a){var s=e.val();i=!0,t.el.setAttribute("material","color",s),i=!1,a=!1}})}var t=this,n=t.el.components.sync;n.isConnected?e():t.el.addEventListener("connected",e)}})},function(e,t){AFRAME.registerComponent("sync-n-sound",{dependencies:["sync"],schema:{},init:function(){function e(){function e(e){if(n.isMine){var e={type:e.type,sender:a.clientId,el:t.el.id,time:Date.now()};t.soundEventRef.set(e)}}t.soundStateRef=n.dataRef.child("sound/state"),t.soundEventRef=n.dataRef.child("sound/event"),t.el.addEventListener("sound-played",e),t.el.addEventListener("sound-paused",e),t.soundEventRef.on("value",function(e){if(!n.isMine){var i=e.val();if(i&&i.el===t.el.id){var a=t.el.components["n-sound"];"sound-played"===i.type?a.playSound():a.pauseSound()}}}),t.el.addEventListener("componentchanged",function(e){if(n.isMine){var i=e.detail.name;"n-sound"===i&&t.soundStateRef.set(e.detail.newData)}}),t.soundStateRef.on("value",function(e){if(!n.isMine){var i=e.val();i&&t.el.setAttribute("n-sound",i)}})}var t=this,n=t.el.components.sync,i=document.querySelector("a-scene"),a=i.systems["sync-system"];n.isConnected?e():t.el.addEventListener("connected",e)},remove:function(){this.soundStateRef.off("value"),this.soundEventRef.off("value")}})},function(e,t){AFRAME.registerSystem("sync-system",{schema:{author:{type:"string","default":null},app:{type:"string","default":null},instance:{type:"string","default":null},refUrl:{type:"string","default":null}},init:function(){var e=this;return this.data&&this.data.app?(e.isConnected=!1,console.log(this.data),void altspace.utilities.sync.connect({authorId:this.data.author,appId:this.data.app,instanceId:this.data.instance,baseRefUrl:this.data.refUrl}).then(function(t){this.connection=t,this.sceneRef=this.connection.instance.child("scene"),this.clientsRef=this.connection.instance.child("clients"),this.clientId=this.sceneEl.object3D.uuid;var n;this.clientsRef.on("value",function(e){var t=e.val(),i=Object.keys(t)[0];n=t[i]}),this.clientsRef.on("child_added",function(t){var n=t.val();setTimeout(function(){e.sceneEl.emit("clientjoined",{id:n},!1)},0)}),this.clientsRef.on("child_removed",function(t){var n=t.val();setTimeout(function(){e.sceneEl.emit("clientleft",{id:n},!1)},0)}),this.clientsRef.push(this.clientId).onDisconnect().remove(),this.connection.instance.child("initialized").once("value",function(t){var n=!t.val();t.ref().set(!0),e.sceneEl.emit("connected",{shouldInitialize:n},!1),e.isConnected=!0}.bind(this)),Object.defineProperty(this,"isMasterClient",{get:function(){return n===this.clientId}.bind(this)})}.bind(this))):void console.warn("The sync-system must be present on the scene and configured with required data.")}})},function(e,t){AFRAME.registerComponent("sync-transform",{dependencies:["sync"],schema:{},init:function(){function e(){function e(e,i){if(!n.isMine){var a=e.val();a&&t.el.setAttribute(i,a)}}function i(e){if(n.isMine){var t=e.detail.name,i=e.detail.newData;if("position"===t)c(i);else if("rotation"===t)d(i);else{if("scale"!==t)return;u(i)}}}function a(e,t,n){var i,a,s,o,r=0;n||(n={});var l=function(){r=n.leading===!1?0:Date.now(),i=null,o=e.apply(a,s),i||(a=s=null)},c=function(){var c=Date.now();r||n.leading!==!1||(r=c);var d=t-(c-r);return a=this,s=arguments,d<=0||d>t?(i&&(clearTimeout(i),i=null),r=c,o=e.apply(a,s),i||(a=s=null)):i||n.trailing===!1||(i=setTimeout(l,d)),o};return c.cancel=function(){clearTimeout(i),r=0,i=a=s=null},c}var s=n.dataRef.child("position"),o=n.dataRef.child("rotation"),r=n.dataRef.child("scale");t.updateRate=100;var l=[];t.el.addEventListener("ownershiplost",function(){for(var e=t.el.children,n=0;n<e.length;n++){var i=e[n].tagName.toLowerCase();"a-animation"===i&&(l.push(e[n]),e[n].stop())}}),t.el.addEventListener("ownershipgained",function(){for(var e=0;e<l.length;e++){var t=l[e];t.start()}l=[]}),s.on("value",function(t){e(t,"position")}),o.on("value",function(t){e(t,"rotation")}),r.on("value",function(t){e(t,"scale")});var c=a(function(e){s.set(e)},t.updateRate),d=a(function(e){o.set(e)},t.updateRate),u=a(function(e){r.set(e)},t.updateRate);t.el.addEventListener("componentchanged",i)}var t=this,n=t.el.components.sync;n.isConnected?e():t.el.addEventListener("connected",e)}})},function(e,t){AFRAME.registerComponent("sync",{schema:{mode:{"default":"link"},ownOn:{type:"string"}},init:function(){function e(){if(l.addEventListener("clientleft",function(e){var t=(!r||r===e.detail.id)&&c.isMasterClient;t&&u.takeOwnership()}),"link"!==u.data.mode)return void console.error("Unsupported sync mode: "+u.data.mode);var e=u.el.id;return e?(console.log("syncSys: "+c),console.log("syncSys.sceneRef: "+c.sceneRef),t(c.sceneRef.child(e)),n(),u.isConnected=!0,void u.el.emit("connected",null,!1)):void console.error("Entities cannot be synced using link mode without an id.")}function t(e){i=e,a=i.key(),s=i.child("data"),u.dataRef=s,o=i.child("owner")}function n(){o.transaction(function(e){if(!e)return o.onDisconnect().set(null),c.clientId}),o.on("value",function(e){var t=e.val(),n=t===c.clientId&&!d;n&&u.el.emit("ownershipgained",null,!1);var i=t!==c.clientId&&d;i&&(u.el.emit("ownershiplost",null,!1),o.onDisconnect().cancel()),r=t,d=t===c.clientId})}var i,a,s,o,r,l=document.querySelector("a-scene"),c=l.systems["sync-system"],d=!1,u=this;if(u.isConnected=!1,c.isConnected?e():l.addEventListener("connected",e),u.data.ownOn)for(var h=u.data.ownOn.split(/[ ,]+/),p=0,f=h.length;p<f;p++)u.el.addEventListener(h[p],function(){u.isConnected&&u.takeOwnership()});u.takeOwnership=function(){o.set(c.clientId),o.onDisconnect().set(null)},Object.defineProperty(u,"isMine",{get:function(){return d}})}})},function(e,t){AFRAME.registerComponent("wire",{multiple:!0,schema:{on:{type:"string"},emit:{type:"string"},gained:{type:"string"},lost:{type:"string"},gain:{type:"string"},lose:{type:"string"},targets:{type:"selectorAll"},target:{type:"selector"}},update:function(e){e.on&&this.el.removeEventListener(e.on,this.actOnTargets),e.gained&&this.el.removeEventListener("stateadded",this.actOnTargetsIfStateMatches),e.lost&&this.el.removeEventListener("stateremoved",this.actOnTargetsIfStateMatches),this.actOnTargets=function(){function e(e){this.data.emit&&e.emit(this.data.emit),this.data.gain&&e.addState(this.data.gain),this.data.lose&&e.removeState(this.data.lose)}this.data.targets&&this.data.targets.forEach(e.bind(this)),this.data.target&&e.call(this,this.data.target)}.bind(this),this.actOnTargetsIfStateMatches=function(e){var t=e.detail.state;t!==this.data.gained&&t!==this.data.lost||this.actOnTargets()}.bind(this),this.data.on&&this.el.addEventListener(this.data.on,this.actOnTargets),this.data.gained&&this.el.addEventListener("stateadded",this.actOnTargetsIfStateMatches),this.data.lost&&this.el.addEventListener("stateremoved",this.actOnTargetsIfStateMatches)},remove:function(){this.el.removeEventListener(this.data.on,this.actOnTargets),this.el.removeEventListener("stateadded",this.actOnTargetsIfStateMatches),this.el.removeEventListener("stateremoved",this.actOnTargetsIfStateMatches)}})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYWZyYW1lLWFsdHNwYWNlLWNvbXBvbmVudC5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDRjNWQ4ODdkNjVmOWRhOWVmODBkIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWx0c3BhY2UtY3Vyc29yLWNvbGxpZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9hbHRzcGFjZS10cmFja2VkLWNvbnRyb2xzLmpzIiwid2VicGFjazovLy8uL3NyYy9hbHRzcGFjZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbmF0aXZlLWNvbXBvbmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N5bmMtY29sb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N5bmMtbi1zb3VuZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3luYy1zeXN0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N5bmMtdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8uL3NyYy9zeW5jLmpzIiwid2VicGFjazovLy8uL3NyYy93aXJlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIkFGUkFNRSIsIkVycm9yIiwic2V0Q29sbGlkZXJGbGFnIiwib2JqIiwic3RhdGUiLCJ1c2VyRGF0YSIsImFsdHNwYWNlIiwiY29sbGlkZXIiLCJlbmFibGVkIiwidHJhdmVyc2UiLCJUSFJFRSIsIk1lc2giLCJyZWdpc3RlckNvbXBvbmVudCIsInNjaGVtYSIsImRlZmF1bHQiLCJpbml0IiwidGhpcyIsImVsIiwib2JqZWN0M0QiLCJkYXRhIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJ1cGRhdGUiLCJnYW1lcGFkSW5kZXgiLCJ0cmFja2VkQ29udHJvbHNTeXN0ZW0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzeXN0ZW1zIiwic3lzdGVtR2FtZXBhZHMiLCJnZXRHYW1lcGFkcyIsInRpY2siLCJjb250cm9sbGVycyIsImxlbmd0aCIsIndpbmRvdyIsImNvbXBvbmVudHMiLCJoYW5kIiwiY29udHJvbGxlciIsInNldEF0dHJpYnV0ZSIsInZlcnNpb24iLCJ1c2VQaXhlbFNjYWxlIiwidHlwZSIsInZlcnRpY2FsQWxpZ24iLCJlbmNsb3N1cmVzT25seSIsImZ1bGxzcGFjZSIsIlNjZW5lIiwiaW5DbGllbnQiLCJpbml0UmVuZGVyZXIiLCJpbml0Q3Vyc29yRXZlbnRzIiwiaW5pdENvbGxpc2lvbkV2ZW50cyIsImNvbnNvbGUiLCJ3YXJuIiwidCIsImR0IiwidXBkYXRlQWxsQmVoYXZpb3JzIiwicmVtb3ZlIiwicGF1c2UiLCJwbGF5Iiwic2NlbmUiLCJnZXRFbmNsb3N1cmUiLCJ0aGVuIiwiZSIsInJlcXVlc3RGdWxsc3BhY2UiLCJzY2FsZSIsInNldFNjYWxhciIsInBpeGVsc1Blck1ldGVyIiwicG9zaXRpb24iLCJ5IiwiaW5uZXJIZWlnaHQiLCJpbm5lckRlcHRoIiwicmVuZGVyZXIiLCJyZW5kZXIiLCJlZmZlY3QiLCJvbGRSZW5kZXJlciIsImdldFRocmVlSlNSZW5kZXJlciIsImFmcmFtZUNvbXBvbmVudFZlcnNpb24iLCJub29wIiwic2V0U2l6ZSIsInNldFBpeGVsUmF0aW8iLCJzZXRDbGVhckNvbG9yIiwiY2xlYXIiLCJlbmFibGVTY2lzc29yVGVzdCIsInNldFNjaXNzb3IiLCJzZXRWaWV3cG9ydCIsImdldFBpeGVsUmF0aW8iLCJnZXRNYXhBbmlzb3Ryb3B5Iiwic2V0RmFjZUN1bGxpbmciLCJjb250ZXh0IiwiY2FudmFzIiwic2hhZG93TWFwIiwiY3Vyc29yRWwiLCJlbWl0IiwiZXZlbnROYW1lIiwiZXZlbnQiLCJ0YXJnZXRFbCIsInRhcmdldCIsInJheSIsInBvaW50IiwiY3Vyc29yZG93bk9iaiIsInV1aWQiLCJhZGRTdGF0ZSIsInJlbW92ZVN0YXRlIiwib3RoZXIiLCJtZXNoSW5pdCIsIm1lc2giLCJhZGROYXRpdmVDb21wb25lbnQiLCJuYW1lIiwibmF0aXZlQ29tcG9uZW50SW5pdCIsImdldE9yQ3JlYXRlT2JqZWN0M0QiLCJQbGFjZWhvbGRlck1lc2giLCJuYXRpdmVDb21wb25lbnRSZW1vdmUiLCJnZXRPYmplY3QzRCIsInJlbW92ZU5hdGl2ZUNvbXBvbmVudCIsIm5hdGl2ZUNvbXBvbmVudFVwZGF0ZSIsIm9sZERhdGEiLCJ1cGRhdGVOYXRpdmVDb21wb25lbnQiLCJvYmplY3QzRE1hcCIsImNhbGxDb21wb25lbnQiLCJmdW5jdGlvbk5hbWUiLCJmdW5jdGlvbkFyZ3VtZW50cyIsImNhbGxOYXRpdmVDb21wb25lbnQiLCJwbGFjZWhvbGRlckdlb21ldHJ5IiwiQm94R2VvbWV0cnkiLCJwbGFjZWhvbGRlck1hdGVyaWFsIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJjb2xvciIsInZpc2libGUiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInJlcyIsInRleHQiLCJmb250U2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiaG9yaXpvbnRhbEFsaWduIiwiaXNUcmlnZ2VyIiwiY2VudGVyIiwicmFkaXVzIiwic2l6ZSIsImRpcmVjdGlvbiIsIl9mb3JFYWNoTWVzaCIsImZ1bmMiLCJjaGlsZE9iaiIsIl9pbml0T2JqIiwiY29udmV4IiwiY29tcG9uZW50IiwiZGV0YWlsIiwiY291bnQiLCJjYXBhY2l0eSIsInNyYyIsInN0YXJ0c1dpdGgiLCJsb2NhdGlvbiIsIm9yaWdpbiIsImN1cnJQYXRoIiwicGF0aG5hbWUiLCJlbmRzV2l0aCIsInNwbGl0Iiwic2xpY2UiLCJqb2luIiwicGF1c2VTb3VuZCIsInBsYXlTb3VuZCIsInNlZWsiLCJ0aW1lIiwicGxheUhhbmRsZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib24iLCJsb29wIiwidm9sdW1lIiwiYXV0b3BsYXkiLCJvbmVzaG90Iiwic3BhdGlhbEJsZW5kIiwicGl0Y2giLCJtaW5EaXN0YW5jZSIsIm1heERpc3RhbmNlIiwicm9sbG9mZiIsImRlcGVuZGVuY2llcyIsInN0YXJ0IiwiY29sb3JSZWYiLCJzeW5jIiwiZGF0YVJlZiIsImNoaWxkIiwicmVmQ2hhbmdlZExvY2tlZCIsImZpcnN0VmFsdWUiLCJuZXdEYXRhIiwiaXNNaW5lIiwic2V0VGltZW91dCIsInNldCIsInNuYXBzaG90IiwidmFsIiwiaXNDb25uZWN0ZWQiLCJzZW5kRXZlbnQiLCJzZW5kZXIiLCJzeW5jU3lzIiwiY2xpZW50SWQiLCJEYXRlIiwibm93Iiwic291bmRFdmVudFJlZiIsInNvdW5kU3RhdGVSZWYiLCJzb3VuZCIsIm9mZiIsInJlZ2lzdGVyU3lzdGVtIiwiYXV0aG9yIiwiYXBwIiwiaW5zdGFuY2UiLCJyZWZVcmwiLCJsb2ciLCJ1dGlsaXRpZXMiLCJjb25uZWN0IiwiYXV0aG9ySWQiLCJhcHBJZCIsImluc3RhbmNlSWQiLCJiYXNlUmVmVXJsIiwiY29ubmVjdGlvbiIsInNjZW5lUmVmIiwiY2xpZW50c1JlZiIsInNjZW5lRWwiLCJtYXN0ZXJDbGllbnRJZCIsImNsaWVudElkcyIsIm1hc3RlckNsaWVudEtleSIsImtleXMiLCJjaGlsZFNuYXBzaG90Iiwiam9pbmVkQ2xpZW50SWQiLCJsZWZ0Q2xpZW50SWQiLCJwdXNoIiwib25EaXNjb25uZWN0Iiwib25jZSIsInNob3VsZEluaXRpYWxpemUiLCJyZWYiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsIm9uVHJhbnNmb3JtIiwiY29tcG9uZW50TmFtZSIsInZhbHVlIiwib25Db21wb25lbnRDaGFuZ2VkIiwic2VuZFBvc2l0aW9uIiwic2VuZFJvdGF0aW9uIiwic2VuZFNjYWxlIiwidGhyb3R0bGUiLCJ3YWl0Iiwib3B0aW9ucyIsInRpbWVvdXQiLCJhcmdzIiwicmVzdWx0IiwicHJldmlvdXMiLCJsYXRlciIsImxlYWRpbmciLCJhcHBseSIsInRocm90dGxlZCIsInJlbWFpbmluZyIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsInRyYWlsaW5nIiwiY2FuY2VsIiwicG9zaXRpb25SZWYiLCJyb3RhdGlvblJlZiIsInNjYWxlUmVmIiwidXBkYXRlUmF0ZSIsInN0b3BwZWRBbmltYXRpb25zIiwiY2hpbGRyZW4iLCJpIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwic3RvcCIsImFuaW1hdGlvbiIsIm1vZGUiLCJvd25PbiIsInNob3VsZFRha2VPd25lcnNoaXAiLCJvd25lcklkIiwiaXNNYXN0ZXJDbGllbnQiLCJ0YWtlT3duZXJzaGlwIiwiZXJyb3IiLCJsaW5rIiwic2V0dXBSZWNlaXZlIiwiZW50aXR5UmVmIiwia2V5Iiwib3duZXJSZWYiLCJ0cmFuc2FjdGlvbiIsIm93bmVyIiwibmV3T3duZXJJZCIsImdhaW5lZCIsImxvc3QiLCJvd25lcnNoaXBFdmVudHMiLCJtYXgiLCJtdWx0aXBsZSIsImdhaW4iLCJsb3NlIiwidGFyZ2V0cyIsImFjdE9uVGFyZ2V0cyIsImFjdE9uVGFyZ2V0c0lmU3RhdGVNYXRjaGVzIiwiYWN0IiwiZm9yRWFjaCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsR0U1Q2hDLHNCQUFBVyxRQUNBLFNBQUFDLE9BQUEsK0RBR0FaLEdBQUEsR0FDQUEsRUFBQSxHQUNBQSxFQUFBLEdBQ0FBLEVBQUEsR0FDQUEsRUFBQSxHQUNBQSxFQUFBLElBQ0FBLEVBQUEsR0FDQUEsRUFBQSxH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ZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGlmICh0eXBlb2YgQUZSQU1FID09PSAndW5kZWZpbmVkJykge1xyXG5cdCAgdGhyb3cgbmV3IEVycm9yKCdDb21wb25lbnQgYXR0ZW1wdGVkIHRvIHJlZ2lzdGVyIGJlZm9yZSBBRlJBTUUgd2FzIGF2YWlsYWJsZS4nKTtcclxuXHR9XHJcblx0XHJcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xyXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTApO1xyXG5cdF9fd2VicGFja19yZXF1aXJlX18oOCk7XHJcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcclxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xyXG5cdF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XHJcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0KGZ1bmN0aW9uKCl7XHJcblx0XHJcblx0XHRmdW5jdGlvbiBzZXRDb2xsaWRlckZsYWcob2JqLCBzdGF0ZSkge1xyXG5cdFx0XHRvYmoudXNlckRhdGEuYWx0c3BhY2UgPSB7Y29sbGlkZXI6IHtlbmFibGVkOiBzdGF0ZX19O1xyXG5cdFx0XHRvYmoudHJhdmVyc2UoZnVuY3Rpb24gKG9iaikge1xyXG5cdFx0XHRcdGlmIChvYmogaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XHJcblx0XHRcdFx0XHRvYmoudXNlckRhdGEuYWx0c3BhY2UgPSB7Y29sbGlkZXI6IHtlbmFibGVkOiBzdGF0ZX19O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHRcclxuXHRcdC8qKlxyXG5cdFx0KiBFbmFibGUgb3IgZGlzYWJsZSBjdXJzb3IgY29sbGlzaW9uIG9uIHRoZSBvYmplY3QuXHJcblx0XHQqIEBtaXhpbiBhbHRzcGFjZS1jdXJzb3ItY29sbGlkZXJcclxuXHRcdCogQG1lbWJlcm9mIGFsdHNwYWNlXHJcblx0XHQqIEBwcm9wIHtib29sZWFufSBlbmFibGVkPXRydWUgLSBUaGUgc3RhdGUgb2YgdGhlIGN1cnNvciBjb2xsaWRlci5cclxuXHRcdCovXHJcblx0XHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FsdHNwYWNlLWN1cnNvci1jb2xsaWRlcicsIHtcclxuXHRcdFx0c2NoZW1hOiB7IGVuYWJsZWQ6IHsgZGVmYXVsdDogdHJ1ZSB9IH0sXHJcblx0XHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRzZXRDb2xsaWRlckZsYWcodGhpcy5lbC5vYmplY3QzRCwgdGhpcy5kYXRhLmVuYWJsZWQpO1xyXG5cdFx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kZWwtbG9hZGVkJywgKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRzZXRDb2xsaWRlckZsYWcodGhpcy5lbC5vYmplY3QzRCwgdGhpcy5kYXRhLmVuYWJsZWQpO1xyXG5cdFx0XHRcdH0pLmJpbmQodGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRzZXRDb2xsaWRlckZsYWcodGhpcy5lbC5vYmplY3QzRCwgdGhpcy5kYXRhLmVuYWJsZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcclxuXHR9KSgpO1xyXG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxyXG5cdCogRW5hYmxlcyB0cmFja2VkIGNvbnRyb2wgc3VwcG9ydCBmb3IgQS1GcmFtZSBhcHBsaWNhdGlvbnMgdGhhdCB1c2UgdGhlIGJ1aWx0LWluXHJcblx0KiBgdHJhY2tlZC1jb250cm9sc2AsIGB2aXZlLWNvbnRyb2xzYCBvciBgaGFuZC1jb250cm9sc2AgY29tcG9uZW50cy5cclxuXHQqIEBtaXhpbiBhbHRzcGFjZS10cmFja2VkLWNvbnRyb2xzXHJcblx0KiBAbWVtYmVyb2YgYWx0c3BhY2VcclxuXHQqL1xyXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnYWx0c3BhY2UtdHJhY2tlZC1jb250cm9scycsIHtcclxuXHQgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHRoaXMuZ2FtZXBhZEluZGV4ID0gbnVsbDtcclxuXHRcdHRoaXMudHJhY2tlZENvbnRyb2xzU3lzdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYS1zY2VuZScpLnN5c3RlbXNbJ3RyYWNrZWQtY29udHJvbHMnXTtcclxuXHRcdHRoaXMuc3lzdGVtR2FtZXBhZHMgPSAwO1xyXG5cdFx0YWx0c3BhY2UuZ2V0R2FtZXBhZHMoKTtcclxuXHQgIH0sXHJcblx0ICB0aWNrOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQgIGlmIChcclxuXHRcdFx0dGhpcy50cmFja2VkQ29udHJvbHNTeXN0ZW0gJiZcclxuXHRcdFx0dGhpcy5zeXN0ZW1HYW1lcGFkcyAhPT0gdGhpcy50cmFja2VkQ29udHJvbHNTeXN0ZW0uY29udHJvbGxlcnMubGVuZ3RoICYmXHJcblx0XHRcdHdpbmRvdy5hbHRzcGFjZSAmJiBhbHRzcGFjZS5nZXRHYW1lcGFkcyAmJiBhbHRzcGFjZS5nZXRHYW1lcGFkcygpLmxlbmd0aFxyXG5cdFx0ICApIHtcclxuXHRcdFx0dmFyIGNvbXBvbmVudHMgPSB0aGlzLmVsLmNvbXBvbmVudHM7XHJcblx0XHRcdGlmIChjb21wb25lbnRzWydwYWludC1jb250cm9scyddKSB7XHJcblx0XHRcdCAgdGhpcy5nYW1lcGFkSW5kZXggPSBjb21wb25lbnRzWydwYWludC1jb250cm9scyddLmRhdGEuaGFuZCA9PT0gJ2xlZnQnID8gMiA6IDE7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuZ2FtZXBhZEluZGV4ID09PSBudWxsICYmIGNvbXBvbmVudHNbJ2hhbmQtY29udHJvbHMnXSkge1xyXG5cdFx0XHQgIHRoaXMuZ2FtZXBhZEluZGV4ID0gY29tcG9uZW50c1snaGFuZC1jb250cm9scyddLmRhdGEgPT09ICdsZWZ0JyA/IDIgOiAxO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLmdhbWVwYWRJbmRleCA9PT0gbnVsbCAmJiBjb21wb25lbnRzWyd2aXZlLWNvbnRyb2xzJ10pIHtcclxuXHRcdFx0ICB0aGlzLmdhbWVwYWRJbmRleCA9IGNvbXBvbmVudHNbJ3ZpdmUtY29udHJvbHMnXS5kYXRhLmhhbmQgPT09ICdsZWZ0JyA/IDIgOiAxO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLmdhbWVwYWRJbmRleCA9PT0gbnVsbCAmJiBjb21wb25lbnRzWyd0cmFja2VkLWNvbnRyb2xzJ10pIHtcclxuXHRcdFx0ICB0aGlzLmdhbWVwYWRJbmRleCA9IGNvbXBvbmVudHNbJ3RyYWNrZWQtY29udHJvbHMnXS5kYXRhLmNvbnRyb2xsZXI7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ3RyYWNrZWQtY29udHJvbHMnLCAnaWQnLCBhbHRzcGFjZS5nZXRHYW1lcGFkcygpW3RoaXMuZ2FtZXBhZEluZGV4XS5pZCk7XHJcblx0XHRcdHRoaXMuZWwuc2V0QXR0cmlidXRlKCd0cmFja2VkLWNvbnRyb2xzJywgJ2NvbnRyb2xsZXInLCAwKTtcclxuXHRcdFx0dGhpcy5zeXN0ZW1HYW1lcGFkcyA9IHRoaXMudHJhY2tlZENvbnRyb2xzU3lzdGVtLmNvbnRyb2xsZXJzLmxlbmd0aDtcclxuXHRcdCAgfVxyXG5cdCAgfVxyXG5cdH0pO1xyXG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxyXG5cdCogQG5hbWVzcGFjZSBhbHRzcGFjZVxyXG5cdCovXHJcblx0XHJcblx0LyoqXHJcblx0KiBUaGUgYWx0c3BhY2UgY29tcG9uZW50IG1ha2VzIEEtRnJhbWUgYXBwcyBjb21wYXRpYmxlIHdpdGggQWx0c3BhY2VWUi5cclxuXHQqXHJcblx0KiAqKk5vdGUqKjogSWYgeW91IHVzZSB0aGUgYGVtYmVkZGVkYCBBLUZyYW1lIGNvbXBvbmVudCBvbiB5b3VyIHNjZW5lLCB5b3UgbXVzdCBpbmNsdWRlIGl0ICpiZWZvcmUqIHRoZSBgYWx0c3BhY2VgIGNvbXBvbmVudCwgb3IgeW91ciBhcHAgd2lsbCBzaWxlbnRseSBmYWlsLlxyXG5cdCogQG1peGluIGFsdHNwYWNlXHJcblx0KiBAbWVtYmVyb2YgYWx0c3BhY2VcclxuXHQqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdXNlUGl4ZWxTY2FsZT1gZmFsc2VgIC0gQWxsb3dzIHlvdSB0byB1c2UgQS1GcmFtZSB1bml0cyBhcyBDU1MgcGl4ZWxzLlxyXG5cdCogVGhpcyBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvciBmb3IgdGhyZWUuanMgYXBwcywgYnV0IG5vdCBmb3IgQS1GcmFtZSBhcHBzLlxyXG5cdCogQHByb3BlcnR5IHtzdHJpbmd9IHZlcnRpY2FsQWxpZ249YG1pZGRsZWAgLSBQdXRzIHRoZSBvcmlnaW4gYXQgdGhlIGBib3R0b21gLCBgbWlkZGxlYCAoZGVmYXVsdCksXHJcblx0KiBvciBgdG9wYCBvZiB0aGUgQWx0c3BhY2UgZW5jbG9zdXJlLlxyXG5cdCogQHByb3BlcnR5IHtib29sZWFufSBlbmNsb3N1cmVzT25seT1gdHJ1ZWAgLSBQcmV2ZW50cyB0aGUgc2NlbmUgZnJvbSBiZWluZyBjcmVhdGVkIGlmXHJcblx0KiBlbmNsb3N1cmUgaXMgZmxhdC5cclxuXHQqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZnVsbHNwYWNlPWBmYWxzZWAgLSBQdXRzIHRoZSBhcHAgaW50byBmdWxsc3BhY2UgbW9kZS5cclxuXHQqXHJcblx0KiBAZXhhbXBsZVxyXG5cdCogPGhlYWQ+XHJcblx0KiAgIDx0aXRsZT5NeSBBLUZyYW1lIFNjZW5lPC90aXRsZT5cclxuXHQqICAgPHNjcmlwdCBzcmM9XCJodHRwczovL2FmcmFtZS5pby9yZWxlYXNlcy8wLjMuMC9hZnJhbWUubWluLmpzXCI+PC9zY3JpcHQ+XHJcblx0KiAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4ucmF3Z2l0LmNvbS9BbHRzcGFjZVZSL2FmcmFtZS1hbHRzcGFjZS1jb21wb25lbnQvdkFGUkFNRV9BTFRTUEFDRV9WRVJTSU9OL2Rpc3QvYWZyYW1lLWFsdHNwYWNlLWNvbXBvbmVudC5taW4uanNcIj48L3NjcmlwdD5cclxuXHQqIDwvaGVhZD5cclxuXHQqIDxib2R5PlxyXG5cdCogICA8YS1zY2VuZSBhbHRzcGFjZT5cclxuXHQqICAgICA8YS1lbnRpdHkgZ2VvbWV0cnk9XCJwcmltaXRpdmU6IGJveFwiIG1hdGVyaWFsPVwiY29sb3I6ICNDMDM1NDZcIj48L2EtZW50aXR5PlxyXG5cdCogICA8L2Etc2NlbmU+XHJcblx0KiA8L2JvZHk+XHJcblx0Ki9cclxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FsdHNwYWNlJywge1xyXG5cdCAgdmVyc2lvbjogJ0FGUkFNRV9BTFRTUEFDRV9WRVJTSU9OJyxcclxuXHQgIHNjaGVtYToge1xyXG5cdFx0dXNlUGl4ZWxTY2FsZTogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6ICdmYWxzZSd9LFxyXG5cdFx0dmVydGljYWxBbGlnbjogeyB0eXBlOiAnc3RyaW5nJywgIGRlZmF1bHQ6ICdtaWRkbGUnfSxcclxuXHRcdGVuY2xvc3VyZXNPbmx5OnsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiAndHJ1ZSd9LFxyXG5cdFx0ZnVsbHNwYWNlOiAgICAgeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6ICdmYWxzZSd9XHJcblx0ICB9LFxyXG5cdFxyXG5cdCAgLypcclxuXHQgICAqIENhbGxlZCBvbmNlIHdoZW4gY29tcG9uZW50IGlzIGF0dGFjaGVkLiBHZW5lcmFsbHkgZm9yIGluaXRpYWwgc2V0dXAuXHJcblx0ICAgKi9cclxuXHQgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICghKHRoaXMuZWwub2JqZWN0M0QgaW5zdGFuY2VvZiBUSFJFRS5TY2VuZSkpIHtcclxuXHRcdCAgY29uc29sZS53YXJuKCdhZnJhbWUtYWx0c3BhY2UtY29tcG9uZW50IGNhbiBvbmx5IGJlIGF0dGFjaGVkIHRvIGEtc2NlbmUnKTtcclxuXHRcdCAgcmV0dXJuO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0aWYgKHdpbmRvdy5hbHRzcGFjZSAmJiB3aW5kb3cuYWx0c3BhY2UuaW5DbGllbnQpIHtcclxuXHRcdCAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ3ZyLW1vZGUtdWknLCB7ZW5hYmxlZDogZmFsc2V9KTtcclxuXHRcdCAgdGhpcy5pbml0UmVuZGVyZXIoKTtcclxuXHRcdCAgdGhpcy5pbml0Q3Vyc29yRXZlbnRzKCk7XHJcblx0XHQgIHRoaXMuaW5pdENvbGxpc2lvbkV2ZW50cygpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdCAgY29uc29sZS53YXJuKCdhZnJhbWUtYWx0c3BhY2UtY29tcG9uZW50IG9ubHkgd29ya3MgaW5zaWRlIG9mIEFsdHNwYWNlVlInKTtcclxuXHRcdH1cclxuXHRcclxuXHQgIH0sXHJcblx0XHJcblx0ICAvKlxyXG5cdCAgICogQ2FsbGVkIG9uIGV2ZXJ5IHNpbmdsZSB0aWNrIG9yIHJlbmRlciBsb29wIG9mIHRoZSBzY2VuZS5cclxuXHQgICAqL1xyXG5cdCAgdGljazogZnVuY3Rpb24gKHQsIGR0KSB7XHJcblx0ICAgICAgaWYodGhpcy5lbC5vYmplY3QzRC51cGRhdGVBbGxCZWhhdmlvcnMpXHJcblx0ICAgICAgICB0aGlzLmVsLm9iamVjdDNELnVwZGF0ZUFsbEJlaGF2aW9ycygpO1xyXG5cdCAgfSxcclxuXHRcclxuXHQgIC8qXHJcblx0ICAgKiBDYWxsZWQgd2hlbiBhIGNvbXBvbmVudCBpcyByZW1vdmVkIChlLmcuLCB2aWEgcmVtb3ZlQXR0cmlidXRlKS5cclxuXHQgICAqIEdlbmVyYWxseSB1bmRvZXMgYWxsIG1vZGlmaWNhdGlvbnMgdG8gdGhlIGVudGl0eS5cclxuXHQgICAqL1xyXG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7IH0sXHJcblx0XHJcblx0ICAvKlxyXG5cdCAgICogQ2FsbGVkIG9uIGVhY2ggc2NlbmUgdGljay5cclxuXHQgICAqL1xyXG5cdCAgLy8gdGljazogZnVuY3Rpb24gKHQpIHsgfSxcclxuXHRcclxuXHQgIC8qXHJcblx0ICAgKiBDYWxsZWQgd2hlbiBlbnRpdHkgcGF1c2VzLlxyXG5cdCAgICogVXNlIHRvIHN0b3Agb3IgcmVtb3ZlIGFueSBkeW5hbWljIG9yIGJhY2tncm91bmQgYmVoYXZpb3Igc3VjaCBhcyBldmVudHMuXHJcblx0ICAgKi9cclxuXHQgIHBhdXNlOiBmdW5jdGlvbiAoKSB7IH0sXHJcblx0XHJcblx0ICAvKlxyXG5cdCAgICogQ2FsbGVkIHdoZW4gZW50aXR5IHJlc3VtZXMuXHJcblx0ICAgKiBVc2UgdG8gY29udGludWUgb3IgYWRkIGFueSBkeW5hbWljIG9yIGJhY2tncm91bmQgYmVoYXZpb3Igc3VjaCBhcyBldmVudHMuXHJcblx0ICAgKi9cclxuXHQgIHBsYXk6IGZ1bmN0aW9uICgpIHsgfSxcclxuXHRcclxuXHRcclxuXHQgIC8qKioqKioqKioqIEhlbHBlciBNZXRob2RzICoqKioqKioqKiovXHJcblx0XHJcblx0ICAvKlxyXG5cdCAgICogU3dhcCBpbiBBbHRzcGFjZSByZW5kZXJlciB3aGVuIHJ1bm5pbmcgaW4gQWx0c3BhY2VWUi5cclxuXHQgICAqL1xyXG5cdCAgaW5pdFJlbmRlcmVyOiBmdW5jdGlvbiAoKSB7XHJcblx0XHJcblx0XHR2YXIgc2NlbmUgPSB0aGlzLmVsLm9iamVjdDNEO1xyXG5cdFx0YWx0c3BhY2UuZ2V0RW5jbG9zdXJlKCkudGhlbihmdW5jdGlvbihlKVxyXG5cdFx0e1xyXG5cdFx0XHRpZih0aGlzLmRhdGEuZnVsbHNwYWNlKXtcclxuXHRcdFx0XHRlLnJlcXVlc3RGdWxsc3BhY2UoKTtcclxuXHRcdFx0XHRlLmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzcGFjZWNoYW5nZScsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRzY2VuZS5zY2FsZS5zZXRTY2FsYXIoZS5waXhlbHNQZXJNZXRlcik7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcclxuXHRcdFx0aWYgKCF0aGlzLmRhdGEudXNlUGl4ZWxTY2FsZSB8fCB0aGlzLmRhdGEuZnVsbHNwYWNlKXtcclxuXHRcdFx0XHRzY2VuZS5zY2FsZS5zZXRTY2FsYXIoZS5waXhlbHNQZXJNZXRlcik7XHJcblx0XHRcdH1cclxuXHRcclxuXHRcdCAgc3dpdGNoICh0aGlzLmRhdGEudmVydGljYWxBbGlnbikge1xyXG5cdFx0XHRjYXNlICdib3R0b20nOlxyXG5cdFx0XHQgIHNjZW5lLnBvc2l0aW9uLnkgLT0gZS5pbm5lckhlaWdodCAvIDI7XHJcblx0XHRcdCAgYnJlYWs7XHJcblx0XHRcdGNhc2UgJ3RvcCc6XHJcblx0XHRcdCAgc2NlbmUucG9zaXRpb24ueSArPSBlLmlubmVySGVpZ2h0IC8gMjtcclxuXHRcdFx0ICBicmVhaztcclxuXHRcdFx0Y2FzZSAnbWlkZGxlJzpcclxuXHRcdFx0ICBicmVhaztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0ICBjb25zb2xlLndhcm4oJ1VuZXhwZWN0ZWQgdmFsdWUgZm9yIHZlcnRpY2FsQWxpZ246ICcsIHRoaXMuZGF0YS52ZXJ0aWNhbEFsaWduKTtcclxuXHRcdCAgfVxyXG5cdFxyXG5cdFx0ICBpZih0aGlzLmRhdGEuZW5jbG9zdXJlc09ubHkgJiYgZS5pbm5lckRlcHRoID09PSAxKXtcclxuXHRcdFx0dGhpcy5lbC5yZW5kZXJlci5yZW5kZXIobmV3IFRIUkVFLlNjZW5lKCkpO1xyXG5cdFx0XHR0aGlzLmVsLnJlbmRlcmVyID0gdGhpcy5lbC5lZmZlY3QgPSBvbGRSZW5kZXJlcjtcclxuXHRcclxuXHRcdCAgfVxyXG5cdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcclxuXHRcdHZhciBvbGRSZW5kZXJlciA9IHRoaXMuZWwucmVuZGVyZXI7XHJcblx0XHR2YXIgcmVuZGVyZXIgPSB0aGlzLmVsLnJlbmRlcmVyID0gdGhpcy5lbC5lZmZlY3QgPSBhbHRzcGFjZS5nZXRUaHJlZUpTUmVuZGVyZXIoe1xyXG5cdFx0ICBhZnJhbWVDb21wb25lbnRWZXJzaW9uOiB0aGlzLnZlcnNpb25cclxuXHRcdH0pO1xyXG5cdFx0dmFyIG5vb3AgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0cmVuZGVyZXIuc2V0U2l6ZSA9IG5vb3A7XHJcblx0XHRyZW5kZXJlci5zZXRQaXhlbFJhdGlvID0gbm9vcDtcclxuXHRcdHJlbmRlcmVyLnNldENsZWFyQ29sb3IgPSBub29wO1xyXG5cdFx0cmVuZGVyZXIuY2xlYXIgPSBub29wO1xyXG5cdFx0cmVuZGVyZXIuZW5hYmxlU2Npc3NvclRlc3QgPSBub29wO1xyXG5cdFx0cmVuZGVyZXIuc2V0U2Npc3NvciA9IG5vb3A7XHJcblx0XHRyZW5kZXJlci5zZXRWaWV3cG9ydCA9IG5vb3A7XHJcblx0XHRyZW5kZXJlci5nZXRQaXhlbFJhdGlvID0gbm9vcDtcclxuXHRcdHJlbmRlcmVyLmdldE1heEFuaXNvdHJvcHkgPSBub29wO1xyXG5cdFx0cmVuZGVyZXIuc2V0RmFjZUN1bGxpbmcgPSBub29wO1xyXG5cdFx0cmVuZGVyZXIuY29udGV4dCA9IHtjYW52YXM6IHt9fTtcclxuXHRcdHJlbmRlcmVyLnNoYWRvd01hcCA9IHt9O1xyXG5cdFxyXG5cdCAgfSxcclxuXHRcclxuXHQgIC8qXHJcblx0ICAgKiBFbXVsYXRlIEEtRnJhbWUgY3Vyc29yIGV2ZW50cyB3aGVuIHJ1bm5pbmcgaW4gYWx0c3BhY2VWUi5cclxuXHQgICAqL1xyXG5cdCAgaW5pdEN1cnNvckV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHJcblx0XHR2YXIgc2NlbmUgPSB0aGlzLmVsLm9iamVjdDNEO1xyXG5cdFx0dmFyIGN1cnNvckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYS1jdXJzb3InKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhLWVudGl0eVtjdXJzb3JdJyk7XHJcblx0XHRpZiAoY3Vyc29yRWwpIHtcclxuXHRcdCAgLy8gSGlkZSBBLUZyYW1lIGN1cnNvciBtZXNoLlxyXG5cdFx0ICBjdXJzb3JFbC5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgJ3RyYW5zcGFyZW50JywgdHJ1ZSk7XHJcblx0XHQgIGN1cnNvckVsLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAnb3BhY2l0eScsIDAuMCk7XHJcblx0XHR9XHJcblx0XHJcblx0XHR2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50KSB7XHJcblx0XHRcdC8vIEZpcmUgZXZlbnRzIG9uIGludGVyc2VjdGVkIG9iamVjdCBhbmQgQS1GcmFtZSBjdXJzb3IuXHJcblx0XHRcdHZhciB0YXJnZXRFbCA9IGV2ZW50LnRhcmdldC5lbDtcclxuXHRcdFx0aWYgKGN1cnNvckVsKSBjdXJzb3JFbC5lbWl0KGV2ZW50TmFtZSwgeyB0YXJnZXQ6IHRhcmdldEVsLCByYXk6IGV2ZW50LnJheSwgcG9pbnQ6IGV2ZW50LnBvaW50IH0pO1xyXG5cdFx0XHRpZiAodGFyZ2V0RWwpIHRhcmdldEVsLmVtaXQoZXZlbnROYW1lLCB7IHRhcmdldDogdGFyZ2V0RWwsIHJheTogZXZlbnQucmF5LCBwb2ludDogZXZlbnQucG9pbnQgfSk7XHJcblx0XHR9IDtcclxuXHRcclxuXHRcdHZhciBjdXJzb3Jkb3duT2JqID0gbnVsbDtcclxuXHRcdHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2N1cnNvcmRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0ICBjdXJzb3Jkb3duT2JqID0gZXZlbnQudGFyZ2V0O1xyXG5cdFx0ICBlbWl0KCdtb3VzZWRvd24nLCBldmVudCk7XHJcblx0XHR9KTtcclxuXHRcclxuXHRcdHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2N1cnNvcnVwJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdCAgZW1pdCgnbW91c2V1cCcsIGV2ZW50KTtcclxuXHRcdCAgaWYgKGV2ZW50LnRhcmdldC51dWlkID09PSBjdXJzb3Jkb3duT2JqLnV1aWQpIHtcclxuXHRcdFx0ZW1pdCgnY2xpY2snLCBldmVudCk7XHJcblx0XHQgIH1cclxuXHRcdCAgY3Vyc29yZG93bk9iaiA9IG51bGw7XHJcblx0XHR9KTtcclxuXHRcclxuXHRcdHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2N1cnNvcmVudGVyJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdCAgaWYgKCFldmVudC50YXJnZXQuZWwpIHsgcmV0dXJuOyB9XHJcblx0XHQgIGV2ZW50LnRhcmdldC5lbC5hZGRTdGF0ZSgnaG92ZXJlZCcpO1xyXG5cdFx0ICBpZiAoY3Vyc29yRWwpIGN1cnNvckVsLmFkZFN0YXRlKCdob3ZlcmluZycpO1xyXG5cdFx0ICBlbWl0KCdtb3VzZWVudGVyJywgZXZlbnQpO1xyXG5cdFx0fSk7XHJcblx0XHJcblx0XHRzY2VuZS5hZGRFdmVudExpc3RlbmVyKCdjdXJzb3JsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHQgIGlmICghZXZlbnQudGFyZ2V0LmVsKSB7IHJldHVybjsgfVxyXG5cdFx0ICBldmVudC50YXJnZXQuZWwucmVtb3ZlU3RhdGUoJ2hvdmVyZWQnKTtcclxuXHRcdCAgaWYgKGN1cnNvckVsKSBjdXJzb3JFbC5yZW1vdmVTdGF0ZSgnaG92ZXJpbmcnKTtcclxuXHRcdCAgZW1pdCgnbW91c2VsZWF2ZScsIGV2ZW50KTtcclxuXHRcdH0pO1xyXG5cdFxyXG5cdCAgfSxcclxuXHRcclxuXHQgIGluaXRDb2xsaXNpb25FdmVudHM6IGZ1bmN0aW9uICgpIHtcclxuXHRcclxuXHRcdHZhciBzY2VuZSA9IHRoaXMuZWwub2JqZWN0M0Q7XHJcblx0XHJcblx0XHR2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50KSB7XHJcblx0XHRcdHZhciB0YXJnZXRFbCA9IGV2ZW50LnRhcmdldC5lbDtcclxuXHRcdFx0aWYgKCF0YXJnZXRFbCkgcmV0dXJuO1xyXG5cdFxyXG5cdFx0XHQvL3JlbWFwIHRhcmdldCBhbmQgb3RoZXIgZnJvbSBvYmplY3QzRHMgdG8gYWZyYW1lIGVsZW1lbnRcclxuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gdGFyZ2V0RWw7XHJcblx0XHRcdGlmIChldmVudC5vdGhlciAmJiBldmVudC5vdGhlci5lbCkge1xyXG5cdFx0XHRcdGV2ZW50Lm90aGVyID0gZXZlbnQub3RoZXIuZWw7XHJcblx0XHRcdH1cclxuXHRcdFx0dGFyZ2V0RWwuZW1pdChldmVudE5hbWUsIGV2ZW50KTtcclxuXHRcdH07XHJcblx0XHJcblx0XHRzY2VuZS5hZGRFdmVudExpc3RlbmVyKCdjb2xsaXNpb25lbnRlcicsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdFx0XHRlbWl0KCdjb2xsaXNpb25lbnRlcicsIGV2ZW50KTtcclxuXHRcdH0pO1xyXG5cdFxyXG5cdFx0c2NlbmUuYWRkRXZlbnRMaXN0ZW5lcignY29sbGlzaW9uZXhpdCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdFx0XHRlbWl0KCdjb2xsaXNpb25leGl0JywgZXZlbnQpO1xyXG5cdFx0fSk7XHJcblx0XHJcblx0XHRzY2VuZS5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VyZW50ZXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdFx0ZW1pdCgndHJpZ2dlcmVudGVyJywgZXZlbnQpO1xyXG5cdFx0fSk7XHJcblx0XHJcblx0XHRzY2VuZS5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VyZXhpdCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdFx0XHRlbWl0KCd0cmlnZ2VyZXhpdCcsIGV2ZW50KTtcclxuXHRcdH0pO1xyXG5cdFxyXG5cdCAgfVxyXG5cdFxyXG5cdH0pO1xyXG5cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFxyXG5cdC8qKlxyXG5cdCogVGhpcyBzZXQgb2YgY29tcG9uZW50cyBtYXAgdG8gdmFyaW91cyBvYmplY3RzIGFuZCBlZmZlY3RzIHRoYXQgYXJlIHByb3ZpZGVkXHJcblx0KiBuYXRpdmVseSBieSBBbHRzcGFjZVZSLiBZb3VyIG1hbmFnZW1lbnQgb2YgdGhlc2Ugb2JqZWN0cyBtYXkgYmUgbGltaXRlZCB0b1xyXG5cdCogc29tZSBkZWdyZWUsIGJ1dCB0aGV5IHdpbGwgdGVuZCB0byBiZSBtb3JlIHBlcmZvcm1hbnQgdGhhbiBTREsgZXF1aXZhbGVudHMsXHJcblx0KiBvciBtYXkgcHJvdmlkZSBzb21lIGZ1bmN0aW9uYWxpdHkgbm90IG90aGVyd2lzZSBhdmFpbGFibGUgdG8gdGhlIFNESy5cclxuXHQqIEBuYW1lc3BhY2UgbmF0aXZlXHJcblx0Ki9cclxuXHQoZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCF3aW5kb3cuYWx0c3BhY2UgfHwgIWFsdHNwYWNlLmluQ2xpZW50KSB7XHJcblx0XHRcdHZhciBub29wID0gZnVuY3Rpb24gKCkge307XHJcblx0XHRcdHdpbmRvdy5hbHRzcGFjZSA9IHtcclxuXHRcdFx0XHRhZGROYXRpdmVDb21wb25lbnQ6IG5vb3AsXHJcblx0XHRcdFx0dXBkYXRlTmF0aXZlQ29tcG9uZW50OiBub29wLFxyXG5cdFx0XHRcdHJlbW92ZU5hdGl2ZUNvbXBvbmVudDogbm9vcFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0dmFyIHBsYWNlaG9sZGVyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMC4wMDEsIDAuMDAxLCAwLjAwMSk7XHJcblx0XHR2YXIgcGxhY2Vob2xkZXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IGNvbG9yOiAweDAwMDAwMCB9KTtcclxuXHRcdHBsYWNlaG9sZGVyTWF0ZXJpYWwudmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0dmFyIFBsYWNlaG9sZGVyTWVzaCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0VEhSRUUuTWVzaC5jYWxsKCB0aGlzLCBwbGFjZWhvbGRlckdlb21ldHJ5LCBwbGFjZWhvbGRlck1hdGVyaWFsICk7XHJcblx0XHR9O1xyXG5cdFx0UGxhY2Vob2xkZXJNZXNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLk1lc2gucHJvdG90eXBlICk7XHJcblx0XHRQbGFjZWhvbGRlck1lc2gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVEhSRUUuUGxhY2Vob2xkZXJNZXNoO1xyXG5cdFxyXG5cdFx0ZnVuY3Rpb24gbWVzaEluaXQobWVzaCkge1xyXG5cdFx0XHQvL0lmIHlvdSBhdHRhY2ggbmF0aXZlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5LCBpdCB3aWxsIG5vdCB1c2UgYSBkZWZhdWx0IGNvbGxpZGVyXHJcblx0XHRcdG1lc2gudXNlckRhdGEuYWx0c3BhY2UgPSBtZXNoLnVzZXJEYXRhLmFsdHNwYWNlIHx8IHt9O1xyXG5cdFx0XHRtZXNoLnVzZXJEYXRhLmFsdHNwYWNlLmNvbGxpZGVyID0gbWVzaC51c2VyRGF0YS5hbHRzcGFjZS5jb2xsaWRlciB8fCB7fTtcclxuXHRcdFx0bWVzaC51c2VyRGF0YS5hbHRzcGFjZS5jb2xsaWRlci5lbmFibGVkID0gZmFsc2U7XHJcblx0XHJcblx0XHRcdGFsdHNwYWNlLmFkZE5hdGl2ZUNvbXBvbmVudChtZXNoLCB0aGlzLm5hbWUpO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0ZnVuY3Rpb24gbmF0aXZlQ29tcG9uZW50SW5pdCgpIHtcclxuXHRcdFx0dmFyIG1lc2ggPSB0aGlzLmVsLmdldE9yQ3JlYXRlT2JqZWN0M0QoJ21lc2gnLCBQbGFjZWhvbGRlck1lc2gpO1xyXG5cdFxyXG5cdFx0XHRtZXNoSW5pdC5jYWxsKHRoaXMsIG1lc2gpO1xyXG5cdFxyXG5cdFx0XHQvL3RvIHBhc3MgZGVmYXVsdHNcclxuXHRcdFx0dGhpcy51cGRhdGUodGhpcy5kYXRhKTtcclxuXHRcdH1cclxuXHRcdGZ1bmN0aW9uIG5hdGl2ZUNvbXBvbmVudFJlbW92ZSgpIHtcclxuXHRcdFx0dmFyIG1lc2ggPSB0aGlzLmVsLmdldE9iamVjdDNEKCdtZXNoJyk7XHJcblx0XHRcdGFsdHNwYWNlLnJlbW92ZU5hdGl2ZUNvbXBvbmVudChtZXNoLCB0aGlzLm5hbWUpO1xyXG5cdFx0fVxyXG5cdFx0ZnVuY3Rpb24gbmF0aXZlQ29tcG9uZW50VXBkYXRlKG9sZERhdGEpIHtcclxuXHRcdFx0YWx0c3BhY2UudXBkYXRlTmF0aXZlQ29tcG9uZW50KHRoaXMuZWwub2JqZWN0M0RNYXAubWVzaCwgdGhpcy5uYW1lLCB0aGlzLmRhdGEpO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0ZnVuY3Rpb24gY2FsbENvbXBvbmVudChmdW5jdGlvbk5hbWUsIGZ1bmN0aW9uQXJndW1lbnRzKSB7XHJcblx0XHRcdGFsdHNwYWNlLmNhbGxOYXRpdmVDb21wb25lbnQodGhpcy5lbC5vYmplY3QzRE1hcC5tZXNoLCB0aGlzLm5hbWUsIGZ1bmN0aW9uTmFtZSwgZnVuY3Rpb25Bcmd1bWVudHMpXHJcblx0XHR9XHJcblx0XHJcblx0XHQvKipcclxuXHRcdCogQXR0YWNoIGEgZ2l2ZW4gbmF0aXZlIG9iamVjdCB0byB0aGlzIGVudGl0eS5cclxuXHRcdCogQG1peGluIG4tb2JqZWN0XHJcblx0XHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHRcdCogQHByb3Age3N0cmluZ30gcmVzIC0gVGhlIGlkZW50aWZpZXIgZm9yIHRoZSByZXNvdXJjZSB5b3Ugd2FudC4gVGhpcyBjb21wb25lbnRcclxuXHRcdCogY2FuIGFjY2VwdCBhbGwgcmVzb3VyY2VzIGV4Y2VwdCBmb3IgYGludGVyYWN0YWJsZXNgLlxyXG5cdFx0KiBAZXhhbXBsZSA8YS1lbnRpdHkgbi1vYmplY3Q9J3JlczphcmNoaXRlY3R1cmUvd2FsbC00dy00aCc+PC9hLWVudGl0eT5cclxuXHRcdCovXHJcblx0XHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ24tb2JqZWN0Jywge1xyXG5cdFx0XHRzY2hlbWE6IHtcclxuXHRcdFx0XHRyZXM6IHt0eXBlOiAnc3RyaW5nJ31cclxuXHRcdFx0fSxcclxuXHRcdFx0aW5pdDogbmF0aXZlQ29tcG9uZW50SW5pdCxcclxuXHRcdFx0dXBkYXRlOiBuYXRpdmVDb21wb25lbnRVcGRhdGUsXHJcblx0XHRcdHJlbW92ZTogbmF0aXZlQ29tcG9uZW50UmVtb3ZlXHJcblx0XHR9KTtcclxuXHRcclxuXHRcdC8qKlxyXG5cdFx0KiBDcmVhdGUgYW4gb2JqZWN0IHRoYXQgc3Bhd25zIGFkZGl0aW9uYWwgY29waWVzIG9mIGl0c2VsZiB3aGVuIGdyYWJiZWQgYnkgYSB1c2VyICh0aGUgY29waWVzIGFyZSBub3Qgc3Bhd25lcnMgdGhlbXNlbHZlcykuXHJcblx0XHQqIFRoZXNlIGNvcGllcyB3aWxsIGJlIHBoeXNpY2FsbHkgaW50ZXJhY3RpdmUgYW5kIGF1dG9tYXRpY2FsbHkgc3luY2hyb25pemVkXHJcblx0XHQqIGJldHdlZW4gdXNlcnMuXHJcblx0XHQqIEBtaXhpbiBuLXNwYXduZXJcclxuXHRcdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdFx0KiBAcHJvcCB7c3RyaW5nfSByZXMgLSBUaGUgaWRlbnRpZmllciBmb3IgdGhlIHJlc291cmNlIHlvdSB3YW50LiBUaGlzIGNvbXBvbmVudFxyXG5cdFx0KiBjYW4gb25seSBhY2NlcHQgcmVzb3VyY2VzIG9mIHR5cGUgYGludGVyYWN0YWJsZXNgLlxyXG5cdFx0KiBAZXhhbXBsZSA8YS1lbnRpdHkgbi1zcGF3bmVyPSdyZXM6IGludGVyYWN0YWJsZXMvYmFza2V0YmFsbCc+PC9hLWVudGl0eT5cclxuXHRcdCovXHJcblx0XHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ24tc3Bhd25lcicsIHtcclxuXHRcdFx0c2NoZW1hOiB7XHJcblx0XHRcdFx0cmVzOiB7dHlwZTogJ3N0cmluZyd9XHJcblx0XHRcdH0sXHJcblx0XHRcdGluaXQ6IG5hdGl2ZUNvbXBvbmVudEluaXQsXHJcblx0XHRcdHVwZGF0ZTogbmF0aXZlQ29tcG9uZW50VXBkYXRlLFxyXG5cdFx0XHRyZW1vdmU6IG5hdGl2ZUNvbXBvbmVudFJlbW92ZVxyXG5cdFx0fSk7XHJcblx0XHJcblx0XHQvKipcclxuXHRcdCogQ3JlYXRlcyBkeW5hbWljIDJEIHRleHQgb24gdGhlIGVudGl0eS4gVGhlIHRleHQgd2lsbCB3cmFwIGF1dG9tYXRpY2FsbHkgYmFzZWQgb24gdGhlIHdpZHRoIGFuZCBoZWlnaHQgcHJvdmlkZWQuXHJcblx0XHQqIFRoaXMgdGV4dCB3aWxsIGJlIGNsZWFyZXIgdGhhbiB0ZXh0dXJlLWJhc2VkIHRleHQgYW5kIG1vcmUgcGVyZm9ybWFudCB0aGFuIGdlb21ldHJ5LWJhc2VkIHRlc3QuXHJcblx0XHQqIEBtaXhpbiBuLXRleHRcclxuXHRcdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdFx0KiBAcHJvcCB7c3RyaW5nfSB0ZXh0IC0gVGhlIHRleHQgdG8gYmUgZHJhd24uXHJcblx0XHQqIEBwcm9wIHtudW1iZXJ9IGZvbnRTaXplPTEwIC0gVGhlIGhlaWdodCBvZiB0aGUgbGV0dGVycy4gMTBwdCB+PSAxbVxyXG5cdFx0KiBAcHJvcCB7bnVtYmVyfSB3aWR0aD0xMCAtIFRoZSB3aWR0aCBvZiB0aGUgdGV4dCBhcmVhIGluIG1ldGVycy4gSWYgdGhlXHJcblx0XHQqIHRleHQgaXMgd2lkZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgb3ZlcmZsb3cgd2lsbCBiZSB3cmFwcGVkIHRvIHRoZSBuZXh0IGxpbmUuXHJcblx0XHQqIEBwcm9wIHtudW1iZXJ9IGhlaWdodD0xIC0gVGhlIGhlaWdodCBvZiB0aGUgdGV4dCBhcmVhIGluIG1ldGVycy4gSWYgdGhlXHJcblx0XHQqIHRleHQgaXMgdGFsbGVyIHRoYW4gdGhpcyB2YWx1ZSwgdGhlIG92ZXJmbG93IHdpbGwgYmUgY3V0IG9mZi5cclxuXHRcdCogQHByb3Age3N0cmluZ30gaG9yaXpvbnRhbEFsaWduPW1pZGRsZSAtIFRoZSBob3Jpem9udGFsIGFuY2hvciBwb2ludCBmb3JcclxuXHRcdCogdGhlIHRleHQuIENhbiBiZSBgbGVmdGAsIGBtaWRkbGVgLCBvciBgcmlnaHRgLlxyXG5cdFx0KiBAcHJvcCB7c3RyaW5nfSB2ZXJ0aWNhbEFsaWduPW1pZGRsZSAtIFRoZSB2ZXJ0aWNhbCBhbmNob3IgcG9pbnQgZm9yIHRoZVxyXG5cdFx0KiB0ZXh0LiBDYW4gYmUgYHRvcGAsIGBtaWRkbGVgLCBvciBgYm90dG9tYC5cclxuXHRcdCovXHJcblx0XHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ24tdGV4dCcsIHtcclxuXHRcdFx0aW5pdDogbmF0aXZlQ29tcG9uZW50SW5pdCxcclxuXHRcdFx0dXBkYXRlOiBuYXRpdmVDb21wb25lbnRVcGRhdGUsXHJcblx0XHRcdHJlbW92ZTogbmF0aXZlQ29tcG9uZW50UmVtb3ZlLFxyXG5cdFx0XHRzY2hlbWE6IHtcclxuXHRcdFx0XHR0ZXh0OiB7IGRlZmF1bHQ6ICcnLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG5cdFx0XHRcdC8qY29sb3I6IHsgZGVmYXVsdDogJ3doaXRlJyxcclxuXHRcdFx0XHRcdHBhcnNlOiBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdHN0cmluZ2lmeTogZnVuY3Rpb24odmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0XHR9fSwqL1xyXG5cdFx0XHRcdGZvbnRTaXplOiB7IGRlZmF1bHQ6ICcxMCcsIHR5cGU6ICdpbnQnIH0sLy9yb3VnaGx5IGEgbWV0ZXIgdGFsbFxyXG5cdFx0XHRcdHdpZHRoOiB7IGRlZmF1bHQ6ICcxMCcsIHR5cGU6ICdudW1iZXInIH0sLy9pbiBtZXRlcnNcclxuXHRcdFx0XHRoZWlnaHQ6IHsgZGVmYXVsdDogJzEnLCB0eXBlOiAnbnVtYmVyJyB9LC8vaW4gbWV0ZXJzXHJcblx0XHRcdFx0aG9yaXpvbnRhbEFsaWduOiB7IGRlZmF1bHQ6ICdtaWRkbGUnfSxcclxuXHRcdFx0XHR2ZXJ0aWNhbEFsaWduOiB7IGRlZmF1bHQ6ICdtaWRkbGUnfVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcclxuXHRcdC8vb2JqZWN0OiBjb2xsaWRlcyBhZ2FpbnN0OiBvYmplY3RzIC8gZW52aXJvbWVudCAvIGN1cnNvclxyXG5cdFx0Ly9lbnZpcm9ubWVudDogY2FuIGJlIHRlbGVwb3J0ZWQgb250bywgYW5kIGNvbGxpZGVzIGFnYWluc3Q6IG9iamVjdHMgLyBlbnZpcm9ubWVudCAvIGN1cnNvclxyXG5cdFx0Ly9ob2xvZ3JhbTogY29sbGlkZXMgYWdhaW5zdDogY3Vyc29yIC8gaG9sb2dyYW1zXHJcblx0XHJcblx0XHQvKipcclxuXHRcdCogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3Ige0BsaW5rIG4ubi1zcGhlcmUtY29sbGlkZXJ9LCB7QGxpbmsgbi5uLWJveC1jb2xsaWRlcn0sXHJcblx0XHQqIHtAbGluayBuLm4tY2Fwc3VsZS1jb2xsaWRlcn0sIGFuZCB7QGxpbmsgbi5uLW1lc2gtY29sbGlkZXJ9LiBZb3UgY2Fubm90IHVzZVxyXG5cdFx0KiB0aGlzIGNsYXNzIGRpcmVjdGx5LCBidXQgaW5zdGVhZCB5b3Ugc2hvdWxkIGFkZCBvbmUgb2YgdGhvc2UgY29tcG9uZW50c1xyXG5cdFx0KiB0byB5b3VyIG9iamVjdHMuXHJcblx0XHQqIEBuYW1lIG4tY29sbGlkZXJcclxuXHRcdCogQG1peGluIG4tY29sbGlkZXJcclxuXHRcdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdFx0KiBAcHJvcCB7dmVjM30gY2VudGVyPTAsMCwwIC0gVGhlIG9mZnNldCBvZiB0aGUgY29sbGlkZXIgaW4gbG9jYWwgc3BhY2UuXHJcblx0XHQqIEBwcm9wIHtzdHJpbmd9IHR5cGU9aG9sb2dyYW0gLSBUaGUgdHlwZSBvZiBjb2xsaWRlciwgb25lIG9mOiBgb2JqZWN0YCB8IGBlbnZpcm9ubWVudGAgfCBgaG9sb2dyYW1gLlxyXG5cdFx0KiBPYmplY3QgY29sbGlkZXJzIGNvbGxpZGUgd2l0aCBvdGhlciBvYmplY3RzLCB0aGUgZW52aXJvbm1lbnQsIGFuZCB0aGUgY3Vyc29yLlxyXG5cdFx0KiBFbnZpcm9ubWVudCBjb2xsaWRlcnMgY29sbGlkZSB3aXRoIGV2ZXJ5dGhpbmcgb2JqZWN0cyBkbywgYnV0IHlvdSBjYW4gYWxzb1xyXG5cdFx0KiB0ZWxlcG9ydCBvbnRvIHRoZW0uIEhvbG9ncmFtIGNvbGxpZGVycyBvbmx5IGNvbGxpZGUgd2l0aCBvdGhlciBob2xvZ3JhbXMgYW5kXHJcblx0XHQqIHRoZSBjdXJzb3IuXHJcblx0XHQqL1xyXG5cdFxyXG5cdFx0LyoqXHJcblx0XHQqIENyZWF0ZSBhIHNwaGVyaWNhbCBjb2xsaWRlciBvbiB0aGlzIGVudGl0eS5cclxuXHRcdCogQG1peGluIG4tc3BoZXJlLWNvbGxpZGVyXHJcblx0XHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHRcdCogQGV4dGVuZHMgbmF0aXZlLm4tY29sbGlkZXJcclxuXHRcdCogQHByb3Age251bWJlcn0gcmFkaXVzPTEgLSBUaGUgc2l6ZSBvZiB0aGUgY29sbGlkZXIgaW4gbWV0ZXJzLlxyXG5cdFx0Ki9cclxuXHRcdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1zcGhlcmUtY29sbGlkZXInLCB7XHJcblx0XHRcdGluaXQ6bmF0aXZlQ29tcG9uZW50SW5pdCxcclxuXHRcdFx0cmVtb3ZlOiBuYXRpdmVDb21wb25lbnRSZW1vdmUsXHJcblx0XHRcdHVwZGF0ZTogbmF0aXZlQ29tcG9uZW50VXBkYXRlLFxyXG5cdFx0XHRzY2hlbWE6IHtcclxuXHRcdFx0XHRpc1RyaWdnZXI6IHsgZGVmYXVsdDogZmFsc2UsIHR5cGU6ICdib29sZWFuJyB9LFxyXG5cdFx0XHRcdGNlbnRlcjogeyB0eXBlOiAndmVjMycgfSxcclxuXHRcdFx0XHRyYWRpdXM6IHsgZGVmYXVsdDogJzAnLCB0eXBlOiAnbnVtYmVyJyB9LFxyXG5cdFx0XHRcdHR5cGU6IHtkZWZhdWx0OiAnb2JqZWN0J31cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHJcblx0XHJcblx0XHQvKipcclxuXHRcdCogQ3JlYXRlIGEgYm94LXNoYXBlZCBjb2xsaWRlciBvbiB0aGlzIGVudGl0eS5cclxuXHRcdCogQG1peGluIG4tYm94LWNvbGxpZGVyXHJcblx0XHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHRcdCogQGV4dGVuZHMgbmF0aXZlLm4tY29sbGlkZXJcclxuXHRcdCogQHByb3Age3ZlYzN9IHNpemU9MSwxLDEgLSBUaGUgZGltZW5zaW9ucyBvZiB0aGUgY29sbGlkZXIuXHJcblx0XHQqL1xyXG5cdFx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCduLWJveC1jb2xsaWRlcicsIHtcclxuXHRcdFx0aW5pdDpuYXRpdmVDb21wb25lbnRJbml0LFxyXG5cdFx0XHRyZW1vdmU6IG5hdGl2ZUNvbXBvbmVudFJlbW92ZSxcclxuXHRcdFx0dXBkYXRlOiBuYXRpdmVDb21wb25lbnRVcGRhdGUsXHJcblx0XHRcdHNjaGVtYToge1xyXG5cdFx0XHRcdGlzVHJpZ2dlcjogeyBkZWZhdWx0OiBmYWxzZSwgdHlwZTogJ2Jvb2xlYW4nIH0sXHJcblx0XHRcdFx0Y2VudGVyOiB7IHR5cGU6ICd2ZWMzJyB9LFxyXG5cdFx0XHRcdHNpemU6IHsgdHlwZTogJ3ZlYzMnIH0sXHJcblx0XHRcdFx0dHlwZToge2RlZmF1bHQ6ICdvYmplY3QnfVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcclxuXHRcdC8qKlxyXG5cdFx0KiBDcmVhdGUgYSBjYXBzdWxlLXNoYXBlZCBjb2xsaWRlciBvbiB0aGlzIGVudGl0eS4gQ2Fwc3VsZXNcclxuXHRcdCogYXJlIGEgdW5pb24gb2YgYSBjeWxpbmRlciBhbmQgdHdvIHNwaGVyZXMgb24gdG9wIGFuZCBib3R0b20uXHJcblx0XHQqIEBtaXhpbiBuLWNhcHN1bGUtY29sbGlkZXJcclxuXHRcdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdFx0KiBAZXh0ZW5kcyBuYXRpdmUubi1jb2xsaWRlclxyXG5cdFx0KiBAcHJvcCB7bnVtYmVyfSByYWRpdXM9MSAtIFRoZSByYWRpdXMgb2YgdGhlIGNhcHN1bGUgaW4gbWV0ZXJzLlxyXG5cdFx0KiBAcHJvcCB7bnVtYmVyfSBoZWlnaHQ9MSAtIFRoZSBoZWlnaHQgb2YgdGhlIHNoYWZ0IG9mIHRoZSBjYXBzdWxlIGluIG1ldGVycy5cclxuXHRcdCogQHByb3Age3N0cmluZ30gZGlyZWN0aW9uPXkgLSBUaGUgYXhpcyB3aXRoIHdoaWNoIHRoZSBjYXBzdWxlIGlzIGFsaWduZWQuXHJcblx0XHQqIE9uZSBvZiBgeGAsIGB5YCwgb3IgYHpgLlxyXG5cdFx0Ki9cclxuXHRcdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1jYXBzdWxlLWNvbGxpZGVyJywge1xyXG5cdFx0XHRpbml0Om5hdGl2ZUNvbXBvbmVudEluaXQsXHJcblx0XHRcdHJlbW92ZTogbmF0aXZlQ29tcG9uZW50UmVtb3ZlLFxyXG5cdFx0XHR1cGRhdGU6IG5hdGl2ZUNvbXBvbmVudFVwZGF0ZSxcclxuXHRcdFx0c2NoZW1hOiB7XHJcblx0XHRcdFx0aXNUcmlnZ2VyOiB7IGRlZmF1bHQ6IGZhbHNlLCB0eXBlOiAnYm9vbGVhbicgfSxcclxuXHRcdFx0XHRjZW50ZXI6IHsgdHlwZTogJ3ZlYzMnIH0sXHJcblx0XHRcdFx0cmFkaXVzOiB7IGRlZmF1bHQ6ICcwJywgdHlwZTogJ251bWJlcicgfSxcclxuXHRcdFx0XHRoZWlnaHQ6IHsgZGVmYXVsdDogJzAnLCB0eXBlOiAnbnVtYmVyJyB9LFxyXG5cdFx0XHRcdGRpcmVjdGlvbjogeyBkZWZhdWx0OiAneScgfSxcclxuXHRcdFx0XHR0eXBlOiB7ZGVmYXVsdDogJ29iamVjdCd9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFxyXG5cdFx0LyoqXHJcblx0XHQqIEVuYWJsZSBjb2xsaXNpb24gZm9yIHRoZSBlbnRpcmUgYXR0YWNoZWQgbWVzaC4gVGhpcyBpcyBleHBlbnNpdmUgdG8gZXZhbHVhdGUsIHNvIHNob3VsZCBvbmx5IGJlIHVzZWQgb25cclxuXHRcdCogbG93LXBvbHkgbWVzaGVzLlxyXG5cdFx0KiBAbWl4aW4gbi1tZXNoLWNvbGxpZGVyXHJcblx0XHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHRcdCogQGV4dGVuZHMgbmF0aXZlLm4tY29sbGlkZXJcclxuXHRcdCogQGV4YW1wbGUgPGEtYm94IG4tbWVzaC1jb2xsaWRlcj48L2EtYm94PlxyXG5cdFx0KiBAcHJvcCB7Ym9vbH0gY29udmV4PXRydWUgLSBXaGV0aGVyIHRoZSBjb2xsaWRlciBzaG91bGQgYmUgY29udmV4IG9yIGNvbmNhdmUuIFNldCB0aGlzIHRvIGZhbHNlIGlmIHlvdSBoYXZlIGhvbGVzXHJcblx0XHQqIGluIHlvdXIgbWVzaC4gQ29udmV4IGNvbGxpZGVycyBhcmUgbGltaXRlZCB0byAyNTUgdHJpYW5nbGVzLiBOb3RlOiBjb25jYXZlIGNvbGxpZGVycyBjYW4gYmUgc2lnbmlmaWNhbnRseSBtb3JlXHJcblx0XHQqIGV4cGVuc2l2ZSBjb21wYXJldCB0byBjb252ZXMgY29sbGlkZXJzLlxyXG5cdFx0Ki9cclxuXHRcdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1tZXNoLWNvbGxpZGVyJywge1xyXG5cdFx0XHRfZm9yRWFjaE1lc2g6IGZ1bmN0aW9uIChmdW5jKSB7XHJcblx0XHRcdFx0dmFyIG9iaiA9IHRoaXMuZWwub2JqZWN0M0RNYXAubWVzaDtcclxuXHRcdFx0XHRpZiAoIW9iaikgeyByZXR1cm47IH1cclxuXHRcdFx0XHRpZiAob2JqIGluc3RhbmNlb2YgVEhSRUUuTWVzaCkge1xyXG5cdFx0XHRcdFx0ZnVuYyhvYmopO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvYmoudHJhdmVyc2UoZnVuY3Rpb24gKGNoaWxkT2JqKSB7XHJcblx0XHRcdFx0XHRpZiAoY2hpbGRPYmogaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XHJcblx0XHRcdFx0XHRcdGZ1bmMoY2hpbGRPYmopO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdF9pbml0T2JqOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0dGhpcy5fZm9yRWFjaE1lc2goZnVuY3Rpb24gKG1lc2gpIHtcclxuXHRcdFx0XHRcdG1lc2hJbml0LmNhbGwodGhpcywgbWVzaCk7XHJcblx0XHJcblx0XHRcdFx0XHQvL3RvIHBhc3MgZGVmYXVsdHNcclxuXHRcdFx0XHRcdGFsdHNwYWNlLnVwZGF0ZU5hdGl2ZUNvbXBvbmVudChtZXNoLCB0aGlzLm5hbWUsIHRoaXMuZGF0YSk7XHJcblx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdC8vIEFsbG93IGEtZnJhbWUgdG8gY3JlYXRlIGEgUGxhY2Vob2xkZXJNZXNoIGlmIHRoZXJlIGlzbid0IGFscmVhZHkgb25lLCBzbyB0aGF0IHRoZSBuYXRpdmUgY29sbGlkZXIgaXNcclxuXHRcdFx0XHQvLyByZWdpc3RlcmVkLlxyXG5cdFx0XHRcdHRoaXMuZWwuZ2V0T3JDcmVhdGVPYmplY3QzRCgnbWVzaCcsIFBsYWNlaG9sZGVyTWVzaCk7XHJcblx0XHJcblx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSB0aGUgZXhpc3RpbmcgbWVzaFxyXG5cdFx0XHRcdHRoaXMuX2luaXRPYmooKTtcclxuXHRcclxuXHRcdFx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVsLWxvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdC8vIFJlLWluaXRpYWxpemUgdGhlIGNvbGxpZGVyIGlmIGEgbmV3IG1vZGVsIGlzIGxvYWRlZFxyXG5cdFx0XHRcdFx0dGhpcy5faW5pdE9iaigpO1xyXG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHRoaXMuX2ZvckVhY2hNZXNoKGZ1bmN0aW9uIChtZXNoKSB7XHJcblx0XHRcdFx0XHRhbHRzcGFjZS5yZW1vdmVOYXRpdmVDb21wb25lbnQobWVzaCwgdGhpcy5uYW1lKTtcclxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XHJcblx0XHRcdFx0dGhpcy5fZm9yRWFjaE1lc2goZnVuY3Rpb24gKG1lc2gpIHtcclxuXHRcdFx0XHRcdGFsdHNwYWNlLnVwZGF0ZU5hdGl2ZUNvbXBvbmVudChtZXNoLCB0aGlzLm5hbWUsIHRoaXMuZGF0YSk7XHJcblx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2NoZW1hOiB7XHJcblx0XHRcdFx0aXNUcmlnZ2VyOiB7IGRlZmF1bHQ6IGZhbHNlLCB0eXBlOiAnYm9vbGVhbicgfSxcclxuXHRcdFx0XHRjb252ZXg6IHsgZGVmYXVsdDogdHJ1ZSwgdHlwZTogJ2Jvb2xlYW4nIH0sXHJcblx0XHRcdFx0dHlwZToge2RlZmF1bHQ6ICdvYmplY3QnfVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcclxuXHRcdC8qKlxyXG5cdFx0KiBNYWtlIHRoZSBvYmplY3QncyArWiBhbHdheXMgZmFjZSB0aGUgdmlld2VyLiBDdXJyZW50bHkgd2lsbCBvbmx5IGRpcmVjdGx5IGFwcGx5IHRvIG1haW4gbWVzaCBvciBuYXRpdmUgY29tcG9uZW50IG9uIHRoZSBhdHRhY2hlZCBlbnRpdHksIG5vdCBhbnkgY2hpbGRyZW4gb3Igc3VibWVzaGVzLlxyXG5cdFx0KiBAbWl4aW4gbi1iaWxsYm9hcmRcclxuXHRcdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdFx0KiBAZXhhbXBsZSA8YS1wbGFuZSBuLWJpbGxib2FyZD48L2EtcGxhbmU+XHJcblx0XHQqL1xyXG5cdFx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCduLWJpbGxib2FyZCcsIHtcclxuXHRcdFx0aW5pdDpuYXRpdmVDb21wb25lbnRJbml0LFxyXG5cdFx0XHRyZW1vdmU6IG5hdGl2ZUNvbXBvbmVudFJlbW92ZSxcclxuXHRcdH0pO1xyXG5cdFxyXG5cdFx0LyoqXHJcblx0XHQqIEEgY29udGFpbmVyIGtlZXBzIGEgcnVubmluZyB0YWxseSBvZiBob3cgbWFueSBvYmplY3RzIGFyZSB3aXRoaW5cclxuXHRcdCogaXRzIGJvdW5kcywgYW5kIGFkZHMgYW5kIHJlbW92ZXMgdGhlIHN0YXRlcyBgY29udGFpbmVyLWZ1bGxgIGFuZFxyXG5cdFx0KiBgY29udGFpbmVyLWVtcHR5YCBiYXNlZCBvbiB0aGUgY3VycmVudCBjb3VudCBvZiBvYmplY3RzLiBDYW4gZmlyZSB0aHJlZVxyXG5cdFx0KiBzcGVjaWFsIGV2ZW50czogYGNvbnRhaW5lci1mdWxsYCwgYGNvbnRhaW5lci1lbXB0eWAsIGFuZCBgY29udGFpbmVyLWNvdW50LWNoYW5nZWRgLlxyXG5cdFx0KiBAbWl4aW4gbi1jb250YWluZXJcclxuXHRcdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdFx0KiBAcHJvcCB7bnVtYmVyfSBjYXBhY2l0eT00IC0gVGhlIHZhbHVlIGF0IHdoaWNoIHRoZSBjb250YWluZXIgd2lsbCBmaXJlIHRoZVxyXG5cdFx0KiBgY29udGFpbmVyLWZ1bGxgIGV2ZW50LlxyXG5cdFx0Ki9cclxuXHRcdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1jb250YWluZXInLCB7XHJcblx0XHRcdGluaXQ6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0bmF0aXZlQ29tcG9uZW50SW5pdC5jYWxsKHRoaXMpO1xyXG5cdFxyXG5cdFx0XHRcdHZhciBlbCA9IHRoaXMuZWw7XHJcblx0XHRcdFx0dmFyIGNvbXBvbmVudCA9IHRoaXM7XHJcblx0XHJcblx0XHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignc3RhdGVhZGRlZCcsIGZ1bmN0aW9uKGV2ZW50KXtcclxuXHRcdFx0XHRcdGlmKGV2ZW50LmRldGFpbC5zdGF0ZSA9PT0gJ2NvbnRhaW5lci1mdWxsJyl7XHJcblx0XHRcdFx0XHRcdGVsLmVtaXQoJ2NvbnRhaW5lci1mdWxsJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZihldmVudC5kZXRhaWwuc3RhdGUgPT09ICdjb250YWluZXItZW1wdHknKXtcclxuXHRcdFx0XHRcdFx0ZWwuZW1pdCgnY29udGFpbmVyLWVtcHR5Jyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGFpbmVyLWNvdW50LWNoYW5nZWQnLCBmdW5jdGlvbihldmVudCl7XHJcblx0XHRcdFx0XHRjb21wb25lbnQuY291bnQgPSBldmVudC5kZXRhaWwuY291bnQ7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHJlbW92ZTogbmF0aXZlQ29tcG9uZW50UmVtb3ZlLFxyXG5cdFx0XHR1cGRhdGU6IG5hdGl2ZUNvbXBvbmVudFVwZGF0ZSxcclxuXHRcdFx0c2NoZW1hOiB7XHJcblx0XHRcdFx0Y2FwYWNpdHk6IHsgZGVmYXVsdDogNCwgdHlwZTogJ251bWJlcicgfSxcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHJcblx0XHQvKipcclxuXHRcdCogUGxheSB0aGUgc291bmQgZ2l2ZW4gYnkgdGhlIGBzcmNgIG9yIGByZXNgIHByb3BlcnR5IGZyb20gdGhlIGxvY2F0aW9uXHJcblx0XHQqIG9mIHRoZSBlbnRpdHkuXHJcblx0XHQqIEBtaXhpbiBuLXNvdW5kXHJcblx0XHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHRcdCogQHByb3Age3N0cmluZ30gcmVzIC0gVGhlIHJlc291cmNlIGlkZW50aWZpZXIgZm9yIGEgYnVpbHQtaW4gc291bmQgY2xpcC5cclxuXHRcdCogQHByb3Age3N0cmluZ30gc3JjIC0gQSBVUkwgdG8gYW4gZXh0ZXJuYWwgc291bmQgY2xpcC4gVGhlIHNvdW5kIGNhbiBiZSBpbiBXQVYsIE9HRyBvciBNUDMgZm9ybWF0LiBIb3dldmVyLiBvbmx5XHJcblx0XHQqIFdBViBpcyBzdXBwb3J0ZWQgb24gYWxsIHBsYXRmb3Jtcy4gTVAzIGlzIHN1cHBvcnRlZCBvbiBHZWFyIFZSIGFuZCBPR0cgaXMgc3VwcG9ydGVkIG9uIGRlc2t0b3AuXHJcblx0XHQqIEBwcm9wIHtzdHJpbmd9IG9uIC0gVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRoYXQgd2lsbCBwbGF5IHRoaXMgc291bmQgY2xpcC5cclxuXHRcdCogQHByb3Age2Jvb2xlYW59IGxvb3A9ZmFsc2UgLSBUZWxscyB0aGUgY2xpcCB0byBsb29wIGJhY2sgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY2xpcFxyXG5cdFx0KiBvbmNlIGl0J3MgZmluaXNoZWQuXHJcblx0XHQqIEBwcm9wIHtib29sZWFufSBhdXRvcGxheT1mYWxzZSAtIFRlbGxzIHRoZSBjbGlwIHRvIHN0YXJ0IGF1dG9tYXRpY2FsbHkgd2hlblxyXG5cdFx0KiB0aGUgc2NlbmUgbG9hZHMsIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgYHBsYXlTb3VuZCgpYC5cclxuXHRcdCogQHByb3Age2Jvb2xlYW59IG9uZXNob3Q9ZmFsc2UgLSBUZWxscyB0aGUgY2xpcCB0byBjbGVhbiBpdHNlbGYgdXAgd2hlbiBpdFxyXG5cdFx0KiBmaW5pc2hlcyBwbGF5aW5nLiBBbGxvd3MgZm9yIG92ZXJsYXBwaW5nIGluc3RhbmNlcyBvZiB0aGUgc291bmQuXHJcblx0XHQqIEBwcm9wIHtudW1iZXJ9IHZvbHVtZT0xIC0gVGhlIHZvbHVtZSBvZiB0aGUgY2xpcCwgZnJvbSBbMCwxXS5cclxuXHRcdCogQHByb3Age251bWJlcn0gc3BhdGlhbEJsZW5kPTEgLSBIb3cgc3BhdGlhbGl6ZWQgYSBzb3VuZCBpcywgZnJvbSBbMCwxXS5cclxuXHRcdCogQSB2YWx1ZSBvZiAxIHdpbGwgYmUgZnVsbHkgbG9jYWxpemVkLCBhbmQgdGhlIHNvdW5kIHdpbGwgcGFuIGxlZnQgYW5kXHJcblx0XHQqIHJpZ2h0IGFzIHlvdSB0dXJuIHlvdXIgaGVhZC4gQSB2YWx1ZSBvZiAwIG1ha2VzIGl0IG5vbi1zcGF0aWFsaXplZCwgYW5kXHJcblx0XHQqIGl0IHdpbGwgYWx3YXlzIGJlIGhlYXJkIGluIGJvdGggZWFycy5cclxuXHRcdCogQHByb3Age251bWJlcn0gcGl0Y2g9MSAtIFRoZSBzcGVlZCBtdWx0aXBsaWVyIGZvciB0aGUgc291bmQuIDAuNSBpcyBvbmVcclxuXHRcdCogb2N0YXZlIGRvd24sIGFuZCAyIGlzIG9uZSBvY3RhdmUgdXAuXHJcblx0XHQqIEBwcm9wIHtudW1iZXJ9IG1pbkRpc3RhbmNlPTEgLSBJbnNpZGUgdGhpcyBkaXN0YW5jZSBpbiBtZXRlcnMsXHJcblx0XHQqIHRoZSBzb3VuZCB2b2x1bWUgaXMgYXQgZnVsbCB2b2x1bWUuXHJcblx0XHQqIEBwcm9wIHtudW1iZXJ9IG1heERpc3RhbmNlPTEyIC0gSWYgcm9sbG9mZiBpcyAnbG9nYXJpdGhtaWMnLCB0aGUgc291bmQgd2lsbCBzdG9wIGF0dGVudWF0aW5nIGF0IHRoaXMgZGlzdGFuY2UuXHJcblx0XHQqIElmIHJvbGxvZmYgaXMgJ2xpbmVhcicgb3IgJ2Nvc2luZScsIHRoZSBzb3VuZCB3aWxsIGJlIHNpbGVudCBhdCB0aGlzIGRpc3RhbmNlLlxyXG5cdFx0KiBAcHJvcCB7c3RyaW5nfSByb2xsb2ZmPSdsb2dhcml0aG1pYycgLSBTZXQgdGhpcyB0byAnbGluZWFyJyBvciAnY29zaW5lJyBpZiB5b3Ugd2FudCB0byBjdXQgc291bmRzIG9mZiBhdCBhXHJcblx0XHQqIG1heERpc3RhbmNlLlxyXG5cdFx0Ki9cclxuXHRcdC8qKlxyXG5cdFx0KiBGaXJlZCB3aGVuIGEgc291bmQgaGFzIGxvYWRlZCBhbmQgaXMgcmVhZHkgdG8gYmUgcGxheWVkXHJcblx0XHQqIEBldmVudCBuYXRpdmUubi1zb3VuZCNuLXNvdW5kLWxvYWRlZFxyXG5cdFx0Ki9cclxuXHRcdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1zb3VuZCcsIHtcclxuXHRcdFx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLmRhdGEuc3JjO1xyXG5cdFx0XHRcdGlmIChzcmMgJiYgIXNyYy5zdGFydHNXaXRoKCdodHRwJykpIHtcclxuXHRcdFx0XHRcdGlmIChzcmMuc3RhcnRzV2l0aCgnLycpKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGF0YS5zcmMgPSBsb2NhdGlvbi5vcmlnaW4gKyBzcmM7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0dmFyIGN1cnJQYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcblx0XHRcdFx0XHRcdGlmICghY3VyclBhdGguZW5kc1dpdGgoJy8nKSkge1xyXG5cdFx0XHRcdFx0XHRcdGN1cnJQYXRoID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKS5zbGljZSgwLCAtMSkuam9pbignLycpICsgJy8nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRoaXMuZGF0YS5zcmMgPSBsb2NhdGlvbi5vcmlnaW4gKyBjdXJyUGF0aCArIHNyYztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bmF0aXZlQ29tcG9uZW50SW5pdC5jYWxsKHRoaXMpO1xyXG5cdFx0XHR9LFxyXG5cdFxyXG5cdFx0XHQvKipcclxuXHRcdFx0KiBTdG9wIHRoZSBwbGF5aW5nIHNvdW5kLCBhbmQgcHJlc2VydmUgcG9zaXRpb24gaW4gY2xpcC5cclxuXHRcdFx0KiBAbWV0aG9kIG5hdGl2ZS5uLXNvdW5kI3BhdXNlU291bmRcclxuXHRcdFx0Ki9cclxuXHRcdFx0cGF1c2VTb3VuZDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGNhbGxDb21wb25lbnQuY2FsbCh0aGlzLCAncGF1c2UnKTtcclxuXHRcdFx0XHR0aGlzLmVsLmVtaXQoJ3NvdW5kLXBhdXNlZCcpO1xyXG5cdFx0XHR9LFxyXG5cdFxyXG5cdFx0XHQvKipcclxuXHRcdFx0KiBTdGFydCB0aGUgc291bmQgcGxheWluZy5cclxuXHRcdFx0KiBAbWV0aG9kIG5hdGl2ZS5uLXNvdW5kI3BsYXlTb3VuZFxyXG5cdFx0XHQqL1xyXG5cdFx0XHRwbGF5U291bmQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRjYWxsQ29tcG9uZW50LmNhbGwodGhpcywgJ3BsYXknKTtcclxuXHRcdFx0XHR0aGlzLmVsLmVtaXQoJ3NvdW5kLXBsYXllZCcpO1xyXG5cdFx0XHR9LFxyXG5cdFxyXG5cdFx0XHQvKipcclxuXHRcdFx0KiBKdW1wIHRvIGEgcG9zaXRpb24gaW4gdGhlIGNsaXAuXHJcblx0XHRcdCogQG1ldGhvZCBuYXRpdmUubi1zb3VuZCNzZWVrXHJcblx0XHRcdCogQHBhcmFtIHtudW1iZXJ9IHRpbWUgLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgdG8ganVtcCB0by5cclxuXHRcdFx0Ki9cclxuXHRcdFx0c2VlazogZnVuY3Rpb24gKHRpbWUpIHtcclxuXHRcdFx0XHRjYWxsQ29tcG9uZW50LmNhbGwodGhpcywgJ3NlZWsnLCB7dGltZTogdGltZX0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRyZW1vdmU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRuYXRpdmVDb21wb25lbnRSZW1vdmUuY2FsbCh0aGlzKTtcclxuXHRcdFx0XHRpZiAodGhpcy5wbGF5SGFuZGxlcikge1xyXG5cdFx0XHRcdCAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKG9sZERhdGEub24sIHRoaXMucGxheUhhbmRsZXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0dXBkYXRlOiBmdW5jdGlvbiAob2xkRGF0YSkge1xyXG5cdFx0XHRcdG5hdGl2ZUNvbXBvbmVudFVwZGF0ZS5jYWxsKHRoaXMsIG9sZERhdGEpO1xyXG5cdFx0XHRcdGlmICh0aGlzLnBsYXlIYW5kbGVyKSB7XHJcblx0XHRcdFx0ICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIob2xkRGF0YS5vbiwgdGhpcy5wbGF5SGFuZGxlcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICh0aGlzLmRhdGEub24pIHtcclxuXHRcdFx0XHQgIHRoaXMucGxheUhhbmRsZXIgPSB0aGlzLnBsYXlTb3VuZC5iaW5kKHRoaXMpO1xyXG5cdFx0XHRcdCAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZGF0YS5vbiwgdGhpcy5wbGF5SGFuZGxlcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzY2hlbWE6IHtcclxuXHRcdFx0XHRvbjogeyB0eXBlOiAnc3RyaW5nJyB9LFxyXG5cdFx0XHRcdHJlczogeyB0eXBlOiAnc3RyaW5nJyB9LFxyXG5cdFx0XHRcdHNyYzogeyB0eXBlOiAnc3RyaW5nJyB9LFxyXG5cdFx0XHRcdGxvb3A6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXHJcblx0XHRcdFx0dm9sdW1lOiB7IHR5cGU6ICdudW1iZXInLCBkZWZhdWx0OiAxIH0sXHJcblx0XHRcdFx0YXV0b3BsYXk6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXHJcblx0XHRcdFx0b25lc2hvdDogeyB0eXBlOiAnYm9vbGVhbicgfSxcclxuXHRcdFx0XHRzcGF0aWFsQmxlbmQ6IHsgdHlwZTogJ2Zsb2F0JywgZGVmYXVsdDogMSB9LFxyXG5cdFx0XHRcdHBpdGNoOiB7IHR5cGU6ICdmbG9hdCcsIGRlZmF1bHQ6IDEgfSxcclxuXHRcdFx0XHRtaW5EaXN0YW5jZTogeyB0eXBlOiAnZmxvYXQnLCBkZWZhdWx0OiAxIH0sXHJcblx0XHRcdFx0bWF4RGlzdGFuY2U6IHsgdHlwZTogJ2Zsb2F0JywgZGVmYXVsdDogMTIgfSxcclxuXHRcdFx0XHRyb2xsb2ZmOiB7IHR5cGU6ICdzdHJpbmcnLCBkZWZhdWx0OiAnbG9nYXJpdGhtaWMnIH0sXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFxyXG5cdH0pKCk7XHJcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gdGhpcyBmaWxlIGlzIGp1c3QgZm9yIGdvb2QgbWVhc3VyZS4gZGlkbid0IHdhbnQgbmF0aXZlLWNvbXBvbmVudHMgZ2V0dGluZyB0b28gY2x1dHRlcmVkLlxyXG5cdFxyXG5cdC8qKlxyXG5cdCogVGhpcyBuYW1lc3BhY2UgZGVzY3JpYmVzIHN0cmluZ3MgdGhhdCBhcmUgdmFsaWQgaW5wdXRzIHRvIHRoZSB2YXJpb3VzIG5hdGl2ZVxyXG5cdCogY29tcG9uZW50cy4gU29tZSBjb21wb25lbnRzIGNhbiBvbmx5IHRha2UgY2VydGFpbiB0eXBlcyBvZiByZXNvdXJjZXMsIGkuZS5cclxuXHQqIHtAbGluayBuLm4tc3Bhd25lcn0gY2FuIG9ubHkgYWNjZXB0IGBpbnRlcmFjdGFibGVzYC5cclxuXHQqIEBuYW1lc3BhY2UgcmVzb3VyY2VzXHJcblx0KiBAZXhhbXBsZSA8YS1lbnRpdHkgbi1vYmplY3Q9J3JlczogYXJjaGl0ZWN0dXJlL2NlaWxpbmctMnctMmwnPjwvYS1lbnRpdHk+XHJcblx0Ki9cclxuXHRcclxuXHQvKipcclxuXHQqIEdlbmVyaWMgbW9kdWxhciBidWlsZGluZyBwaWVjZXMuIEFsbCBwaWVjZXMgYXJlIGFsaWduZWQgdG8gb25lIGNvcm5lciwgc3VjaCB0aGF0XHJcblx0KiB0aGUgcGllY2UgZXh0ZW5kcyBvdXQgdG93YXJkIC1YIGFuZCArWi5cclxuXHQqIEBuYW1lIGFyY2hpdGVjdHVyZVxyXG5cdCogQGVudW0gYXJjaGl0ZWN0dXJlXHJcblx0KiBAbWVtYmVyb2YgcmVzb3VyY2VzXHJcblx0KlxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctMnctMmxcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS9jZWlsaW5nLTR3LTRsXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvY2VpbGluZy00dy00bFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctc2t5bGlnaHQtNHctNGxcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS9jZWlsaW5nLXNreWxpZ2h0LWNvcm5lci0ydy0ybFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctc2t5bGlnaHQtZWRnZS0yd1xyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctc2t5bGlnaHQtZWRnZS00d1xyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctc2t5bGlnaHQtZmlsbGVyLTR3LTRsLTJcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS9jZWlsaW5nLXNreWxpZ2h0LWZpbGxlci00dy00bFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctc2xpY2UtY29uY2F2ZS0yclxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctc2xpY2UtY29uY2F2ZS00clxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2NlaWxpbmctc2xpY2UtY29udmV4LTJyXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvY2VpbGluZy1zbGljZS1jb252ZXgtNHJcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS9kb29yLTR3LTRoXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvZmxvb3ItMnctMmxcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS9mbG9vci0ydy00bFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2Zsb29yLTR3LTJsXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvZmxvb3ItNHctNGxcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS9mbG9vci1zbGljZS1jb25jYXZlLTJyXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvZmxvb3Itc2xpY2UtY29uY2F2ZS00clxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2Zsb29yLXNsaWNlLWNvbnZleC0yclxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL2Zsb29yLXNsaWNlLWNvbnZleC00clxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3JhaWxpbmctMmxcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS9yYWlsaW5nLTRsXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvcmFpbGluZy1jdXJ2ZS1jb25jYXZlLTJyXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC0ydy00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtNHctNGhcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWJhc2UtMndcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWJhc2UtNHdcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWJhc2UtY3VydmUtY29uY2F2ZS0yclxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtYmFzZS1jdXJ2ZS1jb25jYXZlLTRyXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC1iYXNlLWN1cnZlLWNvbnZleC0yclxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtYmFzZS1jdXJ2ZS1jb252ZXgtNHJcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWJ1bGtoZWFkLTJ3XHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC1idWxraGVhZC00d1xyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtYnVsa2hlYWQtY3VydmUtY29uY2F2ZS0yclxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtYnVsa2hlYWQtY3VydmUtY29uY2F2ZS00clxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtYnVsa2hlYWQtY3VydmUtY29udmV4LTJyXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC1idWxraGVhZC1jdXJ2ZS1jb252ZXgtNHJcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWN1cnZlLWNvbmNhdmUtMnItNGhcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWN1cnZlLWNvbmNhdmUtNHItNGhcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWN1cnZlLWNvbnZleC0yci00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtY3VydmUtY29udmV4LTRyLTRoXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC1jdXJ2ZS13aW5kb3ctY29uY2F2ZS00ci00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtY3VydmUtd2luZG93LWNvbmNhdmUtZmlsbGVyLTRyLTRoXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC1jdXJ2ZS13aW5kb3ctZ2FwLWNvbmNhdmUtNHItNGhcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLWN1cnZlLXdpbmRvdy1nYXAtZW5kLWwtY29uY2F2ZS00ci00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtY3VydmUtd2luZG93LWdhcC1lbmQtci1jb25jYXZlLTRyLTRoXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC1maWxsZXItY29ybmVyLWlubmVyLTRoXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC1maWxsZXItY29ybmVyLW91dGVyLTRoXHJcblx0KiBAcHJvcCBhcmNoaXRlY3R1cmUvd2FsbC13aW5kb3ctNHctNGhcclxuXHQqIEBwcm9wIGFyY2hpdGVjdHVyZS93YWxsLXdpbmRvdy1maWxsZXItMlxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtd2luZG93LWdhcC0ydy00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtd2luZG93LWdhcC00dy00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtd2luZG93LWdhcC1lbmQtbC0ydy00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtd2luZG93LWdhcC1lbmQtbC00dy00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtd2luZG93LWdhcC1lbmQtci0ydy00aFxyXG5cdCogQHByb3AgYXJjaGl0ZWN0dXJlL3dhbGwtd2luZG93LWdhcC1lbmQtci00dy00aFxyXG5cdCovXHJcblx0XHJcblx0LyoqXHJcblx0KiBQYXJ0aWNsZSBzeXN0ZW1zIGFuZCBvdGhlciBuYXRpdmUgZWZmZWN0c1xyXG5cdCogQG5hbWUgZWZmZWN0c1xyXG5cdCogQGVudW0gZWZmZWN0c1xyXG5cdCogQG1lbWJlcm9mIHJlc291cmNlc1xyXG5cdCpcclxuXHQqIEBwcm9wIGVmZmVjdHMvZXhwbG9zaW9uIC0gQSBwYXJ0aWNsZSBzeXN0ZW0gd2l0aCBhIGNlbnRyYWwgZmxhc2gsIHRoZW4gZGVicmlzIGZseWluZyBvdXR3YXJkLlxyXG5cdCogVGhpcyBpcyBhIG5vbi1sb29waW5nIGVmZmVjdC5cclxuXHQqIEBwcm9wIGVmZmVjdHMvZmlyZSAtIEFuIGFuaW1hdGVkIGZpcmUgcGFydGljbGUsIHN1aXRhYmxlIGZvciBhIHRvcmNoLlxyXG5cdCogQHByb3AgZWZmZWN0cy9maXJlLXRyYWlsIC0gRmlyZSB0aGF0IHRyYWlscyB0aGUgZW50aXR5IHRocm91Z2ggc3BhY2UgYXMgaXQgbW92ZXMuIE9ubHkgaXMgdmlzaWJsZSB3aGlsZSBhbiBvYmplY3QgaXMgaW4gbW90aW9uXHJcblx0KiBAcHJvcCBlZmZlY3RzL2ZpcmV3b3JrcyAtIEEgY29tcG91bmQgcGFydGljbGUgc3lzdGVtIHRoYXQgc2hvb3RzIHVwIGZyb20gdGhlIGVudGl0eSxcclxuXHQqIGV4cGxvZGVzIGludG8gY29sb3JlZCBzcGFya3MsIHRoZW4gdHJhbnNpdGlvbnMgdG8gZ29sZCBzdHJlYW1lcnMuXHJcblx0KiBAcHJvcCBlZmZlY3RzL3Ntb2tlIC0gQmlsbG93aW5nIHNtb2tlIHBhcnRpY2xlIHN5c3RlbS5cclxuXHQqIEBwcm9wIGVmZmVjdHMvc3BhcmtsZXIgLSBFbWl0cyBzcGFya3MgaW4gYWxsIGRpcmVjdGlvbnNcclxuXHQqIEBwcm9wIGVmZmVjdHMvc3RlYW0gLSBTbWFsbCB3aGl0ZSBzdGVhbSByaXNpbmcgdXB3YXJkc1xyXG5cdCovXHJcblx0XHJcblx0LyoqXHJcblx0KiBPYmplY3RzIHRoYXQgY2FuIGJlIHBpY2tlZCB1cCwgdGhyb3duLCBhbmQgb3RoZXJ3aXNlIGludGVyYWN0ZWQgd2l0aC5cclxuXHQqIEBuYW1lIGludGVyYWN0YWJsZXNcclxuXHQqIEBlbnVtIGludGVyYWN0YWJsZXNcclxuXHQqIEBtZW1iZXJvZiByZXNvdXJjZXNcclxuXHQqXHJcblx0KiBAcHJvcCBpbnRlcmFjdGFibGVzL2Jhc2tldGJhbGxcclxuXHQqIEBwcm9wIGludGVyYWN0YWJsZXMvYm93bGluZ2JhbGxcclxuXHQqIEBwcm9wIGludGVyYWN0YWJsZXMvYm93bGluZy1waW5cclxuXHQqIEBwcm9wIGludGVyYWN0YWJsZXMvYm94XHJcblx0KiBAcHJvcCBpbnRlcmFjdGFibGVzL2NvaW5cclxuXHQqIEBwcm9wIGludGVyYWN0YWJsZXMvZ2VtXHJcblx0KiBAcHJvcCBpbnRlcmFjdGFibGVzL3JpbmdcclxuXHQqIEBwcm9wIGludGVyYWN0YWJsZXMvc29jY2VyYmFsbFxyXG5cdCovXHJcblx0XHJcblx0LyoqXHJcblx0KiBTdGF0aWMgbW9kZWxzIHRoYXQgeW91IGNhbiBwbGFjZSBpbiB5b3VyIHNjZW5lLlxyXG5cdCogQG5hbWUgb2JqZWN0c1xyXG5cdCogQGVudW0gb2JqZWN0c1xyXG5cdCogQG1lbWJlcm9mIHJlc291cmNlc1xyXG5cdCpcclxuXHQqIEBwcm9wIG9iamVjdHMvYmFza2V0YmFsbC1ob29wXHJcblx0KiBAcHJvcCBvYmplY3RzL2NvaW5cclxuXHQqIEBwcm9wIG9iamVjdHMvY3VwXHJcblx0KiBAcHJvcCBvYmplY3RzL2dlbVxyXG5cdCogQHByb3Agb2JqZWN0cy9ob29wXHJcblx0KiBAcHJvcCBvYmplY3RzL3JpbmdcclxuXHQqIEBwcm9wIG9iamVjdHMvdGFyZ2V0LWFyY2hlcnlcclxuXHQqL1xyXG5cdFxyXG5cdC8qKlxyXG5cdCogQSBzZWxlY3Rpb24gb2YgcGlwZXMvY2h1dGVzL2V0Yy5cclxuXHQqIEBuYW1lIHBpcGVzXHJcblx0KiBAZW51bSBwaXBlc1xyXG5cdCogQG1lbWJlcm9mIHJlc291cmNlc1xyXG5cdCpcclxuXHQqIEBwcm9wIHBpcGVzL3BpcGUtZnVsbC1jYXAtMWRcclxuXHQqIEBwcm9wIHBpcGVzL3BpcGUtZnVsbC1jcm9zcy0xZFxyXG5cdCogQHByb3AgcGlwZXMvcGlwZS1mdWxsLWVsYm93LTFkXHJcblx0KiBAcHJvcCBwaXBlcy9waXBlLWZ1bGwtZm9yay0xZFxyXG5cdCogQHByb3AgcGlwZXMvcGlwZS1mdWxsLXN0cmFpZ2h0LTFkLTFsXHJcblx0KiBAcHJvcCBwaXBlcy9waXBlLWZ1bGwtc3RyYWlnaHQtMWQtMmxcclxuXHQqIEBwcm9wIHBpcGVzL3BpcGUtZnVsbC1zdHJhaWdodC0xZC00bFxyXG5cdCogQHByb3AgcGlwZXMvcGlwZS1mdWxsLXRlZS0xZFxyXG5cdCogQHByb3AgcGlwZXMvcGlwZS1oYWxmLWNhcC0xZFxyXG5cdCogQHByb3AgcGlwZXMvcGlwZS1oYWxmLWNyb3NzLTFkXHJcblx0KiBAcHJvcCBwaXBlcy9waXBlLWhhbGYtZWxib3ctMWRcclxuXHQqIEBwcm9wIHBpcGVzL3BpcGUtaGFsZi1mb3JrLTFkXHJcblx0KiBAcHJvcCBwaXBlcy9waXBlLWhhbGYtc3RyYWlnaHQtMWQtMWxcclxuXHQqIEBwcm9wIHBpcGVzL3BpcGUtaGFsZi1zdHJhaWdodC0xZC0ybFxyXG5cdCogQHByb3AgcGlwZXMvcGlwZS1oYWxmLXN0cmFpZ2h0LTFkLTRsXHJcblx0KiBAcHJvcCBwaXBlcy9waXBlLWhhbGYtdGVlLTFkXHJcblx0Ki9cclxuXHRcclxuXHQvKipcclxuXHQqIENvbW1vbiBVSSBzb3VuZHMgY2FuIGJlIHVzZWQgZm9yIGEgY29uc2lzdGVudCBVSSBleHBlcmllbmNlLlxyXG5cdCogQG5hbWUgc291bmRzLXVpXHJcblx0KiBAZW51bSBzb3VuZHMtdWlcclxuXHQqIEBtZW1iZXJvZiByZXNvdXJjZXNcclxuXHQqXHJcblx0KiBAcHJvcCB1aS9zZWxlY3RcclxuXHQqIEBwcm9wIHVpL3RvZ2dsZVxyXG5cdCogQHByb3AgdWkvbm90aWZ5XHJcblx0KiBAcHJvcCB1aS9lcnJvclxyXG5cdCogQHByb3AgdWkvY29tcGxldGVcclxuXHQqIEBwcm9wIHVpL3N1Y2NlZWRcclxuXHQqIEBwcm9wIHVpL292ZXJcclxuXHQqIEBwcm9wIHVpL2pvaW5cclxuXHQqIEBwcm9wIHVpL2NsaWNrXHJcblx0Ki9cclxuXHRcclxuXHQvKipcclxuXHQqIEZvbGV5IHNvdW5kcyBhcmUgcmVhbCBzb3VuZHMgZGVzaWduZWQgZm9yIHRhbmdpYmxlLCB0b3VjaGFibGUgb2JqZWN0cyBhcyB0aGV5IGFyZSBoZWFyZCBpbiB0aGUgcmVhbCB3b3JsZC5cclxuXHQqIEBuYW1lIHNvdW5kcy1mb2xleVxyXG5cdCogQGVudW0gc291bmRzLWZvbGV5XHJcblx0KiBAbWVtYmVyb2YgcmVzb3VyY2VzXHJcblx0KlxyXG5cdCogQHByb3AgZm9sZXkvbWV0YWwtc2NyYXBlXHJcblx0KiBAcHJvcCBmb2xleS9tZXRhbC1jbGFja1xyXG5cdCogQHByb3AgZm9sZXkvbWV0YWwtcmF0dGxlXHJcblx0KiBAcHJvcCBmb2xleS9jb2luLWppbmdsZVxyXG5cdCogQHByb3AgZm9sZXkvcGFwZXItc2h1ZmZsZVxyXG5cdCogQHByb3AgZm9sZXkvZXhwbG9kZVxyXG5cdCovXHJcblx0XHJcblx0LyoqXHJcblx0KiBFZmZlY3Qgc291bmRzIGZvciBhIHZhcmlldHkgb2YgdXNlIGNhc2VzLlxyXG5cdCogQG5hbWUgc291bmRzLWVmZmVjdHNcclxuXHQqIEBlbnVtIHNvdW5kcy1lZmZlY3RzXHJcblx0KiBAbWVtYmVyb2YgcmVzb3VyY2VzXHJcblx0KlxyXG5cdCogQHByb3AgZWZmZWN0cy9mYW5mYXJlLXN1Y2NlZWQgLSBUaGUgXCJzdWNjZXNzIVwiIHNvdW5kIGZyb20gSG9sb2dyYW1zIEFnYWluc3QgSHVtYW5pdHkuXHJcblx0KiBAcHJvcCBlZmZlY3RzL2ZhbmZhcmUtc3RhcnQgLSBUaGUgXCJHYW1lIGhhcyBzdGFydGVkIVwiIHNvdW5kIGZyb20gSGFILlxyXG5cdCogQHByb3AgZWZmZWN0cy9mYW5mYXJlLWZhaWxcclxuXHQqIEBwcm9wIGVmZmVjdHMvdGltZXItMTBzIC0gYSAxMCBzZWNvbmQgdGltZXIgdGhhdCB0cmlnZ2VycyBhIGJlbGwgYXQgZXhhY3RseSAxMCBzZWNvbmRzLlxyXG5cdCogVGhlIGJlbGwgbGFzdHMgZm9yIDIgc2Vjb25kcy4gVGhpcyBhbGxvd3MgZm9yIHRpbWVyIGxlbmd0aCBjaGFuZ2VzLlxyXG5cdCogQHByb3AgZWZmZWN0cy9nYWluLWNvaW5cclxuXHQqL1xyXG5cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxyXG5cdCogU3luYyB0aGUgY29sb3IgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBiZXR3ZWVuIGNsaWVudHMuXHJcblx0KiBSZXF1aXJlcyBib3RoIGEge0BsaW5rIHN5bmMuc3luYy1zeXN0ZW19IGNvbXBvbmVudCBvbiB0aGUgYGEtc2NlbmVgLCBhbmQgYVxyXG5cdCoge0BsaW5rIHN5bmMuc3luY30gY29tcG9uZW50IG9uIHRoZSB0YXJnZXQgZW50aXR5LlxyXG5cdCogQG1peGluIHN5bmMtY29sb3JcclxuXHQqIEBtZW1iZXJvZiBzeW5jXHJcblx0Ki9cclxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3N5bmMtY29sb3InLFxyXG5cdHtcclxuXHRcdGRlcGVuZGVuY2llczogWydzeW5jJ10sXHJcblx0XHRzY2hlbWE6IHtcclxuXHRcdH0sXHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBjb21wb25lbnQgPSB0aGlzO1xyXG5cdFx0XHR2YXIgc3luYyA9IGNvbXBvbmVudC5lbC5jb21wb25lbnRzLnN5bmM7XHJcblx0XHRcdGlmKHN5bmMuaXNDb25uZWN0ZWQpIHN0YXJ0KCk7IGVsc2UgY29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3RlZCcsIHN0YXJ0KTtcclxuXHRcclxuXHRcdFx0ZnVuY3Rpb24gc3RhcnQoKXtcclxuXHRcdFx0XHR2YXIgY29sb3JSZWYgPSBzeW5jLmRhdGFSZWYuY2hpbGQoJ21hdGVyaWFsL2NvbG9yJyk7XHJcblx0XHJcblx0XHRcdFx0dmFyIHJlZkNoYW5nZWRMb2NrZWQgPSBmYWxzZTtcclxuXHRcclxuXHRcdFx0XHR2YXIgZmlyc3RWYWx1ZSA9IHRydWU7XHJcblx0XHJcblx0XHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvbmVudGNoYW5nZWQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdFx0XHRcdHZhciBuYW1lID0gZXZlbnQuZGV0YWlsLm5hbWU7XHJcblx0XHRcdFx0XHR2YXIgb2xkRGF0YSA9IGV2ZW50LmRldGFpbC5vbGREYXRhO1xyXG5cdFx0XHRcdFx0dmFyIG5ld0RhdGEgPSBldmVudC5kZXRhaWwubmV3RGF0YTtcclxuXHRcclxuXHRcdFx0XHRcdGlmIChuYW1lICE9PSAnbWF0ZXJpYWwnKSByZXR1cm47XHJcblx0XHRcdFx0XHRpZiAocmVmQ2hhbmdlZExvY2tlZCkgcmV0dXJuO1xyXG5cdFxyXG5cdFx0XHRcdFx0aWYgKG9sZERhdGEuY29sb3IgIT09IG5ld0RhdGEuY29sb3IpIHtcclxuXHRcdFx0XHRcdFx0aWYoc3luYy5pc01pbmUpe1xyXG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7Ly9Gb3Igc29tZSByZWFzb24gQS1GcmFtZSBoYXMgYSBtaXNjb25maWd1cmVkIG1hdGVyaWFsIHJlZmVyZW5jZSBpZiB3ZSBkbyB0aGlzIHRvbyBlYXJseVxyXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3JSZWYuc2V0KG5ld0RhdGEuY29sb3IpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0Y29sb3JSZWYub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcblx0XHRcdFx0XHRpZiAoc3luYy5pc01pbmUgJiYgIWZpcnN0VmFsdWUpIHJldHVybjtcclxuXHRcdFx0XHRcdHZhciBjb2xvciA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFxyXG5cdFx0XHRcdFx0cmVmQ2hhbmdlZExvY2tlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsICdjb2xvcicsIGNvbG9yKTtcclxuXHRcdFx0XHRcdHJlZkNoYW5nZWRMb2NrZWQgPSBmYWxzZTtcclxuXHRcclxuXHRcdFx0XHRcdGZpcnN0VmFsdWUgPSBmYWxzZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxyXG5cdCogU3luY2hyb25pemUgdGhlIHBsYXliYWNrIHN0YXRlIG9mIGFuIHtAbGluayBuLm4tc291bmR9IGNvbXBvbmVudCBiZXR3ZWVuIGNsaWVudHMuXHJcblx0KiBSZXF1aXJlcyBib3RoIGEge0BsaW5rIHN5bmMuc3luYy1zeXN0ZW19IGNvbXBvbmVudCBvbiB0aGUgYGEtc2NlbmVgLCBhbmQgYVxyXG5cdCoge0BsaW5rIHN5bmMuc3luY30gY29tcG9uZW50IG9uIHRoZSB0YXJnZXQgZW50aXR5LlxyXG5cdCogQG1peGluIHN5bmMtbi1zb3VuZFxyXG5cdCogQG1lbWJlcm9mIHN5bmNcclxuXHQqL1xyXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc3luYy1uLXNvdW5kJyxcclxuXHR7XHJcblx0XHRkZXBlbmRlbmNpZXM6IFsnc3luYyddLFxyXG5cdFx0c2NoZW1hOiB7IH0sXHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBjb21wb25lbnQgPSB0aGlzO1xyXG5cdFx0XHR2YXIgc3luYyA9IGNvbXBvbmVudC5lbC5jb21wb25lbnRzLnN5bmM7XHJcblx0XHRcdHZhciBzY2VuZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Etc2NlbmUnKTtcclxuXHRcdFx0dmFyIHN5bmNTeXMgPSBzY2VuZS5zeXN0ZW1zWydzeW5jLXN5c3RlbSddO1xyXG5cdFx0XHRpZihzeW5jLmlzQ29ubmVjdGVkKSBzdGFydCgpOyBlbHNlIGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0ZWQnLCBzdGFydCk7XHJcblx0XHJcblx0XHRcdGZ1bmN0aW9uIHN0YXJ0KCl7XHJcblx0XHRcdFx0Y29tcG9uZW50LnNvdW5kU3RhdGVSZWYgPSBzeW5jLmRhdGFSZWYuY2hpbGQoJ3NvdW5kL3N0YXRlJyk7XHJcblx0XHRcdFx0Y29tcG9uZW50LnNvdW5kRXZlbnRSZWYgPSBzeW5jLmRhdGFSZWYuY2hpbGQoJ3NvdW5kL2V2ZW50Jyk7XHJcblx0XHJcblx0XHRcdFx0ZnVuY3Rpb24gc2VuZEV2ZW50KGV2ZW50KSB7XHJcblx0XHRcdFx0XHRpZiAoIXN5bmMuaXNNaW5lKSByZXR1cm47XHJcblx0XHRcdFx0XHR2YXIgZXZlbnQgPSB7XHJcblx0XHRcdFx0XHRcdHR5cGU6IGV2ZW50LnR5cGUsXHJcblx0XHRcdFx0XHRcdHNlbmRlcjogc3luY1N5cy5jbGllbnRJZCxcclxuXHRcdFx0XHRcdFx0ZWw6IGNvbXBvbmVudC5lbC5pZCxcclxuXHRcdFx0XHRcdFx0dGltZTogRGF0ZS5ub3coKVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdGNvbXBvbmVudC5zb3VuZEV2ZW50UmVmLnNldChldmVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFxyXG5cdFx0XHRcdGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdzb3VuZC1wbGF5ZWQnLCBzZW5kRXZlbnQpO1xyXG5cdFx0XHRcdGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdzb3VuZC1wYXVzZWQnLCBzZW5kRXZlbnQpO1xyXG5cdFxyXG5cdFx0XHRcdGNvbXBvbmVudC5zb3VuZEV2ZW50UmVmLm9uKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG5cdFx0XHRcdFx0aWYgKHN5bmMuaXNNaW5lKSByZXR1cm47XHJcblx0XHRcdFx0XHR2YXIgZXZlbnQgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRcdGlmICghZXZlbnQpIHJldHVybjtcclxuXHRcdFx0XHRcdGlmIChldmVudC5lbCA9PT0gY29tcG9uZW50LmVsLmlkKSB7XHJcblx0XHRcdFx0XHRcdHZhciBzb3VuZCA9IGNvbXBvbmVudC5lbC5jb21wb25lbnRzWyduLXNvdW5kJ107XHJcblx0XHRcdFx0XHRcdGlmIChldmVudC50eXBlID09PSAnc291bmQtcGxheWVkJykge1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLnBsYXlTb3VuZCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLnBhdXNlU291bmQoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFxyXG5cdFx0XHRcdGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb25lbnRjaGFuZ2VkJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRpZiAoIXN5bmMuaXNNaW5lKSByZXR1cm47XHJcblx0XHRcdFx0XHR2YXIgbmFtZSA9IGV2ZW50LmRldGFpbC5uYW1lO1xyXG5cdFx0XHRcdFx0aWYgKG5hbWUgIT09ICduLXNvdW5kJykgcmV0dXJuO1xyXG5cdFx0XHRcdFx0Y29tcG9uZW50LnNvdW5kU3RhdGVSZWYuc2V0KGV2ZW50LmRldGFpbC5uZXdEYXRhKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcclxuXHRcdFx0XHRjb21wb25lbnQuc291bmRTdGF0ZVJlZi5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuXHRcdFx0XHRcdGlmIChzeW5jLmlzTWluZSkgcmV0dXJuO1xyXG5cdFx0XHRcdFx0dmFyIHN0YXRlID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0XHRpZiAoIXN0YXRlKSByZXR1cm47XHJcblx0XHRcdFx0XHRjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKCduLXNvdW5kJywgc3RhdGUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMuc291bmRTdGF0ZVJlZi5vZmYoJ3ZhbHVlJyk7XHJcblx0XHRcdHRoaXMuc291bmRFdmVudFJlZi5vZmYoJ3ZhbHVlJyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXHJcblx0KiBDb25uZWN0IHRvIGEgcmVtb3RlIEZpcmViYXNlIHNlcnZlciwgYW5kIGZhY2lsaXRhdGUgc3luY2hyb25pemF0aW9uLiBUaGVzZVxyXG5cdCogb3B0aW9ucyBjb3JyZXNwb25kIGV4YWN0bHkgd2l0aCB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvclxyXG5cdCogW2FsdHNwYWNlLnV0aWxpdGllcy5zeW5jLmNvbm5lY3Rde0BsaW5rIGh0dHA6Ly9hbHRzcGFjZXZyLmdpdGh1Yi5pby9BbHRzcGFjZVNESy9kb2MvbW9kdWxlLWFsdHNwYWNlX3V0aWxpdGllc19zeW5jLmh0bWwjLmNvbm5lY3R9LlxyXG5cdCogVGhpcyBjb21wb25lbnQgbXVzdCBiZSBwcmVzZW50IG9uIGBhLXNjZW5lYCBmb3IgYW55IG90aGVyIHN5bmMgY29tcG9uZW50cyB0byB3b3JrLlxyXG5cdCogQG1lbWJlcm9mIHN5bmNcclxuXHQqIEBtaXhpbiBzeW5jLXN5c3RlbVxyXG5cdCogQHByb3Age3N0cmluZ30gYXV0aG9yIC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgeW91IG9yIHlvdXIgb3JnYW5pemF0aW9uLlxyXG5cdCogQHByb3Age3N0cmluZ30gYXBwIC0gVGhlIG5hbWUgb2YgdGhlIGFwcC5cclxuXHQqIEBwcm9wIHtzdHJpbmd9IHJlZlVybCAtIE92ZXJyaWRlIHRoZSBiYXNlIHJlZmVyZW5jZS4gU2V0IHRoaXMgdG8gdXNlIHlvdXIgb3duIEZpcmViYXNlLlxyXG5cdCogQHByb3Age3N0cmluZ30gaW5zdGFuY2UgLSBPdmVycmlkZSB0aGUgaW5zdGFuY2UgSUQuIENhbiBhbHNvIGJlIG92ZXJyaWRkZW4gd2l0aFxyXG5cdCogYSBVUkwgcGFyYW1ldGVyLlxyXG5cdCovXHJcblx0QUZSQU1FLnJlZ2lzdGVyU3lzdGVtKCdzeW5jLXN5c3RlbScsXHJcblx0e1xyXG5cdFx0c2NoZW1hOiB7XHJcblx0XHRcdGF1dGhvcjogeyB0eXBlOiAnc3RyaW5nJywgZGVmYXVsdDogbnVsbCB9LFxyXG5cdFx0XHRhcHA6IHsgdHlwZTogJ3N0cmluZycsIGRlZmF1bHQ6IG51bGwgfSxcclxuXHRcdFx0aW5zdGFuY2U6IHsgdHlwZTogJ3N0cmluZycsIGRlZmF1bHQ6IG51bGwgfSxcclxuXHRcdFx0cmVmVXJsOiB7IHR5cGU6ICdzdHJpbmcnLCBkZWZhdWx0OiBudWxsIH1cclxuXHRcdH0sXHJcblx0XHRpbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNvbXBvbmVudCA9IHRoaXM7XHJcblx0XHJcblx0XHRcdGlmKCF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5hcHApe1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignVGhlIHN5bmMtc3lzdGVtIG11c3QgYmUgcHJlc2VudCBvbiB0aGUgc2NlbmUgYW5kIGNvbmZpZ3VyZWQgd2l0aCByZXF1aXJlZCBkYXRhLicpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFxyXG5cdFx0XHRjb21wb25lbnQuaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuXHRcdFx0Y29uc29sZS5sb2codGhpcy5kYXRhKTtcclxuXHRcdFx0YWx0c3BhY2UudXRpbGl0aWVzLnN5bmMuY29ubmVjdCh7XHJcblx0XHRcdFx0YXV0aG9ySWQ6IHRoaXMuZGF0YS5hdXRob3IsXHJcblx0XHRcdFx0YXBwSWQ6IHRoaXMuZGF0YS5hcHAsXHJcblx0XHRcdFx0aW5zdGFuY2VJZDogdGhpcy5kYXRhLmluc3RhbmNlLFxyXG5cdFx0XHRcdGJhc2VSZWZVcmw6IHRoaXMuZGF0YS5yZWZVcmxcclxuXHRcdFx0fSkudGhlbihmdW5jdGlvbihjb25uZWN0aW9uKSB7XHJcblx0XHRcdFx0dGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcclxuXHRcclxuXHRcdFx0XHR0aGlzLnNjZW5lUmVmID0gdGhpcy5jb25uZWN0aW9uLmluc3RhbmNlLmNoaWxkKCdzY2VuZScpO1xyXG5cdFx0XHRcdHRoaXMuY2xpZW50c1JlZiA9IHRoaXMuY29ubmVjdGlvbi5pbnN0YW5jZS5jaGlsZCgnY2xpZW50cycpO1xyXG5cdFxyXG5cdFx0XHRcdC8vIHRlbXBvcmFyeSB3YXkgb2YgaGF2aW5nIHVuaXF1ZSBpZGVudGlmaWVycyBmb3IgZWFjaCBjbGllbnRcclxuXHRcdFx0XHR0aGlzLmNsaWVudElkID0gdGhpcy5zY2VuZUVsLm9iamVjdDNELnV1aWQ7XHJcblx0XHRcdFx0dmFyIG1hc3RlckNsaWVudElkO1xyXG5cdFx0XHRcdHRoaXMuY2xpZW50c1JlZi5vbihcInZhbHVlXCIsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG5cdFx0XHRcdFx0dmFyIGNsaWVudElkcyA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFxyXG5cdFx0XHRcdFx0dmFyIG1hc3RlckNsaWVudEtleSA9IE9iamVjdC5rZXlzKGNsaWVudElkcylbMF07XHJcblx0XHRcdFx0XHRtYXN0ZXJDbGllbnRJZCA9IGNsaWVudElkc1ttYXN0ZXJDbGllbnRLZXldO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFxyXG5cdFx0XHRcdHRoaXMuY2xpZW50c1JlZi5vbignY2hpbGRfYWRkZWQnLCBmdW5jdGlvbihjaGlsZFNuYXBzaG90KSB7XHJcblx0XHRcdFx0XHR2YXIgam9pbmVkQ2xpZW50SWQgPSBjaGlsZFNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdFx0Ly9sZXQgdGhlIG1hc3RlciBjbGllbnQgZmxhZyBnZXQgc2V0IGZpcnN0XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdGNvbXBvbmVudC5zY2VuZUVsLmVtaXQoJ2NsaWVudGpvaW5lZCcsIHtpZDogam9pbmVkQ2xpZW50SWR9LCBmYWxzZSk7XHJcblx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcclxuXHRcdFx0XHR0aGlzLmNsaWVudHNSZWYub24oJ2NoaWxkX3JlbW92ZWQnLCBmdW5jdGlvbihjaGlsZFNuYXBzaG90KSB7XHJcblx0XHRcdFx0XHR2YXIgbGVmdENsaWVudElkID0gY2hpbGRTbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRcdC8vbGV0IHRoZSBtYXN0ZXIgY2xpZW50IGZsYWcgZ2V0IHNldCBmaXJzdFxyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRjb21wb25lbnQuc2NlbmVFbC5lbWl0KCdjbGllbnRsZWZ0Jywge2lkOiBsZWZ0Q2xpZW50SWR9LCBmYWxzZSk7XHJcblx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcclxuXHRcdFx0XHQvLyBhZGQgb3VyIGNsaWVudCBJRCB0byB0aGUgbGlzdCBvZiBjb25uZWN0ZWQgY2xpZW50cyxcclxuXHRcdFx0XHQvLyBidXQgaGF2ZSBpdCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYnkgZmlyZWJhc2UgaWYgd2UgZGlzY29ubmVjdCBmb3IgYW55IHJlYXNvblxyXG5cdFx0XHRcdHRoaXMuY2xpZW50c1JlZi5wdXNoKHRoaXMuY2xpZW50SWQpLm9uRGlzY29ubmVjdCgpLnJlbW92ZSgpO1xyXG5cdFxyXG5cdFxyXG5cdFx0XHRcdHRoaXMuY29ubmVjdGlvbi5pbnN0YW5jZS5jaGlsZCgnaW5pdGlhbGl6ZWQnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG5cdFx0XHRcdFx0dmFyIHNob3VsZEluaXRpYWxpemUgPSAhc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0XHRzbmFwc2hvdC5yZWYoKS5zZXQodHJ1ZSk7XHJcblx0XHJcblx0XHRcdFx0XHRjb21wb25lbnQuc2NlbmVFbC5lbWl0KCdjb25uZWN0ZWQnLCB7IHNob3VsZEluaXRpYWxpemU6IHNob3VsZEluaXRpYWxpemUgfSwgZmFsc2UpO1xyXG5cdFx0XHRcdFx0Y29tcG9uZW50LmlzQ29ubmVjdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xyXG5cdFxyXG5cdFxyXG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnaXNNYXN0ZXJDbGllbnQnLCB7XHJcblx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hc3RlckNsaWVudElkID09PSB0aGlzLmNsaWVudElkOyB9LmJpbmQodGhpcylcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvL1RPRE86IFdlIG5lZWQgdG8gZmlndXJlIG91dCBhIHdheSB0byByZWNpZXZlIG91ciBmaXJzdCB1cGRhdGUgd2l0aG91dCBjYXJpbmcgYWJvdXQgb3duZXJzaGlwLlxyXG5cdC8vIGZpcnN0VmFsdWUgaXMgcHJvYmFibHkgbm90IHRoZSByaWdodCB3YXkgdG8gZ28sIHByb2JhYmx5IHNvbWV0aGluZyBhYm91dCBoYXZpbmcgc2VudCB5ZXQuIE5lZWQgdG8gY2hhbmdlIGZvciBib3RoXHJcblx0XHJcblx0LyoqXHJcblx0KiBTeW5jaHJvbml6ZSB0aGUgcG9zaXRpb24sIHJvdGF0aW9uLCBhbmQgc2NhbGUgb2YgdGhpcyBvYmplY3Qgd2l0aCBhbGwgY2xpZW50cy5cclxuXHQqIFJlcXVpcmVzIGJvdGggYSB7QGxpbmsgc3luYy5zeW5jLXN5c3RlbX0gY29tcG9uZW50IG9uIHRoZSBgYS1zY2VuZWAsIGFuZCBhXHJcblx0KiB7QGxpbmsgc3luYy5zeW5jfSBjb21wb25lbnQgb24gdGhlIHRhcmdldCBlbnRpdHkuXHJcblx0KiBAbWl4aW4gc3luYy10cmFuc2Zvcm1cclxuXHQqIEBtZW1iZXJvZiBzeW5jXHJcblx0Ki9cclxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3N5bmMtdHJhbnNmb3JtJyxcclxuXHR7XHJcblx0XHRkZXBlbmRlbmNpZXM6IFsnc3luYyddLFxyXG5cdFx0c2NoZW1hOiB7XHJcblx0XHR9LFxyXG5cdFx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgY29tcG9uZW50ID0gdGhpcztcclxuXHRcdFx0dmFyIHN5bmMgPSBjb21wb25lbnQuZWwuY29tcG9uZW50cy5zeW5jO1xyXG5cdFx0XHRpZihzeW5jLmlzQ29ubmVjdGVkKSBzdGFydCgpOyBlbHNlIGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0ZWQnLCBzdGFydCk7XHJcblx0XHJcblx0XHRcdGZ1bmN0aW9uIHN0YXJ0KCl7XHJcblx0XHJcblx0XHRcdFx0dmFyIHBvc2l0aW9uUmVmID0gc3luYy5kYXRhUmVmLmNoaWxkKCdwb3NpdGlvbicpO1xyXG5cdFx0XHRcdHZhciByb3RhdGlvblJlZiA9IHN5bmMuZGF0YVJlZi5jaGlsZCgncm90YXRpb24nKTtcclxuXHRcdFx0XHR2YXIgc2NhbGVSZWYgPSBzeW5jLmRhdGFSZWYuY2hpbGQoJ3NjYWxlJyk7XHJcblx0XHJcblx0XHRcdFx0Y29tcG9uZW50LnVwZGF0ZVJhdGUgPSAxMDA7XHJcblx0XHJcblx0XHRcdFx0dmFyIHN0b3BwZWRBbmltYXRpb25zID0gW107XHJcblx0XHRcdFx0Ly9wYXVzZSBhbGwgYW5pbWF0aW9ucyBvbiBvd25lcnNoaXAgbG9zc1xyXG5cdFx0XHRcdGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdvd25lcnNoaXBsb3N0JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR2YXIgY2hpbGRyZW4gPSBjb21wb25lbnQuZWwuY2hpbGRyZW47XHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdHZhciB0YWdOYW1lID0gY2hpbGRyZW5baV0udGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRcdFx0XHRpZiAodGFnTmFtZSA9PT0gXCJhLWFuaW1hdGlvblwiKSB7XHJcblx0XHRcdFx0XHRcdFx0c3RvcHBlZEFuaW1hdGlvbnMucHVzaChjaGlsZHJlbltpXSk7XHJcblx0XHRcdFx0XHRcdFx0Y2hpbGRyZW5baV0uc3RvcCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ293bmVyc2hpcGdhaW5lZCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3RvcHBlZEFuaW1hdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0dmFyIGFuaW1hdGlvbiA9IHN0b3BwZWRBbmltYXRpb25zW2ldO1xyXG5cdFx0XHRcdFx0XHRhbmltYXRpb24uc3RhcnQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHN0b3BwZWRBbmltYXRpb25zID0gW107XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0ZnVuY3Rpb24gb25UcmFuc2Zvcm0oc25hcHNob3QsIGNvbXBvbmVudE5hbWUpIHtcclxuXHRcdFx0XHRcdGlmIChzeW5jLmlzTWluZSkgcmV0dXJuO1xyXG5cdFxyXG5cdFx0XHRcdFx0dmFyIHZhbHVlID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0XHRpZiAoIXZhbHVlKSByZXR1cm47XHJcblx0XHJcblx0XHRcdFx0XHRjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKGNvbXBvbmVudE5hbWUsIHZhbHVlKTtcclxuXHRcdFx0XHR9XHJcblx0XHJcblx0XHRcdFx0cG9zaXRpb25SZWYub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcblx0XHRcdFx0XHRvblRyYW5zZm9ybShzbmFwc2hvdCwgJ3Bvc2l0aW9uJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0cm90YXRpb25SZWYub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcblx0XHRcdFx0XHRvblRyYW5zZm9ybShzbmFwc2hvdCwgJ3JvdGF0aW9uJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0c2NhbGVSZWYub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcblx0XHRcdFx0XHRvblRyYW5zZm9ybShzbmFwc2hvdCwgJ3NjYWxlJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0dmFyIHNlbmRQb3NpdGlvbiA9IHRocm90dGxlKGZ1bmN0aW9uKHZhbHVlKXtcclxuXHRcdFx0XHRcdHBvc2l0aW9uUmVmLnNldCh2YWx1ZSk7XHJcblx0XHRcdFx0fSwgY29tcG9uZW50LnVwZGF0ZVJhdGUpO1xyXG5cdFxyXG5cdFx0XHRcdHZhciBzZW5kUm90YXRpb24gPSB0aHJvdHRsZShmdW5jdGlvbih2YWx1ZSl7XHJcblx0XHRcdFx0XHRyb3RhdGlvblJlZi5zZXQodmFsdWUpO1xyXG5cdFx0XHRcdH0sIGNvbXBvbmVudC51cGRhdGVSYXRlKTtcclxuXHRcclxuXHRcdFx0XHR2YXIgc2VuZFNjYWxlID0gdGhyb3R0bGUoZnVuY3Rpb24odmFsdWUpe1xyXG5cdFx0XHRcdFx0c2NhbGVSZWYuc2V0KHZhbHVlKTtcclxuXHRcdFx0XHR9LCBjb21wb25lbnQudXBkYXRlUmF0ZSk7XHJcblx0XHJcblx0XHRcdFx0ZnVuY3Rpb24gb25Db21wb25lbnRDaGFuZ2VkKGV2ZW50KXtcclxuXHRcdFx0XHRcdGlmICghc3luYy5pc01pbmUpIHJldHVybjtcclxuXHRcclxuXHRcdFx0XHRcdHZhciBuYW1lID0gZXZlbnQuZGV0YWlsLm5hbWU7XHJcblx0XHRcdFx0XHR2YXIgbmV3RGF0YSA9IGV2ZW50LmRldGFpbC5uZXdEYXRhO1xyXG5cdFxyXG5cdFx0XHRcdFx0aWYgKG5hbWUgPT09ICdwb3NpdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0c2VuZFBvc2l0aW9uKG5ld0RhdGEpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChuYW1lID09PSAncm90YXRpb24nKSB7XHJcblx0XHRcdFx0XHRcdHNlbmRSb3RhdGlvbihuZXdEYXRhKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAobmFtZSA9PT0gJ3NjYWxlJykge1xyXG5cdFx0XHRcdFx0XHRzZW5kU2NhbGUobmV3RGF0YSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHJcblx0XHRcdFx0fVxyXG5cdFxyXG5cdFx0XHRcdC8vZnJvbSB1bmRlcnNjb3JlLmpzXHJcblx0XHRcdFx0ZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xyXG5cdFx0XHRcdFx0dmFyIHRpbWVvdXQsIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcclxuXHRcdFx0XHRcdHZhciBwcmV2aW91cyA9IDA7XHJcblx0XHRcdFx0XHRpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcclxuXHRcclxuXHRcdFx0XHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0ICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogRGF0ZS5ub3coKTtcclxuXHRcdFx0XHRcdCAgdGltZW91dCA9IG51bGw7XHJcblx0XHRcdFx0XHQgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0XHRcdFx0XHQgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcclxuXHRcdFx0XHRcdHZhciB0aHJvdHRsZWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcblx0XHRcdFx0XHQgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XHJcblx0XHRcdFx0XHQgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcclxuXHRcdFx0XHRcdCAgY29udGV4dCA9IHRoaXM7XHJcblx0XHRcdFx0XHQgIGFyZ3MgPSBhcmd1bWVudHM7XHJcblx0XHRcdFx0XHQgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XHJcblx0XHRcdFx0XHRcdGlmICh0aW1lb3V0KSB7XHJcblx0XHRcdFx0XHRcdCAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHRcdFx0XHQgIHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHByZXZpb3VzID0gbm93O1xyXG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuXHRcdFx0XHRcdCAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcclxuXHRcdFx0XHRcdCAgfVxyXG5cdFx0XHRcdFx0ICByZXR1cm4gcmVzdWx0O1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcclxuXHRcdFx0XHRcdHRocm90dGxlZC5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHRcdFx0ICBwcmV2aW91cyA9IDA7XHJcblx0XHRcdFx0XHQgIHRpbWVvdXQgPSBjb250ZXh0ID0gYXJncyA9IG51bGw7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFxyXG5cdFx0XHRcdFx0cmV0dXJuIHRocm90dGxlZDtcclxuXHRcdFx0XHQgIH07XHJcblx0XHJcblx0XHJcblx0XHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvbmVudGNoYW5nZWQnLCBvbkNvbXBvbmVudENoYW5nZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblxuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxyXG5cdCogRW5hYmxlcyB0aGUgc3luY2hyb25pemF0aW9uIG9mIHByb3BlcnRpZXMgb2YgZW50aXRpZXMuIEFsbCBwcm9wZXJ0eSBzeW5jIGNvbXBvbmVudHNcclxuXHQqIHJlcXVpcmUgYm90aCBhIHtAbGluayBzeW5jLnN5bmMtc3lzdGVtfSBvbiBgYS1zY2VuZWAsIGFuZCBhIHtAbGluayBzeW5jLnN5bmN9XHJcblx0KiBvbiB0aGUgZW50aXR5IHRvIGJlIHN5bmNlZC5cclxuXHQqIEBuYW1lIHN5bmNcclxuXHQqIEBuYW1lc3BhY2Ugc3luY1xyXG5cdCogQGV4YW1wbGVcclxuXHQqIDxhLXNjZW5lIHN5bmMtc3lzdGVtPSdhcHA6IGV4YW1wbGUgc3luYzsgYXV0aG9yOiBhbHRzcGFjZXZyJz5cclxuXHQqICAgPGEtZW50aXR5IHN5bmM9J293bk9uOiBjdXJzb3Jkb3duJyBzeW5jLWNvbG9yPjwvYS1lbnRpdHk+XHJcblx0KiA8L2Etc2NlbmU+XHJcblx0Ki9cclxuXHRcclxuXHRcclxuXHRcclxuXHQvKipcclxuXHQqIEVuYWJsZXMgdGhlIHN5bmNocm9uaXphdGlvbiBvZiBwcm9wZXJ0aWVzIG9mIHRoZSBlbnRpdHkuIE11c3QgYmUgdXNlZCBpblxyXG5cdCogY29uanVjdGlvbiB3aXRoIHRoZSB7QGxpbmsgc3luYy5zeW5jLXN5c3RlbX0gY29tcG9uZW50IGFuZCBhIGNvbXBvbmVudCBmb3IgYVxyXG5cdCogc3BlY2lmaWMgcHJvcGVydHkgKGUuZy4ge0BsaW5rIHN5bmMuc3luYy10cmFuc2Zvcm19KS5cclxuXHQqIEBtZW1iZXJvZiBzeW5jXHJcblx0KiBAbWl4aW4gc3luY1xyXG5cdCogQHByb3Age3N0cmluZ30gb3duT24gLSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQsIG9yIGEgbGlzdCBvZiBldmVudHMsIHRoYXRcclxuXHQqIHdpbGwgY2F1c2UgdGhlIGxvY2FsIGNsaWVudCB0byB0YWtlIG93bmVyc2hpcCBvZiB0aGlzIG9iamVjdC4gVGhpcyBmaWVsZFxyXG5cdCogY2Fubm90IGJlIHVwZGF0ZWQgYWZ0ZXIgaW5pdGlhbGl6YXRpb24uXHJcblx0Ki9cclxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3N5bmMnLFxyXG5cdHtcclxuXHRcdHNjaGVtYToge1xyXG5cdFx0XHRtb2RlOiB7IGRlZmF1bHQ6ICdsaW5rJyB9LFxyXG5cdFx0XHRvd25PbjogeyB0eXBlOiAnc3RyaW5nJyB9IC8vY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgY3JlYXRpb25cclxuXHRcdH0sXHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBzY2VuZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Etc2NlbmUnKTtcclxuXHRcdFx0dmFyIHN5bmNTeXMgPSBzY2VuZS5zeXN0ZW1zWydzeW5jLXN5c3RlbSddO1xyXG5cdFxyXG5cdFx0XHR2YXIgcmVmO1xyXG5cdFx0XHR2YXIga2V5O1xyXG5cdFx0XHR2YXIgZGF0YVJlZjtcclxuXHRcdFx0dmFyIG93bmVyUmVmO1xyXG5cdFx0XHR2YXIgb3duZXJJZDtcclxuXHRcdFx0dmFyIGlzTWluZSA9IGZhbHNlO1xyXG5cdFxyXG5cdFx0XHR2YXIgY29tcG9uZW50ID0gdGhpcztcclxuXHRcclxuXHRcdFx0Y29tcG9uZW50LmlzQ29ubmVjdGVkID0gZmFsc2U7XHJcblx0XHJcblx0XHRcdGlmKHN5bmNTeXMuaXNDb25uZWN0ZWQpIHN0YXJ0KCk7IGVsc2Ugc2NlbmUuYWRkRXZlbnRMaXN0ZW5lcignY29ubmVjdGVkJywgc3RhcnQpO1xyXG5cdFxyXG5cdFxyXG5cdFx0XHRpZihjb21wb25lbnQuZGF0YS5vd25PbilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBvd25lcnNoaXBFdmVudHMgPSBjb21wb25lbnQuZGF0YS5vd25Pbi5zcGxpdCgvWyAsXSsvKTtcclxuXHRcdFx0XHRmb3IodmFyIGkgPSAwLCBtYXggPSBvd25lcnNoaXBFdmVudHMubGVuZ3RoOyBpIDwgbWF4OyBpKyspe1xyXG5cdFx0XHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIob3duZXJzaGlwRXZlbnRzW2ldLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRpZihjb21wb25lbnQuaXNDb25uZWN0ZWQpe1xyXG5cdFx0XHRcdFx0XHRcdGNvbXBvbmVudC50YWtlT3duZXJzaGlwKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFxyXG5cdFx0XHRmdW5jdGlvbiBzdGFydCgpe1xyXG5cdFx0XHRcdC8vTWFrZSBzdXJlIHNvbWVvbmUgYWx3YXlzIG93bnMgYW4gb2JqZWN0LiBJZiB0aGUgb3duZXIgbGVhdmVzIGFuZCB3ZSBhcmUgdGhlIG1hc3RlciBjbGllbnQsIHdlIHdpbGwgdGFrZSBpdC5cclxuXHRcdFx0XHQvL1RoaXMgZW5zdXJlcywgZm9yIGV4YW1wbGUsIHRoYXQgc3luY2VkIGFuaW1hdGlvbnMga2VlcCBwbGF5aW5nXHJcblx0XHRcdFx0c2NlbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpZW50bGVmdCcsIGZ1bmN0aW9uKGV2ZW50KXtcclxuXHRcdFx0XHRcdHZhciBzaG91bGRUYWtlT3duZXJzaGlwID0gKCFvd25lcklkIHx8IG93bmVySWQgPT09IGV2ZW50LmRldGFpbC5pZCkgJiYgc3luY1N5cy5pc01hc3RlckNsaWVudDtcclxuXHRcclxuXHRcdFx0XHRcdGlmKHNob3VsZFRha2VPd25lcnNoaXApIGNvbXBvbmVudC50YWtlT3duZXJzaGlwKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHJcblx0XHRcdFx0aWYgKGNvbXBvbmVudC5kYXRhLm1vZGUgPT09ICdsaW5rJykge1xyXG5cdFx0XHRcdFx0dmFyIGlkID0gY29tcG9uZW50LmVsLmlkO1xyXG5cdFx0XHRcdFx0aWYgKCFpZCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdFbnRpdGllcyBjYW5ub3QgYmUgc3luY2VkIHVzaW5nIGxpbmsgbW9kZSB3aXRob3V0IGFuIGlkLicpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnc3luY1N5czogJyArIHN5bmNTeXMpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3N5bmNTeXMuc2NlbmVSZWY6ICcgKyBzeW5jU3lzLnNjZW5lUmVmKTtcclxuXHRcclxuXHRcdFx0XHRcdGxpbmsoc3luY1N5cy5zY2VuZVJlZi5jaGlsZChpZCkpO1xyXG5cdFx0XHRcdFx0c2V0dXBSZWNlaXZlKCk7XHJcblx0XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1Vuc3VwcG9ydGVkIHN5bmMgbW9kZTogJyArIGNvbXBvbmVudC5kYXRhLm1vZGUpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcclxuXHRcdFx0XHRjb21wb25lbnQuaXNDb25uZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGNvbXBvbmVudC5lbC5lbWl0KCdjb25uZWN0ZWQnLCBudWxsLCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcclxuXHRcdFx0ZnVuY3Rpb24gbGluayhlbnRpdHlSZWYpIHtcclxuXHRcdFx0XHRyZWYgPSBlbnRpdHlSZWY7XHJcblx0XHRcdFx0a2V5ID0gcmVmLmtleSgpO1xyXG5cdFx0XHRcdGRhdGFSZWYgPSByZWYuY2hpbGQoJ2RhdGEnKTtcclxuXHRcdFx0XHRjb21wb25lbnQuZGF0YVJlZiA9IGRhdGFSZWY7XHJcblx0XHRcdFx0b3duZXJSZWYgPSByZWYuY2hpbGQoJ293bmVyJyk7XHJcblx0XHRcdH1cclxuXHRcclxuXHRcdFx0ZnVuY3Rpb24gc2V0dXBSZWNlaXZlKCkge1xyXG5cdFxyXG5cdFx0XHRcdC8vaWYgbm9ib2R5IGhhcyBvd25lZCB0aGUgb2JqZWN0IHlldCwgd2Ugd2lsbC5cclxuXHRcdFx0XHRvd25lclJlZi50cmFuc2FjdGlvbihmdW5jdGlvbiAob3duZXIpIHtcclxuXHRcdFx0XHRcdGlmIChvd25lcikgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcclxuXHRcdFx0XHRcdG93bmVyUmVmLm9uRGlzY29ubmVjdCgpLnNldChudWxsKTtcclxuXHRcdFx0XHRcdHJldHVybiBzeW5jU3lzLmNsaWVudElkO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFxyXG5cdFx0XHRcdG93bmVyUmVmLm9uKCd2YWx1ZScsXHJcblx0XHRcdFx0XHRmdW5jdGlvbihzbmFwc2hvdCkge1xyXG5cdFx0XHRcdFx0XHR2YXIgbmV3T3duZXJJZCA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHR2YXIgZ2FpbmVkID0gbmV3T3duZXJJZCA9PT0gc3luY1N5cy5jbGllbnRJZCAmJiAhaXNNaW5lO1xyXG5cdFx0XHRcdFx0XHRpZiAoZ2FpbmVkKSBjb21wb25lbnQuZWwuZW1pdCgnb3duZXJzaGlwZ2FpbmVkJywgbnVsbCwgZmFsc2UpO1xyXG5cdFxyXG5cdFxyXG5cdFx0XHRcdFx0XHQvL25vdGUgdGhpcyBhbHNvIGZpcmVzIHdoZW4gd2Ugc3RhcnQgdXAgd2l0aG91dCBvd25lcnNoaXBcclxuXHRcdFx0XHRcdFx0dmFyIGxvc3QgPSBuZXdPd25lcklkICE9PSBzeW5jU3lzLmNsaWVudElkICYmIGlzTWluZTtcclxuXHRcdFx0XHRcdFx0aWYgKGxvc3Qpe1xyXG5cdFx0XHRcdFx0XHRcdGNvbXBvbmVudC5lbC5lbWl0KCdvd25lcnNoaXBsb3N0JywgbnVsbCwgZmFsc2UpO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRcdC8vd2Ugbm8gbG9uZ2VyIGhhdmUgdG8gY2xlYXIgb3VyIG93bmVyc2hpcCB3aGVuIHdlIGRpc2Nvbm5lY3RcclxuXHRcdFx0XHRcdFx0XHRvd25lclJlZi5vbkRpc2Nvbm5lY3QoKS5jYW5jZWwoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFxyXG5cdFx0XHRcdFx0XHRvd25lcklkID0gbmV3T3duZXJJZDtcclxuXHRcclxuXHRcdFx0XHRcdFx0aXNNaW5lID0gbmV3T3duZXJJZCA9PT0gc3luY1N5cy5jbGllbnRJZDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHJcblx0XHRcdC8qKlxyXG5cdFx0XHQqIFRlbGwgc3luYyB0byBzdGFydCBwdXNoaW5nIGxvY2FsIHByb3BlcnR5IHZhbHVlcyBpbnN0ZWFkIG9mIHVwZGF0aW5nXHJcblx0XHRcdCogbG9jYWwgZnJvbSByZW1vdGUgdmFsdWVzLlxyXG5cdFx0XHQqIEBtZXRob2Qgc3luYy5zeW5jI3Rha2VPd25lcnNoaXBcclxuXHRcdFx0Ki9cclxuXHRcdFx0Y29tcG9uZW50LnRha2VPd25lcnNoaXAgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRvd25lclJlZi5zZXQoc3luY1N5cy5jbGllbnRJZCk7XHJcblx0XHJcblx0XHRcdFx0Ly9jbGVhciBvdXIgb3duZXJzaGlwIGlmIHdlIGRpc2Nvbm5lY3RcclxuXHRcdFx0XHQvL3RoaXMgaXMgbmVlZGVkIGlmIHdlIGFyZSB0aGUgbGFzdCB1c2VyIGluIHRoZSByb29tLCBidXQgd2UgZXhwZWN0IHBlb3BsZSB0byBqb2luIGxhdGVyXHJcblx0XHRcdFx0b3duZXJSZWYub25EaXNjb25uZWN0KCkuc2V0KG51bGwpO1xyXG5cdFx0XHR9XHJcblx0XHJcblx0XHRcdC8qKlxyXG5cdFx0XHQqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzeW5jIG93bmVyc2hpcCBpcyB5b3Vycy5cclxuXHRcdFx0KiBAbWVtYmVyIHN5bmMuc3luYyNpc01pbmVcclxuXHRcdFx0KiBAcmVhZG9ubHlcclxuXHRcdFx0Ki9cclxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbXBvbmVudCwgJ2lzTWluZScsIHtcclxuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdHJldHVybiBpc01pbmU7Ly9UT0RPOiBTaG91bGQgdGhpcyBiZSBzdGF0ZSBpbnN0ZWFkP1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxyXG5cdCAqIFRoZSB3aXJlIGNvbXBvbmVudCBhbGxvd3MgeW91IHRvIHRyaWdnZXIgYW4gZXZlbnQgb24gYW5vdGhlciBlbnRpdHkgd2hlbiBhbiBldmVudCBvY2N1cnMgb24gYW4gZW50aXR5XHJcblx0ICogQG1peGluIHdpcmVcclxuXHQgKiBAcHJvcGVydHkge3N0cmluZ30gb24gTmFtZSBvZiBhbiBldmVudCB0byBsaXN0ZW4gdG9cclxuXHQgKiBAcHJvcGVydHkge3N0cmluZ30gZ2FpbmVkIE5hbWUgb2YgYSBzdGF0ZSB0byB3YXRjaCBmb3JcclxuXHQgKiBAcHJvcGVydHkge3N0cmluZ30gbG9zdCBOYW1lIG9mIGEgc3RhdGUgdG8gd2F0Y2ggZm9yXHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGVtaXQgTmFtZSBvZiBhbiBldmVudCB0byB0cmlnZ2VyIG9uIHRoZSB0YXJnZXRzXHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGdhaW4gTmFtZSBvZiBhIHN0YXRlIHRvIGFkZCBvbiB0aGUgdGFyZ2V0XHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGxvc2UgTmFtZSBvZiBhIHN0YXRlIHRvIHJlbW92ZSBvbiB0aGUgdGFyZ2V0XHJcblx0ICogQHByb3BlcnR5IHtzZWxlY3Rvcn0gdGFyZ2V0cyBBIHNlbGVjdG9yIHRvIHBpY2sgd2hpY2ggb2JqZWN0cyB0byB3aXJlIHRvXHJcblx0ICogQHByb3BlcnR5IHtzZWxlY3Rvcn0gdGFyZ2V0IC0gQSBzZWxlY3RvciB0byBwaWNrIGEgc2luZ2xlIG9iamVjdCB0byB3aXJlIHRvXHJcblx0ICoqL1xyXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnd2lyZScsXHJcblx0e1xyXG5cdFx0bXVsdGlwbGU6IHRydWUsXHJcblx0XHRzY2hlbWE6IHtcclxuXHRcdFx0b246IHt0eXBlOiAnc3RyaW5nJ30sXHJcblx0XHRcdGVtaXQ6IHt0eXBlOiAnc3RyaW5nJ30sXHJcblx0XHRcdGdhaW5lZDoge3R5cGU6ICdzdHJpbmcnfSxcclxuXHRcdFx0bG9zdDoge3R5cGU6ICdzdHJpbmcnfSxcclxuXHRcdFx0Z2Fpbjoge3R5cGU6ICdzdHJpbmcnfSxcclxuXHRcdFx0bG9zZToge3R5cGU6ICdzdHJpbmcnfSxcclxuXHRcdFx0dGFyZ2V0czoge3R5cGU6ICdzZWxlY3RvckFsbCd9LFxyXG5cdFx0XHR0YXJnZXQ6IHt0eXBlOiAnc2VsZWN0b3InfVxyXG5cdFx0fSxcclxuXHRcdHVwZGF0ZTogZnVuY3Rpb24gKG9sZERhdGEpIHtcclxuXHRcdFx0aWYgKG9sZERhdGEub24pIHtcclxuXHRcdFx0XHR0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIob2xkRGF0YS5vbiwgdGhpcy5hY3RPblRhcmdldHMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChvbGREYXRhLmdhaW5lZCkge1xyXG5cdFx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RhdGVhZGRlZCcsIHRoaXMuYWN0T25UYXJnZXRzSWZTdGF0ZU1hdGNoZXMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChvbGREYXRhLmxvc3QpIHtcclxuXHRcdFx0XHR0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0YXRlcmVtb3ZlZCcsIHRoaXMuYWN0T25UYXJnZXRzSWZTdGF0ZU1hdGNoZXMpO1xyXG5cdFx0XHR9XHJcblx0XHJcblx0XHRcdHRoaXMuYWN0T25UYXJnZXRzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGZ1bmN0aW9uIGFjdChlbCkge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuZGF0YS5lbWl0KSB7XHJcblx0XHRcdFx0XHRcdGVsLmVtaXQodGhpcy5kYXRhLmVtaXQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuZGF0YS5nYWluKSB7XHJcblx0XHRcdFx0XHRcdGVsLmFkZFN0YXRlKHRoaXMuZGF0YS5nYWluKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICh0aGlzLmRhdGEubG9zZSkge1xyXG5cdFx0XHRcdFx0XHRlbC5yZW1vdmVTdGF0ZSh0aGlzLmRhdGEubG9zZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRoaXMuZGF0YS50YXJnZXRzKSB0aGlzLmRhdGEudGFyZ2V0cy5mb3JFYWNoKGFjdC5iaW5kKHRoaXMpKTtcclxuXHRcdFx0XHRpZih0aGlzLmRhdGEudGFyZ2V0KSBhY3QuY2FsbCh0aGlzLCB0aGlzLmRhdGEudGFyZ2V0KTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpO1xyXG5cdFxyXG5cdFx0XHR0aGlzLmFjdE9uVGFyZ2V0c0lmU3RhdGVNYXRjaGVzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdFx0dmFyIHN0YXRlID0gZXZlbnQuZGV0YWlsLnN0YXRlO1xyXG5cdFx0XHRcdGlmIChzdGF0ZSA9PT0gdGhpcy5kYXRhLmdhaW5lZCB8fCBzdGF0ZSA9PT0gdGhpcy5kYXRhLmxvc3QpIHtcclxuXHRcdFx0XHRcdHRoaXMuYWN0T25UYXJnZXRzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LmJpbmQodGhpcyk7XHJcblx0XHJcblx0XHRcdGlmICh0aGlzLmRhdGEub24pIHtcclxuXHRcdFx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5kYXRhLm9uLCB0aGlzLmFjdE9uVGFyZ2V0cyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuZGF0YS5nYWluZWQpIHtcclxuXHRcdFx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlYWRkZWQnLCB0aGlzLmFjdE9uVGFyZ2V0c0lmU3RhdGVNYXRjaGVzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5kYXRhLmxvc3QpIHtcclxuXHRcdFx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlcmVtb3ZlZCcsIHRoaXMuYWN0T25UYXJnZXRzSWZTdGF0ZU1hdGNoZXMpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmRhdGEub24sIHRoaXMuYWN0T25UYXJnZXRzKTtcclxuXHRcdFx0dGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdGF0ZWFkZGVkJywgdGhpcy5hY3RPblRhcmdldHNJZlN0YXRlTWF0Y2hlcyk7XHJcblx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RhdGVyZW1vdmVkJywgdGhpcy5hY3RPblRhcmdldHNJZlN0YXRlTWF0Y2hlcyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBhZnJhbWUtYWx0c3BhY2UtY29tcG9uZW50Lm1pbi5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgNGM1ZDg4N2Q2NWY5ZGE5ZWY4MGRcbiAqKi8iLCJpZiAodHlwZW9mIEFGUkFNRSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBvbmVudCBhdHRlbXB0ZWQgdG8gcmVnaXN0ZXIgYmVmb3JlIEFGUkFNRSB3YXMgYXZhaWxhYmxlLicpO1xyXG59XHJcblxyXG5yZXF1aXJlKCcuL2FsdHNwYWNlJyk7XHJcbnJlcXVpcmUoJy4vYWx0c3BhY2UtY3Vyc29yLWNvbGxpZGVyJyk7XHJcbnJlcXVpcmUoJy4vYWx0c3BhY2UtdHJhY2tlZC1jb250cm9scycpO1xyXG5yZXF1aXJlKCcuL25hdGl2ZS1jb21wb25lbnRzJyk7XHJcbnJlcXVpcmUoJy4vbmF0aXZlLXJlc291cmNlcycpO1xyXG5yZXF1aXJlKCcuL3N5bmMnKTtcclxucmVxdWlyZSgnLi9zeW5jLXN5c3RlbScpO1xyXG5yZXF1aXJlKCcuL3N5bmMtdHJhbnNmb3JtJyk7XHJcbnJlcXVpcmUoJy4vc3luYy1jb2xvcicpO1xyXG5yZXF1aXJlKCcuL3N5bmMtbi1zb3VuZCcpO1xyXG5yZXF1aXJlKCcuL3dpcmUnKTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbigpe1xyXG5cclxuXHRmdW5jdGlvbiBzZXRDb2xsaWRlckZsYWcob2JqLCBzdGF0ZSkge1xyXG5cdFx0b2JqLnVzZXJEYXRhLmFsdHNwYWNlID0ge2NvbGxpZGVyOiB7ZW5hYmxlZDogc3RhdGV9fTtcclxuXHRcdG9iai50cmF2ZXJzZShmdW5jdGlvbiAob2JqKSB7XHJcblx0XHRcdGlmIChvYmogaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XHJcblx0XHRcdFx0b2JqLnVzZXJEYXRhLmFsdHNwYWNlID0ge2NvbGxpZGVyOiB7ZW5hYmxlZDogc3RhdGV9fTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCogRW5hYmxlIG9yIGRpc2FibGUgY3Vyc29yIGNvbGxpc2lvbiBvbiB0aGUgb2JqZWN0LlxyXG5cdCogQG1peGluIGFsdHNwYWNlLWN1cnNvci1jb2xsaWRlclxyXG5cdCogQG1lbWJlcm9mIGFsdHNwYWNlXHJcblx0KiBAcHJvcCB7Ym9vbGVhbn0gZW5hYmxlZD10cnVlIC0gVGhlIHN0YXRlIG9mIHRoZSBjdXJzb3IgY29sbGlkZXIuXHJcblx0Ki9cclxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FsdHNwYWNlLWN1cnNvci1jb2xsaWRlcicsIHtcclxuXHRcdHNjaGVtYTogeyBlbmFibGVkOiB7IGRlZmF1bHQ6IHRydWUgfSB9LFxyXG5cdFx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRzZXRDb2xsaWRlckZsYWcodGhpcy5lbC5vYmplY3QzRCwgdGhpcy5kYXRhLmVuYWJsZWQpO1xyXG5cdFx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVsLWxvYWRlZCcsIChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHNldENvbGxpZGVyRmxhZyh0aGlzLmVsLm9iamVjdDNELCB0aGlzLmRhdGEuZW5hYmxlZCk7XHJcblx0XHRcdH0pLmJpbmQodGhpcykpO1xyXG5cdFx0fSxcclxuXHRcdHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRzZXRDb2xsaWRlckZsYWcodGhpcy5lbC5vYmplY3QzRCwgdGhpcy5kYXRhLmVuYWJsZWQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoKTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9hbHRzcGFjZS1jdXJzb3ItY29sbGlkZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcclxuKiBFbmFibGVzIHRyYWNrZWQgY29udHJvbCBzdXBwb3J0IGZvciBBLUZyYW1lIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSB0aGUgYnVpbHQtaW5cclxuKiBgdHJhY2tlZC1jb250cm9sc2AsIGB2aXZlLWNvbnRyb2xzYCBvciBgaGFuZC1jb250cm9sc2AgY29tcG9uZW50cy5cclxuKiBAbWl4aW4gYWx0c3BhY2UtdHJhY2tlZC1jb250cm9sc1xyXG4qIEBtZW1iZXJvZiBhbHRzcGFjZVxyXG4qL1xyXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FsdHNwYWNlLXRyYWNrZWQtY29udHJvbHMnLCB7XHJcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdHRoaXMuZ2FtZXBhZEluZGV4ID0gbnVsbDtcclxuXHR0aGlzLnRyYWNrZWRDb250cm9sc1N5c3RlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Etc2NlbmUnKS5zeXN0ZW1zWyd0cmFja2VkLWNvbnRyb2xzJ107XHJcblx0dGhpcy5zeXN0ZW1HYW1lcGFkcyA9IDA7XHJcblx0YWx0c3BhY2UuZ2V0R2FtZXBhZHMoKTtcclxuICB9LFxyXG4gIHRpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHQgIGlmIChcclxuXHRcdHRoaXMudHJhY2tlZENvbnRyb2xzU3lzdGVtICYmXHJcblx0XHR0aGlzLnN5c3RlbUdhbWVwYWRzICE9PSB0aGlzLnRyYWNrZWRDb250cm9sc1N5c3RlbS5jb250cm9sbGVycy5sZW5ndGggJiZcclxuXHRcdHdpbmRvdy5hbHRzcGFjZSAmJiBhbHRzcGFjZS5nZXRHYW1lcGFkcyAmJiBhbHRzcGFjZS5nZXRHYW1lcGFkcygpLmxlbmd0aFxyXG5cdCAgKSB7XHJcblx0XHR2YXIgY29tcG9uZW50cyA9IHRoaXMuZWwuY29tcG9uZW50cztcclxuXHRcdGlmIChjb21wb25lbnRzWydwYWludC1jb250cm9scyddKSB7XHJcblx0XHQgIHRoaXMuZ2FtZXBhZEluZGV4ID0gY29tcG9uZW50c1sncGFpbnQtY29udHJvbHMnXS5kYXRhLmhhbmQgPT09ICdsZWZ0JyA/IDIgOiAxO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuZ2FtZXBhZEluZGV4ID09PSBudWxsICYmIGNvbXBvbmVudHNbJ2hhbmQtY29udHJvbHMnXSkge1xyXG5cdFx0ICB0aGlzLmdhbWVwYWRJbmRleCA9IGNvbXBvbmVudHNbJ2hhbmQtY29udHJvbHMnXS5kYXRhID09PSAnbGVmdCcgPyAyIDogMTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmdhbWVwYWRJbmRleCA9PT0gbnVsbCAmJiBjb21wb25lbnRzWyd2aXZlLWNvbnRyb2xzJ10pIHtcclxuXHRcdCAgdGhpcy5nYW1lcGFkSW5kZXggPSBjb21wb25lbnRzWyd2aXZlLWNvbnRyb2xzJ10uZGF0YS5oYW5kID09PSAnbGVmdCcgPyAyIDogMTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmdhbWVwYWRJbmRleCA9PT0gbnVsbCAmJiBjb21wb25lbnRzWyd0cmFja2VkLWNvbnRyb2xzJ10pIHtcclxuXHRcdCAgdGhpcy5nYW1lcGFkSW5kZXggPSBjb21wb25lbnRzWyd0cmFja2VkLWNvbnRyb2xzJ10uZGF0YS5jb250cm9sbGVyO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ3RyYWNrZWQtY29udHJvbHMnLCAnaWQnLCBhbHRzcGFjZS5nZXRHYW1lcGFkcygpW3RoaXMuZ2FtZXBhZEluZGV4XS5pZCk7XHJcblx0XHR0aGlzLmVsLnNldEF0dHJpYnV0ZSgndHJhY2tlZC1jb250cm9scycsICdjb250cm9sbGVyJywgMCk7XHJcblx0XHR0aGlzLnN5c3RlbUdhbWVwYWRzID0gdGhpcy50cmFja2VkQ29udHJvbHNTeXN0ZW0uY29udHJvbGxlcnMubGVuZ3RoO1xyXG5cdCAgfVxyXG4gIH1cclxufSk7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvYWx0c3BhY2UtdHJhY2tlZC1jb250cm9scy5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxyXG4qIEBuYW1lc3BhY2UgYWx0c3BhY2VcclxuKi9cclxuXHJcbi8qKlxyXG4qIFRoZSBhbHRzcGFjZSBjb21wb25lbnQgbWFrZXMgQS1GcmFtZSBhcHBzIGNvbXBhdGlibGUgd2l0aCBBbHRzcGFjZVZSLlxyXG4qXHJcbiogKipOb3RlKio6IElmIHlvdSB1c2UgdGhlIGBlbWJlZGRlZGAgQS1GcmFtZSBjb21wb25lbnQgb24geW91ciBzY2VuZSwgeW91IG11c3QgaW5jbHVkZSBpdCAqYmVmb3JlKiB0aGUgYGFsdHNwYWNlYCBjb21wb25lbnQsIG9yIHlvdXIgYXBwIHdpbGwgc2lsZW50bHkgZmFpbC5cclxuKiBAbWl4aW4gYWx0c3BhY2VcclxuKiBAbWVtYmVyb2YgYWx0c3BhY2VcclxuKiBAcHJvcGVydHkge2Jvb2xlYW59IHVzZVBpeGVsU2NhbGU9YGZhbHNlYCAtIEFsbG93cyB5b3UgdG8gdXNlIEEtRnJhbWUgdW5pdHMgYXMgQ1NTIHBpeGVscy5cclxuKiBUaGlzIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGZvciB0aHJlZS5qcyBhcHBzLCBidXQgbm90IGZvciBBLUZyYW1lIGFwcHMuXHJcbiogQHByb3BlcnR5IHtzdHJpbmd9IHZlcnRpY2FsQWxpZ249YG1pZGRsZWAgLSBQdXRzIHRoZSBvcmlnaW4gYXQgdGhlIGBib3R0b21gLCBgbWlkZGxlYCAoZGVmYXVsdCksXHJcbiogb3IgYHRvcGAgb2YgdGhlIEFsdHNwYWNlIGVuY2xvc3VyZS5cclxuKiBAcHJvcGVydHkge2Jvb2xlYW59IGVuY2xvc3VyZXNPbmx5PWB0cnVlYCAtIFByZXZlbnRzIHRoZSBzY2VuZSBmcm9tIGJlaW5nIGNyZWF0ZWQgaWZcclxuKiBlbmNsb3N1cmUgaXMgZmxhdC5cclxuKiBAcHJvcGVydHkge2Jvb2xlYW59IGZ1bGxzcGFjZT1gZmFsc2VgIC0gUHV0cyB0aGUgYXBwIGludG8gZnVsbHNwYWNlIG1vZGUuXHJcbipcclxuKiBAZXhhbXBsZVxyXG4qIDxoZWFkPlxyXG4qICAgPHRpdGxlPk15IEEtRnJhbWUgU2NlbmU8L3RpdGxlPlxyXG4qICAgPHNjcmlwdCBzcmM9XCJodHRwczovL2FmcmFtZS5pby9yZWxlYXNlcy8wLjMuMC9hZnJhbWUubWluLmpzXCI+PC9zY3JpcHQ+XHJcbiogICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuLnJhd2dpdC5jb20vQWx0c3BhY2VWUi9hZnJhbWUtYWx0c3BhY2UtY29tcG9uZW50L3ZBRlJBTUVfQUxUU1BBQ0VfVkVSU0lPTi9kaXN0L2FmcmFtZS1hbHRzcGFjZS1jb21wb25lbnQubWluLmpzXCI+PC9zY3JpcHQ+XHJcbiogPC9oZWFkPlxyXG4qIDxib2R5PlxyXG4qICAgPGEtc2NlbmUgYWx0c3BhY2U+XHJcbiogICAgIDxhLWVudGl0eSBnZW9tZXRyeT1cInByaW1pdGl2ZTogYm94XCIgbWF0ZXJpYWw9XCJjb2xvcjogI0MwMzU0NlwiPjwvYS1lbnRpdHk+XHJcbiogICA8L2Etc2NlbmU+XHJcbiogPC9ib2R5PlxyXG4qL1xyXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FsdHNwYWNlJywge1xyXG4gIHZlcnNpb246ICdBRlJBTUVfQUxUU1BBQ0VfVkVSU0lPTicsXHJcbiAgc2NoZW1hOiB7XHJcblx0dXNlUGl4ZWxTY2FsZTogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6ICdmYWxzZSd9LFxyXG5cdHZlcnRpY2FsQWxpZ246IHsgdHlwZTogJ3N0cmluZycsICBkZWZhdWx0OiAnbWlkZGxlJ30sXHJcblx0ZW5jbG9zdXJlc09ubHk6eyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6ICd0cnVlJ30sXHJcblx0ZnVsbHNwYWNlOiAgICAgeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6ICdmYWxzZSd9XHJcbiAgfSxcclxuXHJcbiAgLypcclxuICAgKiBDYWxsZWQgb25jZSB3aGVuIGNvbXBvbmVudCBpcyBhdHRhY2hlZC4gR2VuZXJhbGx5IGZvciBpbml0aWFsIHNldHVwLlxyXG4gICAqL1xyXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRpZiAoISh0aGlzLmVsLm9iamVjdDNEIGluc3RhbmNlb2YgVEhSRUUuU2NlbmUpKSB7XHJcblx0ICBjb25zb2xlLndhcm4oJ2FmcmFtZS1hbHRzcGFjZS1jb21wb25lbnQgY2FuIG9ubHkgYmUgYXR0YWNoZWQgdG8gYS1zY2VuZScpO1xyXG5cdCAgcmV0dXJuO1xyXG5cdH1cclxuXHJcblx0aWYgKHdpbmRvdy5hbHRzcGFjZSAmJiB3aW5kb3cuYWx0c3BhY2UuaW5DbGllbnQpIHtcclxuXHQgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCd2ci1tb2RlLXVpJywge2VuYWJsZWQ6IGZhbHNlfSk7XHJcblx0ICB0aGlzLmluaXRSZW5kZXJlcigpO1xyXG5cdCAgdGhpcy5pbml0Q3Vyc29yRXZlbnRzKCk7XHJcblx0ICB0aGlzLmluaXRDb2xsaXNpb25FdmVudHMoKTtcclxuXHR9IGVsc2Uge1xyXG5cdCAgY29uc29sZS53YXJuKCdhZnJhbWUtYWx0c3BhY2UtY29tcG9uZW50IG9ubHkgd29ya3MgaW5zaWRlIG9mIEFsdHNwYWNlVlInKTtcclxuXHR9XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qXHJcbiAgICogQ2FsbGVkIG9uIGV2ZXJ5IHNpbmdsZSB0aWNrIG9yIHJlbmRlciBsb29wIG9mIHRoZSBzY2VuZS5cclxuICAgKi9cclxuICB0aWNrOiBmdW5jdGlvbiAodCwgZHQpIHtcclxuICAgICAgaWYodGhpcy5lbC5vYmplY3QzRC51cGRhdGVBbGxCZWhhdmlvcnMpXHJcbiAgICAgICAgdGhpcy5lbC5vYmplY3QzRC51cGRhdGVBbGxCZWhhdmlvcnMoKTtcclxuICB9LFxyXG5cclxuICAvKlxyXG4gICAqIENhbGxlZCB3aGVuIGEgY29tcG9uZW50IGlzIHJlbW92ZWQgKGUuZy4sIHZpYSByZW1vdmVBdHRyaWJ1dGUpLlxyXG4gICAqIEdlbmVyYWxseSB1bmRvZXMgYWxsIG1vZGlmaWNhdGlvbnMgdG8gdGhlIGVudGl0eS5cclxuICAgKi9cclxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHsgfSxcclxuXHJcbiAgLypcclxuICAgKiBDYWxsZWQgb24gZWFjaCBzY2VuZSB0aWNrLlxyXG4gICAqL1xyXG4gIC8vIHRpY2s6IGZ1bmN0aW9uICh0KSB7IH0sXHJcblxyXG4gIC8qXHJcbiAgICogQ2FsbGVkIHdoZW4gZW50aXR5IHBhdXNlcy5cclxuICAgKiBVc2UgdG8gc3RvcCBvciByZW1vdmUgYW55IGR5bmFtaWMgb3IgYmFja2dyb3VuZCBiZWhhdmlvciBzdWNoIGFzIGV2ZW50cy5cclxuICAgKi9cclxuICBwYXVzZTogZnVuY3Rpb24gKCkgeyB9LFxyXG5cclxuICAvKlxyXG4gICAqIENhbGxlZCB3aGVuIGVudGl0eSByZXN1bWVzLlxyXG4gICAqIFVzZSB0byBjb250aW51ZSBvciBhZGQgYW55IGR5bmFtaWMgb3IgYmFja2dyb3VuZCBiZWhhdmlvciBzdWNoIGFzIGV2ZW50cy5cclxuICAgKi9cclxuICBwbGF5OiBmdW5jdGlvbiAoKSB7IH0sXHJcblxyXG5cclxuICAvKioqKioqKioqKiBIZWxwZXIgTWV0aG9kcyAqKioqKioqKioqL1xyXG5cclxuICAvKlxyXG4gICAqIFN3YXAgaW4gQWx0c3BhY2UgcmVuZGVyZXIgd2hlbiBydW5uaW5nIGluIEFsdHNwYWNlVlIuXHJcbiAgICovXHJcbiAgaW5pdFJlbmRlcmVyOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdHZhciBzY2VuZSA9IHRoaXMuZWwub2JqZWN0M0Q7XHJcblx0YWx0c3BhY2UuZ2V0RW5jbG9zdXJlKCkudGhlbihmdW5jdGlvbihlKVxyXG5cdHtcclxuXHRcdGlmKHRoaXMuZGF0YS5mdWxsc3BhY2Upe1xyXG5cdFx0XHRlLnJlcXVlc3RGdWxsc3BhY2UoKTtcclxuXHRcdFx0ZS5hZGRFdmVudExpc3RlbmVyKCdmdWxsc3BhY2VjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHNjZW5lLnNjYWxlLnNldFNjYWxhcihlLnBpeGVsc1Blck1ldGVyKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCF0aGlzLmRhdGEudXNlUGl4ZWxTY2FsZSB8fCB0aGlzLmRhdGEuZnVsbHNwYWNlKXtcclxuXHRcdFx0c2NlbmUuc2NhbGUuc2V0U2NhbGFyKGUucGl4ZWxzUGVyTWV0ZXIpO1xyXG5cdFx0fVxyXG5cclxuXHQgIHN3aXRjaCAodGhpcy5kYXRhLnZlcnRpY2FsQWxpZ24pIHtcclxuXHRcdGNhc2UgJ2JvdHRvbSc6XHJcblx0XHQgIHNjZW5lLnBvc2l0aW9uLnkgLT0gZS5pbm5lckhlaWdodCAvIDI7XHJcblx0XHQgIGJyZWFrO1xyXG5cdFx0Y2FzZSAndG9wJzpcclxuXHRcdCAgc2NlbmUucG9zaXRpb24ueSArPSBlLmlubmVySGVpZ2h0IC8gMjtcclxuXHRcdCAgYnJlYWs7XHJcblx0XHRjYXNlICdtaWRkbGUnOlxyXG5cdFx0ICBicmVhaztcclxuXHRcdGRlZmF1bHQ6XHJcblx0XHQgIGNvbnNvbGUud2FybignVW5leHBlY3RlZCB2YWx1ZSBmb3IgdmVydGljYWxBbGlnbjogJywgdGhpcy5kYXRhLnZlcnRpY2FsQWxpZ24pO1xyXG5cdCAgfVxyXG5cclxuXHQgIGlmKHRoaXMuZGF0YS5lbmNsb3N1cmVzT25seSAmJiBlLmlubmVyRGVwdGggPT09IDEpe1xyXG5cdFx0dGhpcy5lbC5yZW5kZXJlci5yZW5kZXIobmV3IFRIUkVFLlNjZW5lKCkpO1xyXG5cdFx0dGhpcy5lbC5yZW5kZXJlciA9IHRoaXMuZWwuZWZmZWN0ID0gb2xkUmVuZGVyZXI7XHJcblxyXG5cdCAgfVxyXG5cdH0uYmluZCh0aGlzKSk7XHJcblxyXG5cdHZhciBvbGRSZW5kZXJlciA9IHRoaXMuZWwucmVuZGVyZXI7XHJcblx0dmFyIHJlbmRlcmVyID0gdGhpcy5lbC5yZW5kZXJlciA9IHRoaXMuZWwuZWZmZWN0ID0gYWx0c3BhY2UuZ2V0VGhyZWVKU1JlbmRlcmVyKHtcclxuXHQgIGFmcmFtZUNvbXBvbmVudFZlcnNpb246IHRoaXMudmVyc2lvblxyXG5cdH0pO1xyXG5cdHZhciBub29wID0gZnVuY3Rpb24oKSB7fTtcclxuXHRyZW5kZXJlci5zZXRTaXplID0gbm9vcDtcclxuXHRyZW5kZXJlci5zZXRQaXhlbFJhdGlvID0gbm9vcDtcclxuXHRyZW5kZXJlci5zZXRDbGVhckNvbG9yID0gbm9vcDtcclxuXHRyZW5kZXJlci5jbGVhciA9IG5vb3A7XHJcblx0cmVuZGVyZXIuZW5hYmxlU2Npc3NvclRlc3QgPSBub29wO1xyXG5cdHJlbmRlcmVyLnNldFNjaXNzb3IgPSBub29wO1xyXG5cdHJlbmRlcmVyLnNldFZpZXdwb3J0ID0gbm9vcDtcclxuXHRyZW5kZXJlci5nZXRQaXhlbFJhdGlvID0gbm9vcDtcclxuXHRyZW5kZXJlci5nZXRNYXhBbmlzb3Ryb3B5ID0gbm9vcDtcclxuXHRyZW5kZXJlci5zZXRGYWNlQ3VsbGluZyA9IG5vb3A7XHJcblx0cmVuZGVyZXIuY29udGV4dCA9IHtjYW52YXM6IHt9fTtcclxuXHRyZW5kZXJlci5zaGFkb3dNYXAgPSB7fTtcclxuXHJcbiAgfSxcclxuXHJcbiAgLypcclxuICAgKiBFbXVsYXRlIEEtRnJhbWUgY3Vyc29yIGV2ZW50cyB3aGVuIHJ1bm5pbmcgaW4gYWx0c3BhY2VWUi5cclxuICAgKi9cclxuICBpbml0Q3Vyc29yRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHJcblx0dmFyIHNjZW5lID0gdGhpcy5lbC5vYmplY3QzRDtcclxuXHR2YXIgY3Vyc29yRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhLWN1cnNvcicpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2EtZW50aXR5W2N1cnNvcl0nKTtcclxuXHRpZiAoY3Vyc29yRWwpIHtcclxuXHQgIC8vIEhpZGUgQS1GcmFtZSBjdXJzb3IgbWVzaC5cclxuXHQgIGN1cnNvckVsLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAndHJhbnNwYXJlbnQnLCB0cnVlKTtcclxuXHQgIGN1cnNvckVsLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAnb3BhY2l0eScsIDAuMCk7XHJcblx0fVxyXG5cclxuXHR2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50KSB7XHJcblx0XHQvLyBGaXJlIGV2ZW50cyBvbiBpbnRlcnNlY3RlZCBvYmplY3QgYW5kIEEtRnJhbWUgY3Vyc29yLlxyXG5cdFx0dmFyIHRhcmdldEVsID0gZXZlbnQudGFyZ2V0LmVsO1xyXG5cdFx0aWYgKGN1cnNvckVsKSBjdXJzb3JFbC5lbWl0KGV2ZW50TmFtZSwgeyB0YXJnZXQ6IHRhcmdldEVsLCByYXk6IGV2ZW50LnJheSwgcG9pbnQ6IGV2ZW50LnBvaW50IH0pO1xyXG5cdFx0aWYgKHRhcmdldEVsKSB0YXJnZXRFbC5lbWl0KGV2ZW50TmFtZSwgeyB0YXJnZXQ6IHRhcmdldEVsLCByYXk6IGV2ZW50LnJheSwgcG9pbnQ6IGV2ZW50LnBvaW50IH0pO1xyXG5cdH0gO1xyXG5cclxuXHR2YXIgY3Vyc29yZG93bk9iaiA9IG51bGw7XHJcblx0c2NlbmUuYWRkRXZlbnRMaXN0ZW5lcignY3Vyc29yZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0ICBjdXJzb3Jkb3duT2JqID0gZXZlbnQudGFyZ2V0O1xyXG5cdCAgZW1pdCgnbW91c2Vkb3duJywgZXZlbnQpO1xyXG5cdH0pO1xyXG5cclxuXHRzY2VuZS5hZGRFdmVudExpc3RlbmVyKCdjdXJzb3J1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0ICBlbWl0KCdtb3VzZXVwJywgZXZlbnQpO1xyXG5cdCAgaWYgKGV2ZW50LnRhcmdldC51dWlkID09PSBjdXJzb3Jkb3duT2JqLnV1aWQpIHtcclxuXHRcdGVtaXQoJ2NsaWNrJywgZXZlbnQpO1xyXG5cdCAgfVxyXG5cdCAgY3Vyc29yZG93bk9iaiA9IG51bGw7XHJcblx0fSk7XHJcblxyXG5cdHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2N1cnNvcmVudGVyJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHQgIGlmICghZXZlbnQudGFyZ2V0LmVsKSB7IHJldHVybjsgfVxyXG5cdCAgZXZlbnQudGFyZ2V0LmVsLmFkZFN0YXRlKCdob3ZlcmVkJyk7XHJcblx0ICBpZiAoY3Vyc29yRWwpIGN1cnNvckVsLmFkZFN0YXRlKCdob3ZlcmluZycpO1xyXG5cdCAgZW1pdCgnbW91c2VlbnRlcicsIGV2ZW50KTtcclxuXHR9KTtcclxuXHJcblx0c2NlbmUuYWRkRXZlbnRMaXN0ZW5lcignY3Vyc29ybGVhdmUnLCBmdW5jdGlvbihldmVudCkge1xyXG5cdCAgaWYgKCFldmVudC50YXJnZXQuZWwpIHsgcmV0dXJuOyB9XHJcblx0ICBldmVudC50YXJnZXQuZWwucmVtb3ZlU3RhdGUoJ2hvdmVyZWQnKTtcclxuXHQgIGlmIChjdXJzb3JFbCkgY3Vyc29yRWwucmVtb3ZlU3RhdGUoJ2hvdmVyaW5nJyk7XHJcblx0ICBlbWl0KCdtb3VzZWxlYXZlJywgZXZlbnQpO1xyXG5cdH0pO1xyXG5cclxuICB9LFxyXG5cclxuICBpbml0Q29sbGlzaW9uRXZlbnRzOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdHZhciBzY2VuZSA9IHRoaXMuZWwub2JqZWN0M0Q7XHJcblxyXG5cdHZhciBlbWl0ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZXZlbnQpIHtcclxuXHRcdHZhciB0YXJnZXRFbCA9IGV2ZW50LnRhcmdldC5lbDtcclxuXHRcdGlmICghdGFyZ2V0RWwpIHJldHVybjtcclxuXHJcblx0XHQvL3JlbWFwIHRhcmdldCBhbmQgb3RoZXIgZnJvbSBvYmplY3QzRHMgdG8gYWZyYW1lIGVsZW1lbnRcclxuXHRcdGV2ZW50LnRhcmdldCA9IHRhcmdldEVsO1xyXG5cdFx0aWYgKGV2ZW50Lm90aGVyICYmIGV2ZW50Lm90aGVyLmVsKSB7XHJcblx0XHRcdGV2ZW50Lm90aGVyID0gZXZlbnQub3RoZXIuZWw7XHJcblx0XHR9XHJcblx0XHR0YXJnZXRFbC5lbWl0KGV2ZW50TmFtZSwgZXZlbnQpO1xyXG5cdH07XHJcblxyXG5cdHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpc2lvbmVudGVyJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRlbWl0KCdjb2xsaXNpb25lbnRlcicsIGV2ZW50KTtcclxuXHR9KTtcclxuXHJcblx0c2NlbmUuYWRkRXZlbnRMaXN0ZW5lcignY29sbGlzaW9uZXhpdCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdFx0ZW1pdCgnY29sbGlzaW9uZXhpdCcsIGV2ZW50KTtcclxuXHR9KTtcclxuXHJcblx0c2NlbmUuYWRkRXZlbnRMaXN0ZW5lcigndHJpZ2dlcmVudGVyJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRlbWl0KCd0cmlnZ2VyZW50ZXInLCBldmVudCk7XHJcblx0fSk7XHJcblxyXG5cdHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ3RyaWdnZXJleGl0JywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRlbWl0KCd0cmlnZ2VyZXhpdCcsIGV2ZW50KTtcclxuXHR9KTtcclxuXHJcbiAgfVxyXG5cclxufSk7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvYWx0c3BhY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcclxuLyoqXHJcbiogVGhpcyBzZXQgb2YgY29tcG9uZW50cyBtYXAgdG8gdmFyaW91cyBvYmplY3RzIGFuZCBlZmZlY3RzIHRoYXQgYXJlIHByb3ZpZGVkXHJcbiogbmF0aXZlbHkgYnkgQWx0c3BhY2VWUi4gWW91ciBtYW5hZ2VtZW50IG9mIHRoZXNlIG9iamVjdHMgbWF5IGJlIGxpbWl0ZWQgdG9cclxuKiBzb21lIGRlZ3JlZSwgYnV0IHRoZXkgd2lsbCB0ZW5kIHRvIGJlIG1vcmUgcGVyZm9ybWFudCB0aGFuIFNESyBlcXVpdmFsZW50cyxcclxuKiBvciBtYXkgcHJvdmlkZSBzb21lIGZ1bmN0aW9uYWxpdHkgbm90IG90aGVyd2lzZSBhdmFpbGFibGUgdG8gdGhlIFNESy5cclxuKiBAbmFtZXNwYWNlIG5hdGl2ZVxyXG4qL1xyXG4oZnVuY3Rpb24gKCkge1xyXG5cdGlmICghd2luZG93LmFsdHNwYWNlIHx8ICFhbHRzcGFjZS5pbkNsaWVudCkge1xyXG5cdFx0dmFyIG5vb3AgPSBmdW5jdGlvbiAoKSB7fTtcclxuXHRcdHdpbmRvdy5hbHRzcGFjZSA9IHtcclxuXHRcdFx0YWRkTmF0aXZlQ29tcG9uZW50OiBub29wLFxyXG5cdFx0XHR1cGRhdGVOYXRpdmVDb21wb25lbnQ6IG5vb3AsXHJcblx0XHRcdHJlbW92ZU5hdGl2ZUNvbXBvbmVudDogbm9vcFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHZhciBwbGFjZWhvbGRlckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuMDAxLCAwLjAwMSwgMC4wMDEpO1xyXG5cdHZhciBwbGFjZWhvbGRlck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgY29sb3I6IDB4MDAwMDAwIH0pO1xyXG5cdHBsYWNlaG9sZGVyTWF0ZXJpYWwudmlzaWJsZSA9IGZhbHNlO1xyXG5cdHZhciBQbGFjZWhvbGRlck1lc2ggPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRUSFJFRS5NZXNoLmNhbGwoIHRoaXMsIHBsYWNlaG9sZGVyR2VvbWV0cnksIHBsYWNlaG9sZGVyTWF0ZXJpYWwgKTtcclxuXHR9O1xyXG5cdFBsYWNlaG9sZGVyTWVzaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUSFJFRS5NZXNoLnByb3RvdHlwZSApO1xyXG5cdFBsYWNlaG9sZGVyTWVzaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUSFJFRS5QbGFjZWhvbGRlck1lc2g7XHJcblxyXG5cdGZ1bmN0aW9uIG1lc2hJbml0KG1lc2gpIHtcclxuXHRcdC8vSWYgeW91IGF0dGFjaCBuYXRpdmUgY29tcG9uZW50cyB0byBhbiBlbnRpdHksIGl0IHdpbGwgbm90IHVzZSBhIGRlZmF1bHQgY29sbGlkZXJcclxuXHRcdG1lc2gudXNlckRhdGEuYWx0c3BhY2UgPSBtZXNoLnVzZXJEYXRhLmFsdHNwYWNlIHx8IHt9O1xyXG5cdFx0bWVzaC51c2VyRGF0YS5hbHRzcGFjZS5jb2xsaWRlciA9IG1lc2gudXNlckRhdGEuYWx0c3BhY2UuY29sbGlkZXIgfHwge307XHJcblx0XHRtZXNoLnVzZXJEYXRhLmFsdHNwYWNlLmNvbGxpZGVyLmVuYWJsZWQgPSBmYWxzZTtcclxuXHJcblx0XHRhbHRzcGFjZS5hZGROYXRpdmVDb21wb25lbnQobWVzaCwgdGhpcy5uYW1lKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG5hdGl2ZUNvbXBvbmVudEluaXQoKSB7XHJcblx0XHR2YXIgbWVzaCA9IHRoaXMuZWwuZ2V0T3JDcmVhdGVPYmplY3QzRCgnbWVzaCcsIFBsYWNlaG9sZGVyTWVzaCk7XHJcblxyXG5cdFx0bWVzaEluaXQuY2FsbCh0aGlzLCBtZXNoKTtcclxuXHJcblx0XHQvL3RvIHBhc3MgZGVmYXVsdHNcclxuXHRcdHRoaXMudXBkYXRlKHRoaXMuZGF0YSk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIG5hdGl2ZUNvbXBvbmVudFJlbW92ZSgpIHtcclxuXHRcdHZhciBtZXNoID0gdGhpcy5lbC5nZXRPYmplY3QzRCgnbWVzaCcpO1xyXG5cdFx0YWx0c3BhY2UucmVtb3ZlTmF0aXZlQ29tcG9uZW50KG1lc2gsIHRoaXMubmFtZSk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIG5hdGl2ZUNvbXBvbmVudFVwZGF0ZShvbGREYXRhKSB7XHJcblx0XHRhbHRzcGFjZS51cGRhdGVOYXRpdmVDb21wb25lbnQodGhpcy5lbC5vYmplY3QzRE1hcC5tZXNoLCB0aGlzLm5hbWUsIHRoaXMuZGF0YSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBjYWxsQ29tcG9uZW50KGZ1bmN0aW9uTmFtZSwgZnVuY3Rpb25Bcmd1bWVudHMpIHtcclxuXHRcdGFsdHNwYWNlLmNhbGxOYXRpdmVDb21wb25lbnQodGhpcy5lbC5vYmplY3QzRE1hcC5tZXNoLCB0aGlzLm5hbWUsIGZ1bmN0aW9uTmFtZSwgZnVuY3Rpb25Bcmd1bWVudHMpXHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQqIEF0dGFjaCBhIGdpdmVuIG5hdGl2ZSBvYmplY3QgdG8gdGhpcyBlbnRpdHkuXHJcblx0KiBAbWl4aW4gbi1vYmplY3RcclxuXHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHQqIEBwcm9wIHtzdHJpbmd9IHJlcyAtIFRoZSBpZGVudGlmaWVyIGZvciB0aGUgcmVzb3VyY2UgeW91IHdhbnQuIFRoaXMgY29tcG9uZW50XHJcblx0KiBjYW4gYWNjZXB0IGFsbCByZXNvdXJjZXMgZXhjZXB0IGZvciBgaW50ZXJhY3RhYmxlc2AuXHJcblx0KiBAZXhhbXBsZSA8YS1lbnRpdHkgbi1vYmplY3Q9J3JlczphcmNoaXRlY3R1cmUvd2FsbC00dy00aCc+PC9hLWVudGl0eT5cclxuXHQqL1xyXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1vYmplY3QnLCB7XHJcblx0XHRzY2hlbWE6IHtcclxuXHRcdFx0cmVzOiB7dHlwZTogJ3N0cmluZyd9XHJcblx0XHR9LFxyXG5cdFx0aW5pdDogbmF0aXZlQ29tcG9uZW50SW5pdCxcclxuXHRcdHVwZGF0ZTogbmF0aXZlQ29tcG9uZW50VXBkYXRlLFxyXG5cdFx0cmVtb3ZlOiBuYXRpdmVDb21wb25lbnRSZW1vdmVcclxuXHR9KTtcclxuXHJcblx0LyoqXHJcblx0KiBDcmVhdGUgYW4gb2JqZWN0IHRoYXQgc3Bhd25zIGFkZGl0aW9uYWwgY29waWVzIG9mIGl0c2VsZiB3aGVuIGdyYWJiZWQgYnkgYSB1c2VyICh0aGUgY29waWVzIGFyZSBub3Qgc3Bhd25lcnMgdGhlbXNlbHZlcykuXHJcblx0KiBUaGVzZSBjb3BpZXMgd2lsbCBiZSBwaHlzaWNhbGx5IGludGVyYWN0aXZlIGFuZCBhdXRvbWF0aWNhbGx5IHN5bmNocm9uaXplZFxyXG5cdCogYmV0d2VlbiB1c2Vycy5cclxuXHQqIEBtaXhpbiBuLXNwYXduZXJcclxuXHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHQqIEBwcm9wIHtzdHJpbmd9IHJlcyAtIFRoZSBpZGVudGlmaWVyIGZvciB0aGUgcmVzb3VyY2UgeW91IHdhbnQuIFRoaXMgY29tcG9uZW50XHJcblx0KiBjYW4gb25seSBhY2NlcHQgcmVzb3VyY2VzIG9mIHR5cGUgYGludGVyYWN0YWJsZXNgLlxyXG5cdCogQGV4YW1wbGUgPGEtZW50aXR5IG4tc3Bhd25lcj0ncmVzOiBpbnRlcmFjdGFibGVzL2Jhc2tldGJhbGwnPjwvYS1lbnRpdHk+XHJcblx0Ki9cclxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ24tc3Bhd25lcicsIHtcclxuXHRcdHNjaGVtYToge1xyXG5cdFx0XHRyZXM6IHt0eXBlOiAnc3RyaW5nJ31cclxuXHRcdH0sXHJcblx0XHRpbml0OiBuYXRpdmVDb21wb25lbnRJbml0LFxyXG5cdFx0dXBkYXRlOiBuYXRpdmVDb21wb25lbnRVcGRhdGUsXHJcblx0XHRyZW1vdmU6IG5hdGl2ZUNvbXBvbmVudFJlbW92ZVxyXG5cdH0pO1xyXG5cclxuXHQvKipcclxuXHQqIENyZWF0ZXMgZHluYW1pYyAyRCB0ZXh0IG9uIHRoZSBlbnRpdHkuIFRoZSB0ZXh0IHdpbGwgd3JhcCBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IHByb3ZpZGVkLlxyXG5cdCogVGhpcyB0ZXh0IHdpbGwgYmUgY2xlYXJlciB0aGFuIHRleHR1cmUtYmFzZWQgdGV4dCBhbmQgbW9yZSBwZXJmb3JtYW50IHRoYW4gZ2VvbWV0cnktYmFzZWQgdGVzdC5cclxuXHQqIEBtaXhpbiBuLXRleHRcclxuXHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHQqIEBwcm9wIHtzdHJpbmd9IHRleHQgLSBUaGUgdGV4dCB0byBiZSBkcmF3bi5cclxuXHQqIEBwcm9wIHtudW1iZXJ9IGZvbnRTaXplPTEwIC0gVGhlIGhlaWdodCBvZiB0aGUgbGV0dGVycy4gMTBwdCB+PSAxbVxyXG5cdCogQHByb3Age251bWJlcn0gd2lkdGg9MTAgLSBUaGUgd2lkdGggb2YgdGhlIHRleHQgYXJlYSBpbiBtZXRlcnMuIElmIHRoZVxyXG5cdCogdGV4dCBpcyB3aWRlciB0aGFuIHRoaXMgdmFsdWUsIHRoZSBvdmVyZmxvdyB3aWxsIGJlIHdyYXBwZWQgdG8gdGhlIG5leHQgbGluZS5cclxuXHQqIEBwcm9wIHtudW1iZXJ9IGhlaWdodD0xIC0gVGhlIGhlaWdodCBvZiB0aGUgdGV4dCBhcmVhIGluIG1ldGVycy4gSWYgdGhlXHJcblx0KiB0ZXh0IGlzIHRhbGxlciB0aGFuIHRoaXMgdmFsdWUsIHRoZSBvdmVyZmxvdyB3aWxsIGJlIGN1dCBvZmYuXHJcblx0KiBAcHJvcCB7c3RyaW5nfSBob3Jpem9udGFsQWxpZ249bWlkZGxlIC0gVGhlIGhvcml6b250YWwgYW5jaG9yIHBvaW50IGZvclxyXG5cdCogdGhlIHRleHQuIENhbiBiZSBgbGVmdGAsIGBtaWRkbGVgLCBvciBgcmlnaHRgLlxyXG5cdCogQHByb3Age3N0cmluZ30gdmVydGljYWxBbGlnbj1taWRkbGUgLSBUaGUgdmVydGljYWwgYW5jaG9yIHBvaW50IGZvciB0aGVcclxuXHQqIHRleHQuIENhbiBiZSBgdG9wYCwgYG1pZGRsZWAsIG9yIGBib3R0b21gLlxyXG5cdCovXHJcblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCduLXRleHQnLCB7XHJcblx0XHRpbml0OiBuYXRpdmVDb21wb25lbnRJbml0LFxyXG5cdFx0dXBkYXRlOiBuYXRpdmVDb21wb25lbnRVcGRhdGUsXHJcblx0XHRyZW1vdmU6IG5hdGl2ZUNvbXBvbmVudFJlbW92ZSxcclxuXHRcdHNjaGVtYToge1xyXG5cdFx0XHR0ZXh0OiB7IGRlZmF1bHQ6ICcnLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG5cdFx0XHQvKmNvbG9yOiB7IGRlZmF1bHQ6ICd3aGl0ZScsXHJcblx0XHRcdFx0cGFyc2U6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0c3RyaW5naWZ5OiBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0fX0sKi9cclxuXHRcdFx0Zm9udFNpemU6IHsgZGVmYXVsdDogJzEwJywgdHlwZTogJ2ludCcgfSwvL3JvdWdobHkgYSBtZXRlciB0YWxsXHJcblx0XHRcdHdpZHRoOiB7IGRlZmF1bHQ6ICcxMCcsIHR5cGU6ICdudW1iZXInIH0sLy9pbiBtZXRlcnNcclxuXHRcdFx0aGVpZ2h0OiB7IGRlZmF1bHQ6ICcxJywgdHlwZTogJ251bWJlcicgfSwvL2luIG1ldGVyc1xyXG5cdFx0XHRob3Jpem9udGFsQWxpZ246IHsgZGVmYXVsdDogJ21pZGRsZSd9LFxyXG5cdFx0XHR2ZXJ0aWNhbEFsaWduOiB7IGRlZmF1bHQ6ICdtaWRkbGUnfVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvL29iamVjdDogY29sbGlkZXMgYWdhaW5zdDogb2JqZWN0cyAvIGVudmlyb21lbnQgLyBjdXJzb3JcclxuXHQvL2Vudmlyb25tZW50OiBjYW4gYmUgdGVsZXBvcnRlZCBvbnRvLCBhbmQgY29sbGlkZXMgYWdhaW5zdDogb2JqZWN0cyAvIGVudmlyb25tZW50IC8gY3Vyc29yXHJcblx0Ly9ob2xvZ3JhbTogY29sbGlkZXMgYWdhaW5zdDogY3Vyc29yIC8gaG9sb2dyYW1zXHJcblxyXG5cdC8qKlxyXG5cdCogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3Ige0BsaW5rIG4ubi1zcGhlcmUtY29sbGlkZXJ9LCB7QGxpbmsgbi5uLWJveC1jb2xsaWRlcn0sXHJcblx0KiB7QGxpbmsgbi5uLWNhcHN1bGUtY29sbGlkZXJ9LCBhbmQge0BsaW5rIG4ubi1tZXNoLWNvbGxpZGVyfS4gWW91IGNhbm5vdCB1c2VcclxuXHQqIHRoaXMgY2xhc3MgZGlyZWN0bHksIGJ1dCBpbnN0ZWFkIHlvdSBzaG91bGQgYWRkIG9uZSBvZiB0aG9zZSBjb21wb25lbnRzXHJcblx0KiB0byB5b3VyIG9iamVjdHMuXHJcblx0KiBAbmFtZSBuLWNvbGxpZGVyXHJcblx0KiBAbWl4aW4gbi1jb2xsaWRlclxyXG5cdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdCogQHByb3Age3ZlYzN9IGNlbnRlcj0wLDAsMCAtIFRoZSBvZmZzZXQgb2YgdGhlIGNvbGxpZGVyIGluIGxvY2FsIHNwYWNlLlxyXG5cdCogQHByb3Age3N0cmluZ30gdHlwZT1ob2xvZ3JhbSAtIFRoZSB0eXBlIG9mIGNvbGxpZGVyLCBvbmUgb2Y6IGBvYmplY3RgIHwgYGVudmlyb25tZW50YCB8IGBob2xvZ3JhbWAuXHJcblx0KiBPYmplY3QgY29sbGlkZXJzIGNvbGxpZGUgd2l0aCBvdGhlciBvYmplY3RzLCB0aGUgZW52aXJvbm1lbnQsIGFuZCB0aGUgY3Vyc29yLlxyXG5cdCogRW52aXJvbm1lbnQgY29sbGlkZXJzIGNvbGxpZGUgd2l0aCBldmVyeXRoaW5nIG9iamVjdHMgZG8sIGJ1dCB5b3UgY2FuIGFsc29cclxuXHQqIHRlbGVwb3J0IG9udG8gdGhlbS4gSG9sb2dyYW0gY29sbGlkZXJzIG9ubHkgY29sbGlkZSB3aXRoIG90aGVyIGhvbG9ncmFtcyBhbmRcclxuXHQqIHRoZSBjdXJzb3IuXHJcblx0Ki9cclxuXHJcblx0LyoqXHJcblx0KiBDcmVhdGUgYSBzcGhlcmljYWwgY29sbGlkZXIgb24gdGhpcyBlbnRpdHkuXHJcblx0KiBAbWl4aW4gbi1zcGhlcmUtY29sbGlkZXJcclxuXHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHQqIEBleHRlbmRzIG5hdGl2ZS5uLWNvbGxpZGVyXHJcblx0KiBAcHJvcCB7bnVtYmVyfSByYWRpdXM9MSAtIFRoZSBzaXplIG9mIHRoZSBjb2xsaWRlciBpbiBtZXRlcnMuXHJcblx0Ki9cclxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ24tc3BoZXJlLWNvbGxpZGVyJywge1xyXG5cdFx0aW5pdDpuYXRpdmVDb21wb25lbnRJbml0LFxyXG5cdFx0cmVtb3ZlOiBuYXRpdmVDb21wb25lbnRSZW1vdmUsXHJcblx0XHR1cGRhdGU6IG5hdGl2ZUNvbXBvbmVudFVwZGF0ZSxcclxuXHRcdHNjaGVtYToge1xyXG5cdFx0XHRpc1RyaWdnZXI6IHsgZGVmYXVsdDogZmFsc2UsIHR5cGU6ICdib29sZWFuJyB9LFxyXG5cdFx0XHRjZW50ZXI6IHsgdHlwZTogJ3ZlYzMnIH0sXHJcblx0XHRcdHJhZGl1czogeyBkZWZhdWx0OiAnMCcsIHR5cGU6ICdudW1iZXInIH0sXHJcblx0XHRcdHR5cGU6IHtkZWZhdWx0OiAnb2JqZWN0J31cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblxyXG5cdC8qKlxyXG5cdCogQ3JlYXRlIGEgYm94LXNoYXBlZCBjb2xsaWRlciBvbiB0aGlzIGVudGl0eS5cclxuXHQqIEBtaXhpbiBuLWJveC1jb2xsaWRlclxyXG5cdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdCogQGV4dGVuZHMgbmF0aXZlLm4tY29sbGlkZXJcclxuXHQqIEBwcm9wIHt2ZWMzfSBzaXplPTEsMSwxIC0gVGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNvbGxpZGVyLlxyXG5cdCovXHJcblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCduLWJveC1jb2xsaWRlcicsIHtcclxuXHRcdGluaXQ6bmF0aXZlQ29tcG9uZW50SW5pdCxcclxuXHRcdHJlbW92ZTogbmF0aXZlQ29tcG9uZW50UmVtb3ZlLFxyXG5cdFx0dXBkYXRlOiBuYXRpdmVDb21wb25lbnRVcGRhdGUsXHJcblx0XHRzY2hlbWE6IHtcclxuXHRcdFx0aXNUcmlnZ2VyOiB7IGRlZmF1bHQ6IGZhbHNlLCB0eXBlOiAnYm9vbGVhbicgfSxcclxuXHRcdFx0Y2VudGVyOiB7IHR5cGU6ICd2ZWMzJyB9LFxyXG5cdFx0XHRzaXplOiB7IHR5cGU6ICd2ZWMzJyB9LFxyXG5cdFx0XHR0eXBlOiB7ZGVmYXVsdDogJ29iamVjdCd9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8qKlxyXG5cdCogQ3JlYXRlIGEgY2Fwc3VsZS1zaGFwZWQgY29sbGlkZXIgb24gdGhpcyBlbnRpdHkuIENhcHN1bGVzXHJcblx0KiBhcmUgYSB1bmlvbiBvZiBhIGN5bGluZGVyIGFuZCB0d28gc3BoZXJlcyBvbiB0b3AgYW5kIGJvdHRvbS5cclxuXHQqIEBtaXhpbiBuLWNhcHN1bGUtY29sbGlkZXJcclxuXHQqIEBtZW1iZXJvZiBuYXRpdmVcclxuXHQqIEBleHRlbmRzIG5hdGl2ZS5uLWNvbGxpZGVyXHJcblx0KiBAcHJvcCB7bnVtYmVyfSByYWRpdXM9MSAtIFRoZSByYWRpdXMgb2YgdGhlIGNhcHN1bGUgaW4gbWV0ZXJzLlxyXG5cdCogQHByb3Age251bWJlcn0gaGVpZ2h0PTEgLSBUaGUgaGVpZ2h0IG9mIHRoZSBzaGFmdCBvZiB0aGUgY2Fwc3VsZSBpbiBtZXRlcnMuXHJcblx0KiBAcHJvcCB7c3RyaW5nfSBkaXJlY3Rpb249eSAtIFRoZSBheGlzIHdpdGggd2hpY2ggdGhlIGNhcHN1bGUgaXMgYWxpZ25lZC5cclxuXHQqIE9uZSBvZiBgeGAsIGB5YCwgb3IgYHpgLlxyXG5cdCovXHJcblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCduLWNhcHN1bGUtY29sbGlkZXInLCB7XHJcblx0XHRpbml0Om5hdGl2ZUNvbXBvbmVudEluaXQsXHJcblx0XHRyZW1vdmU6IG5hdGl2ZUNvbXBvbmVudFJlbW92ZSxcclxuXHRcdHVwZGF0ZTogbmF0aXZlQ29tcG9uZW50VXBkYXRlLFxyXG5cdFx0c2NoZW1hOiB7XHJcblx0XHRcdGlzVHJpZ2dlcjogeyBkZWZhdWx0OiBmYWxzZSwgdHlwZTogJ2Jvb2xlYW4nIH0sXHJcblx0XHRcdGNlbnRlcjogeyB0eXBlOiAndmVjMycgfSxcclxuXHRcdFx0cmFkaXVzOiB7IGRlZmF1bHQ6ICcwJywgdHlwZTogJ251bWJlcicgfSxcclxuXHRcdFx0aGVpZ2h0OiB7IGRlZmF1bHQ6ICcwJywgdHlwZTogJ251bWJlcicgfSxcclxuXHRcdFx0ZGlyZWN0aW9uOiB7IGRlZmF1bHQ6ICd5JyB9LFxyXG5cdFx0XHR0eXBlOiB7ZGVmYXVsdDogJ29iamVjdCd9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8qKlxyXG5cdCogRW5hYmxlIGNvbGxpc2lvbiBmb3IgdGhlIGVudGlyZSBhdHRhY2hlZCBtZXNoLiBUaGlzIGlzIGV4cGVuc2l2ZSB0byBldmFsdWF0ZSwgc28gc2hvdWxkIG9ubHkgYmUgdXNlZCBvblxyXG5cdCogbG93LXBvbHkgbWVzaGVzLlxyXG5cdCogQG1peGluIG4tbWVzaC1jb2xsaWRlclxyXG5cdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdCogQGV4dGVuZHMgbmF0aXZlLm4tY29sbGlkZXJcclxuXHQqIEBleGFtcGxlIDxhLWJveCBuLW1lc2gtY29sbGlkZXI+PC9hLWJveD5cclxuXHQqIEBwcm9wIHtib29sfSBjb252ZXg9dHJ1ZSAtIFdoZXRoZXIgdGhlIGNvbGxpZGVyIHNob3VsZCBiZSBjb252ZXggb3IgY29uY2F2ZS4gU2V0IHRoaXMgdG8gZmFsc2UgaWYgeW91IGhhdmUgaG9sZXNcclxuXHQqIGluIHlvdXIgbWVzaC4gQ29udmV4IGNvbGxpZGVycyBhcmUgbGltaXRlZCB0byAyNTUgdHJpYW5nbGVzLiBOb3RlOiBjb25jYXZlIGNvbGxpZGVycyBjYW4gYmUgc2lnbmlmaWNhbnRseSBtb3JlXHJcblx0KiBleHBlbnNpdmUgY29tcGFyZXQgdG8gY29udmVzIGNvbGxpZGVycy5cclxuXHQqL1xyXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1tZXNoLWNvbGxpZGVyJywge1xyXG5cdFx0X2ZvckVhY2hNZXNoOiBmdW5jdGlvbiAoZnVuYykge1xyXG5cdFx0XHR2YXIgb2JqID0gdGhpcy5lbC5vYmplY3QzRE1hcC5tZXNoO1xyXG5cdFx0XHRpZiAoIW9iaikgeyByZXR1cm47IH1cclxuXHRcdFx0aWYgKG9iaiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpIHtcclxuXHRcdFx0XHRmdW5jKG9iaik7XHJcblx0XHRcdH1cclxuXHRcdFx0b2JqLnRyYXZlcnNlKGZ1bmN0aW9uIChjaGlsZE9iaikge1xyXG5cdFx0XHRcdGlmIChjaGlsZE9iaiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpIHtcclxuXHRcdFx0XHRcdGZ1bmMoY2hpbGRPYmopO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdH0sXHJcblx0XHRfaW5pdE9iajogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR0aGlzLl9mb3JFYWNoTWVzaChmdW5jdGlvbiAobWVzaCkge1xyXG5cdFx0XHRcdG1lc2hJbml0LmNhbGwodGhpcywgbWVzaCk7XHJcblxyXG5cdFx0XHRcdC8vdG8gcGFzcyBkZWZhdWx0c1xyXG5cdFx0XHRcdGFsdHNwYWNlLnVwZGF0ZU5hdGl2ZUNvbXBvbmVudChtZXNoLCB0aGlzLm5hbWUsIHRoaXMuZGF0YSk7XHJcblx0XHRcdH0uYmluZCh0aGlzKSk7XHJcblx0XHR9LFxyXG5cdFx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQvLyBBbGxvdyBhLWZyYW1lIHRvIGNyZWF0ZSBhIFBsYWNlaG9sZGVyTWVzaCBpZiB0aGVyZSBpc24ndCBhbHJlYWR5IG9uZSwgc28gdGhhdCB0aGUgbmF0aXZlIGNvbGxpZGVyIGlzXHJcblx0XHRcdC8vIHJlZ2lzdGVyZWQuXHJcblx0XHRcdHRoaXMuZWwuZ2V0T3JDcmVhdGVPYmplY3QzRCgnbWVzaCcsIFBsYWNlaG9sZGVyTWVzaCk7XHJcblxyXG5cdFx0XHQvLyBJbml0aWFsaXplIHRoZSBleGlzdGluZyBtZXNoXHJcblx0XHRcdHRoaXMuX2luaXRPYmooKTtcclxuXHJcblx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kZWwtbG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdC8vIFJlLWluaXRpYWxpemUgdGhlIGNvbGxpZGVyIGlmIGEgbmV3IG1vZGVsIGlzIGxvYWRlZFxyXG5cdFx0XHRcdHRoaXMuX2luaXRPYmooKTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdH0sXHJcblx0XHRyZW1vdmU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dGhpcy5fZm9yRWFjaE1lc2goZnVuY3Rpb24gKG1lc2gpIHtcclxuXHRcdFx0XHRhbHRzcGFjZS5yZW1vdmVOYXRpdmVDb21wb25lbnQobWVzaCwgdGhpcy5uYW1lKTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdH0sXHJcblx0XHR1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XHJcblx0XHRcdHRoaXMuX2ZvckVhY2hNZXNoKGZ1bmN0aW9uIChtZXNoKSB7XHJcblx0XHRcdFx0YWx0c3BhY2UudXBkYXRlTmF0aXZlQ29tcG9uZW50KG1lc2gsIHRoaXMubmFtZSwgdGhpcy5kYXRhKTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdH0sXHJcblx0XHRzY2hlbWE6IHtcclxuXHRcdFx0aXNUcmlnZ2VyOiB7IGRlZmF1bHQ6IGZhbHNlLCB0eXBlOiAnYm9vbGVhbicgfSxcclxuXHRcdFx0Y29udmV4OiB7IGRlZmF1bHQ6IHRydWUsIHR5cGU6ICdib29sZWFuJyB9LFxyXG5cdFx0XHR0eXBlOiB7ZGVmYXVsdDogJ29iamVjdCd9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8qKlxyXG5cdCogTWFrZSB0aGUgb2JqZWN0J3MgK1ogYWx3YXlzIGZhY2UgdGhlIHZpZXdlci4gQ3VycmVudGx5IHdpbGwgb25seSBkaXJlY3RseSBhcHBseSB0byBtYWluIG1lc2ggb3IgbmF0aXZlIGNvbXBvbmVudCBvbiB0aGUgYXR0YWNoZWQgZW50aXR5LCBub3QgYW55IGNoaWxkcmVuIG9yIHN1Ym1lc2hlcy5cclxuXHQqIEBtaXhpbiBuLWJpbGxib2FyZFxyXG5cdCogQG1lbWJlcm9mIG5hdGl2ZVxyXG5cdCogQGV4YW1wbGUgPGEtcGxhbmUgbi1iaWxsYm9hcmQ+PC9hLXBsYW5lPlxyXG5cdCovXHJcblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCduLWJpbGxib2FyZCcsIHtcclxuXHRcdGluaXQ6bmF0aXZlQ29tcG9uZW50SW5pdCxcclxuXHRcdHJlbW92ZTogbmF0aXZlQ29tcG9uZW50UmVtb3ZlLFxyXG5cdH0pO1xyXG5cclxuXHQvKipcclxuXHQqIEEgY29udGFpbmVyIGtlZXBzIGEgcnVubmluZyB0YWxseSBvZiBob3cgbWFueSBvYmplY3RzIGFyZSB3aXRoaW5cclxuXHQqIGl0cyBib3VuZHMsIGFuZCBhZGRzIGFuZCByZW1vdmVzIHRoZSBzdGF0ZXMgYGNvbnRhaW5lci1mdWxsYCBhbmRcclxuXHQqIGBjb250YWluZXItZW1wdHlgIGJhc2VkIG9uIHRoZSBjdXJyZW50IGNvdW50IG9mIG9iamVjdHMuIENhbiBmaXJlIHRocmVlXHJcblx0KiBzcGVjaWFsIGV2ZW50czogYGNvbnRhaW5lci1mdWxsYCwgYGNvbnRhaW5lci1lbXB0eWAsIGFuZCBgY29udGFpbmVyLWNvdW50LWNoYW5nZWRgLlxyXG5cdCogQG1peGluIG4tY29udGFpbmVyXHJcblx0KiBAbWVtYmVyb2YgbmF0aXZlXHJcblx0KiBAcHJvcCB7bnVtYmVyfSBjYXBhY2l0eT00IC0gVGhlIHZhbHVlIGF0IHdoaWNoIHRoZSBjb250YWluZXIgd2lsbCBmaXJlIHRoZVxyXG5cdCogYGNvbnRhaW5lci1mdWxsYCBldmVudC5cclxuXHQqL1xyXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1jb250YWluZXInLCB7XHJcblx0XHRpbml0OiBmdW5jdGlvbigpe1xyXG5cdFx0XHRuYXRpdmVDb21wb25lbnRJbml0LmNhbGwodGhpcyk7XHJcblxyXG5cdFx0XHR2YXIgZWwgPSB0aGlzLmVsO1xyXG5cdFx0XHR2YXIgY29tcG9uZW50ID0gdGhpcztcclxuXHJcblx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlYWRkZWQnLCBmdW5jdGlvbihldmVudCl7XHJcblx0XHRcdFx0aWYoZXZlbnQuZGV0YWlsLnN0YXRlID09PSAnY29udGFpbmVyLWZ1bGwnKXtcclxuXHRcdFx0XHRcdGVsLmVtaXQoJ2NvbnRhaW5lci1mdWxsJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKGV2ZW50LmRldGFpbC5zdGF0ZSA9PT0gJ2NvbnRhaW5lci1lbXB0eScpe1xyXG5cdFx0XHRcdFx0ZWwuZW1pdCgnY29udGFpbmVyLWVtcHR5Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhaW5lci1jb3VudC1jaGFuZ2VkJywgZnVuY3Rpb24oZXZlbnQpe1xyXG5cdFx0XHRcdGNvbXBvbmVudC5jb3VudCA9IGV2ZW50LmRldGFpbC5jb3VudDtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0cmVtb3ZlOiBuYXRpdmVDb21wb25lbnRSZW1vdmUsXHJcblx0XHR1cGRhdGU6IG5hdGl2ZUNvbXBvbmVudFVwZGF0ZSxcclxuXHRcdHNjaGVtYToge1xyXG5cdFx0XHRjYXBhY2l0eTogeyBkZWZhdWx0OiA0LCB0eXBlOiAnbnVtYmVyJyB9LFxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvKipcclxuXHQqIFBsYXkgdGhlIHNvdW5kIGdpdmVuIGJ5IHRoZSBgc3JjYCBvciBgcmVzYCBwcm9wZXJ0eSBmcm9tIHRoZSBsb2NhdGlvblxyXG5cdCogb2YgdGhlIGVudGl0eS5cclxuXHQqIEBtaXhpbiBuLXNvdW5kXHJcblx0KiBAbWVtYmVyb2YgbmF0aXZlXHJcblx0KiBAcHJvcCB7c3RyaW5nfSByZXMgLSBUaGUgcmVzb3VyY2UgaWRlbnRpZmllciBmb3IgYSBidWlsdC1pbiBzb3VuZCBjbGlwLlxyXG5cdCogQHByb3Age3N0cmluZ30gc3JjIC0gQSBVUkwgdG8gYW4gZXh0ZXJuYWwgc291bmQgY2xpcC4gVGhlIHNvdW5kIGNhbiBiZSBpbiBXQVYsIE9HRyBvciBNUDMgZm9ybWF0LiBIb3dldmVyLiBvbmx5XHJcblx0KiBXQVYgaXMgc3VwcG9ydGVkIG9uIGFsbCBwbGF0Zm9ybXMuIE1QMyBpcyBzdXBwb3J0ZWQgb24gR2VhciBWUiBhbmQgT0dHIGlzIHN1cHBvcnRlZCBvbiBkZXNrdG9wLlxyXG5cdCogQHByb3Age3N0cmluZ30gb24gLSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdGhhdCB3aWxsIHBsYXkgdGhpcyBzb3VuZCBjbGlwLlxyXG5cdCogQHByb3Age2Jvb2xlYW59IGxvb3A9ZmFsc2UgLSBUZWxscyB0aGUgY2xpcCB0byBsb29wIGJhY2sgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY2xpcFxyXG5cdCogb25jZSBpdCdzIGZpbmlzaGVkLlxyXG5cdCogQHByb3Age2Jvb2xlYW59IGF1dG9wbGF5PWZhbHNlIC0gVGVsbHMgdGhlIGNsaXAgdG8gc3RhcnQgYXV0b21hdGljYWxseSB3aGVuXHJcblx0KiB0aGUgc2NlbmUgbG9hZHMsIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgYHBsYXlTb3VuZCgpYC5cclxuXHQqIEBwcm9wIHtib29sZWFufSBvbmVzaG90PWZhbHNlIC0gVGVsbHMgdGhlIGNsaXAgdG8gY2xlYW4gaXRzZWxmIHVwIHdoZW4gaXRcclxuXHQqIGZpbmlzaGVzIHBsYXlpbmcuIEFsbG93cyBmb3Igb3ZlcmxhcHBpbmcgaW5zdGFuY2VzIG9mIHRoZSBzb3VuZC5cclxuXHQqIEBwcm9wIHtudW1iZXJ9IHZvbHVtZT0xIC0gVGhlIHZvbHVtZSBvZiB0aGUgY2xpcCwgZnJvbSBbMCwxXS5cclxuXHQqIEBwcm9wIHtudW1iZXJ9IHNwYXRpYWxCbGVuZD0xIC0gSG93IHNwYXRpYWxpemVkIGEgc291bmQgaXMsIGZyb20gWzAsMV0uXHJcblx0KiBBIHZhbHVlIG9mIDEgd2lsbCBiZSBmdWxseSBsb2NhbGl6ZWQsIGFuZCB0aGUgc291bmQgd2lsbCBwYW4gbGVmdCBhbmRcclxuXHQqIHJpZ2h0IGFzIHlvdSB0dXJuIHlvdXIgaGVhZC4gQSB2YWx1ZSBvZiAwIG1ha2VzIGl0IG5vbi1zcGF0aWFsaXplZCwgYW5kXHJcblx0KiBpdCB3aWxsIGFsd2F5cyBiZSBoZWFyZCBpbiBib3RoIGVhcnMuXHJcblx0KiBAcHJvcCB7bnVtYmVyfSBwaXRjaD0xIC0gVGhlIHNwZWVkIG11bHRpcGxpZXIgZm9yIHRoZSBzb3VuZC4gMC41IGlzIG9uZVxyXG5cdCogb2N0YXZlIGRvd24sIGFuZCAyIGlzIG9uZSBvY3RhdmUgdXAuXHJcblx0KiBAcHJvcCB7bnVtYmVyfSBtaW5EaXN0YW5jZT0xIC0gSW5zaWRlIHRoaXMgZGlzdGFuY2UgaW4gbWV0ZXJzLFxyXG5cdCogdGhlIHNvdW5kIHZvbHVtZSBpcyBhdCBmdWxsIHZvbHVtZS5cclxuXHQqIEBwcm9wIHtudW1iZXJ9IG1heERpc3RhbmNlPTEyIC0gSWYgcm9sbG9mZiBpcyAnbG9nYXJpdGhtaWMnLCB0aGUgc291bmQgd2lsbCBzdG9wIGF0dGVudWF0aW5nIGF0IHRoaXMgZGlzdGFuY2UuXHJcblx0KiBJZiByb2xsb2ZmIGlzICdsaW5lYXInIG9yICdjb3NpbmUnLCB0aGUgc291bmQgd2lsbCBiZSBzaWxlbnQgYXQgdGhpcyBkaXN0YW5jZS5cclxuXHQqIEBwcm9wIHtzdHJpbmd9IHJvbGxvZmY9J2xvZ2FyaXRobWljJyAtIFNldCB0aGlzIHRvICdsaW5lYXInIG9yICdjb3NpbmUnIGlmIHlvdSB3YW50IHRvIGN1dCBzb3VuZHMgb2ZmIGF0IGFcclxuXHQqIG1heERpc3RhbmNlLlxyXG5cdCovXHJcblx0LyoqXHJcblx0KiBGaXJlZCB3aGVuIGEgc291bmQgaGFzIGxvYWRlZCBhbmQgaXMgcmVhZHkgdG8gYmUgcGxheWVkXHJcblx0KiBAZXZlbnQgbmF0aXZlLm4tc291bmQjbi1zb3VuZC1sb2FkZWRcclxuXHQqL1xyXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbi1zb3VuZCcsIHtcclxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIHNyYyA9IHRoaXMuZGF0YS5zcmM7XHJcblx0XHRcdGlmIChzcmMgJiYgIXNyYy5zdGFydHNXaXRoKCdodHRwJykpIHtcclxuXHRcdFx0XHRpZiAoc3JjLnN0YXJ0c1dpdGgoJy8nKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5kYXRhLnNyYyA9IGxvY2F0aW9uLm9yaWdpbiArIHNyYztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR2YXIgY3VyclBhdGggPSBsb2NhdGlvbi5wYXRobmFtZTtcclxuXHRcdFx0XHRcdGlmICghY3VyclBhdGguZW5kc1dpdGgoJy8nKSkge1xyXG5cdFx0XHRcdFx0XHRjdXJyUGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpLmpvaW4oJy8nKSArICcvJztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMuZGF0YS5zcmMgPSBsb2NhdGlvbi5vcmlnaW4gKyBjdXJyUGF0aCArIHNyYztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0bmF0aXZlQ29tcG9uZW50SW5pdC5jYWxsKHRoaXMpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCogU3RvcCB0aGUgcGxheWluZyBzb3VuZCwgYW5kIHByZXNlcnZlIHBvc2l0aW9uIGluIGNsaXAuXHJcblx0XHQqIEBtZXRob2QgbmF0aXZlLm4tc291bmQjcGF1c2VTb3VuZFxyXG5cdFx0Ki9cclxuXHRcdHBhdXNlU291bmQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y2FsbENvbXBvbmVudC5jYWxsKHRoaXMsICdwYXVzZScpO1xyXG5cdFx0XHR0aGlzLmVsLmVtaXQoJ3NvdW5kLXBhdXNlZCcpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCogU3RhcnQgdGhlIHNvdW5kIHBsYXlpbmcuXHJcblx0XHQqIEBtZXRob2QgbmF0aXZlLm4tc291bmQjcGxheVNvdW5kXHJcblx0XHQqL1xyXG5cdFx0cGxheVNvdW5kOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGNhbGxDb21wb25lbnQuY2FsbCh0aGlzLCAncGxheScpO1xyXG5cdFx0XHR0aGlzLmVsLmVtaXQoJ3NvdW5kLXBsYXllZCcpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCogSnVtcCB0byBhIHBvc2l0aW9uIGluIHRoZSBjbGlwLlxyXG5cdFx0KiBAbWV0aG9kIG5hdGl2ZS5uLXNvdW5kI3NlZWtcclxuXHRcdCogQHBhcmFtIHtudW1iZXJ9IHRpbWUgLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgdG8ganVtcCB0by5cclxuXHRcdCovXHJcblx0XHRzZWVrOiBmdW5jdGlvbiAodGltZSkge1xyXG5cdFx0XHRjYWxsQ29tcG9uZW50LmNhbGwodGhpcywgJ3NlZWsnLCB7dGltZTogdGltZX0pO1xyXG5cdFx0fSxcclxuXHRcdHJlbW92ZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRuYXRpdmVDb21wb25lbnRSZW1vdmUuY2FsbCh0aGlzKTtcclxuXHRcdFx0aWYgKHRoaXMucGxheUhhbmRsZXIpIHtcclxuXHRcdFx0ICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIob2xkRGF0YS5vbiwgdGhpcy5wbGF5SGFuZGxlcik7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHR1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XHJcblx0XHRcdG5hdGl2ZUNvbXBvbmVudFVwZGF0ZS5jYWxsKHRoaXMsIG9sZERhdGEpO1xyXG5cdFx0XHRpZiAodGhpcy5wbGF5SGFuZGxlcikge1xyXG5cdFx0XHQgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihvbGREYXRhLm9uLCB0aGlzLnBsYXlIYW5kbGVyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5kYXRhLm9uKSB7XHJcblx0XHRcdCAgdGhpcy5wbGF5SGFuZGxlciA9IHRoaXMucGxheVNvdW5kLmJpbmQodGhpcyk7XHJcblx0XHRcdCAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZGF0YS5vbiwgdGhpcy5wbGF5SGFuZGxlcik7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRzY2hlbWE6IHtcclxuXHRcdFx0b246IHsgdHlwZTogJ3N0cmluZycgfSxcclxuXHRcdFx0cmVzOiB7IHR5cGU6ICdzdHJpbmcnIH0sXHJcblx0XHRcdHNyYzogeyB0eXBlOiAnc3RyaW5nJyB9LFxyXG5cdFx0XHRsb29wOiB7IHR5cGU6ICdib29sZWFuJyB9LFxyXG5cdFx0XHR2b2x1bWU6IHsgdHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IDEgfSxcclxuXHRcdFx0YXV0b3BsYXk6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXHJcblx0XHRcdG9uZXNob3Q6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXHJcblx0XHRcdHNwYXRpYWxCbGVuZDogeyB0eXBlOiAnZmxvYXQnLCBkZWZhdWx0OiAxIH0sXHJcblx0XHRcdHBpdGNoOiB7IHR5cGU6ICdmbG9hdCcsIGRlZmF1bHQ6IDEgfSxcclxuXHRcdFx0bWluRGlzdGFuY2U6IHsgdHlwZTogJ2Zsb2F0JywgZGVmYXVsdDogMSB9LFxyXG5cdFx0XHRtYXhEaXN0YW5jZTogeyB0eXBlOiAnZmxvYXQnLCBkZWZhdWx0OiAxMiB9LFxyXG5cdFx0XHRyb2xsb2ZmOiB7IHR5cGU6ICdzdHJpbmcnLCBkZWZhdWx0OiAnbG9nYXJpdGhtaWMnIH0sXHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSgpO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL25hdGl2ZS1jb21wb25lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXHJcbiogU3luYyB0aGUgY29sb3IgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBiZXR3ZWVuIGNsaWVudHMuXHJcbiogUmVxdWlyZXMgYm90aCBhIHtAbGluayBzeW5jLnN5bmMtc3lzdGVtfSBjb21wb25lbnQgb24gdGhlIGBhLXNjZW5lYCwgYW5kIGFcclxuKiB7QGxpbmsgc3luYy5zeW5jfSBjb21wb25lbnQgb24gdGhlIHRhcmdldCBlbnRpdHkuXHJcbiogQG1peGluIHN5bmMtY29sb3JcclxuKiBAbWVtYmVyb2Ygc3luY1xyXG4qL1xyXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3N5bmMtY29sb3InLFxyXG57XHJcblx0ZGVwZW5kZW5jaWVzOiBbJ3N5bmMnXSxcclxuXHRzY2hlbWE6IHtcclxuXHR9LFxyXG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBjb21wb25lbnQgPSB0aGlzO1xyXG5cdFx0dmFyIHN5bmMgPSBjb21wb25lbnQuZWwuY29tcG9uZW50cy5zeW5jO1xyXG5cdFx0aWYoc3luYy5pc0Nvbm5lY3RlZCkgc3RhcnQoKTsgZWxzZSBjb21wb25lbnQuZWwuYWRkRXZlbnRMaXN0ZW5lcignY29ubmVjdGVkJywgc3RhcnQpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHN0YXJ0KCl7XHJcblx0XHRcdHZhciBjb2xvclJlZiA9IHN5bmMuZGF0YVJlZi5jaGlsZCgnbWF0ZXJpYWwvY29sb3InKTtcclxuXHJcblx0XHRcdHZhciByZWZDaGFuZ2VkTG9ja2VkID0gZmFsc2U7XHJcblxyXG5cdFx0XHR2YXIgZmlyc3RWYWx1ZSA9IHRydWU7XHJcblxyXG5cdFx0XHRjb21wb25lbnQuZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9uZW50Y2hhbmdlZCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdFx0XHRcdHZhciBuYW1lID0gZXZlbnQuZGV0YWlsLm5hbWU7XHJcblx0XHRcdFx0dmFyIG9sZERhdGEgPSBldmVudC5kZXRhaWwub2xkRGF0YTtcclxuXHRcdFx0XHR2YXIgbmV3RGF0YSA9IGV2ZW50LmRldGFpbC5uZXdEYXRhO1xyXG5cclxuXHRcdFx0XHRpZiAobmFtZSAhPT0gJ21hdGVyaWFsJykgcmV0dXJuO1xyXG5cdFx0XHRcdGlmIChyZWZDaGFuZ2VkTG9ja2VkKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGlmIChvbGREYXRhLmNvbG9yICE9PSBuZXdEYXRhLmNvbG9yKSB7XHJcblx0XHRcdFx0XHRpZihzeW5jLmlzTWluZSl7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7Ly9Gb3Igc29tZSByZWFzb24gQS1GcmFtZSBoYXMgYSBtaXNjb25maWd1cmVkIG1hdGVyaWFsIHJlZmVyZW5jZSBpZiB3ZSBkbyB0aGlzIHRvbyBlYXJseVxyXG5cdFx0XHRcdFx0XHRcdGNvbG9yUmVmLnNldChuZXdEYXRhLmNvbG9yKTtcclxuXHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNvbG9yUmVmLm9uKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG5cdFx0XHRcdGlmIChzeW5jLmlzTWluZSAmJiAhZmlyc3RWYWx1ZSkgcmV0dXJuO1xyXG5cdFx0XHRcdHZhciBjb2xvciA9IHNuYXBzaG90LnZhbCgpO1xyXG5cclxuXHRcdFx0XHRyZWZDaGFuZ2VkTG9ja2VkID0gdHJ1ZTtcclxuXHRcdFx0XHRjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsICdjb2xvcicsIGNvbG9yKTtcclxuXHRcdFx0XHRyZWZDaGFuZ2VkTG9ja2VkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdGZpcnN0VmFsdWUgPSBmYWxzZTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9zeW5jLWNvbG9yLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXHJcbiogU3luY2hyb25pemUgdGhlIHBsYXliYWNrIHN0YXRlIG9mIGFuIHtAbGluayBuLm4tc291bmR9IGNvbXBvbmVudCBiZXR3ZWVuIGNsaWVudHMuXHJcbiogUmVxdWlyZXMgYm90aCBhIHtAbGluayBzeW5jLnN5bmMtc3lzdGVtfSBjb21wb25lbnQgb24gdGhlIGBhLXNjZW5lYCwgYW5kIGFcclxuKiB7QGxpbmsgc3luYy5zeW5jfSBjb21wb25lbnQgb24gdGhlIHRhcmdldCBlbnRpdHkuXHJcbiogQG1peGluIHN5bmMtbi1zb3VuZFxyXG4qIEBtZW1iZXJvZiBzeW5jXHJcbiovXHJcbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc3luYy1uLXNvdW5kJyxcclxue1xyXG5cdGRlcGVuZGVuY2llczogWydzeW5jJ10sXHJcblx0c2NoZW1hOiB7IH0sXHJcblx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGNvbXBvbmVudCA9IHRoaXM7XHJcblx0XHR2YXIgc3luYyA9IGNvbXBvbmVudC5lbC5jb21wb25lbnRzLnN5bmM7XHJcblx0XHR2YXIgc2NlbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhLXNjZW5lJyk7XHJcblx0XHR2YXIgc3luY1N5cyA9IHNjZW5lLnN5c3RlbXNbJ3N5bmMtc3lzdGVtJ107XHJcblx0XHRpZihzeW5jLmlzQ29ubmVjdGVkKSBzdGFydCgpOyBlbHNlIGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0ZWQnLCBzdGFydCk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gc3RhcnQoKXtcclxuXHRcdFx0Y29tcG9uZW50LnNvdW5kU3RhdGVSZWYgPSBzeW5jLmRhdGFSZWYuY2hpbGQoJ3NvdW5kL3N0YXRlJyk7XHJcblx0XHRcdGNvbXBvbmVudC5zb3VuZEV2ZW50UmVmID0gc3luYy5kYXRhUmVmLmNoaWxkKCdzb3VuZC9ldmVudCcpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gc2VuZEV2ZW50KGV2ZW50KSB7XHJcblx0XHRcdFx0aWYgKCFzeW5jLmlzTWluZSkgcmV0dXJuO1xyXG5cdFx0XHRcdHZhciBldmVudCA9IHtcclxuXHRcdFx0XHRcdHR5cGU6IGV2ZW50LnR5cGUsXHJcblx0XHRcdFx0XHRzZW5kZXI6IHN5bmNTeXMuY2xpZW50SWQsXHJcblx0XHRcdFx0XHRlbDogY29tcG9uZW50LmVsLmlkLFxyXG5cdFx0XHRcdFx0dGltZTogRGF0ZS5ub3coKVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0Y29tcG9uZW50LnNvdW5kRXZlbnRSZWYuc2V0KGV2ZW50KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3NvdW5kLXBsYXllZCcsIHNlbmRFdmVudCk7XHJcblx0XHRcdGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKCdzb3VuZC1wYXVzZWQnLCBzZW5kRXZlbnQpO1xyXG5cclxuXHRcdFx0Y29tcG9uZW50LnNvdW5kRXZlbnRSZWYub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcblx0XHRcdFx0aWYgKHN5bmMuaXNNaW5lKSByZXR1cm47XHJcblx0XHRcdFx0dmFyIGV2ZW50ID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0aWYgKCFldmVudCkgcmV0dXJuO1xyXG5cdFx0XHRcdGlmIChldmVudC5lbCA9PT0gY29tcG9uZW50LmVsLmlkKSB7XHJcblx0XHRcdFx0XHR2YXIgc291bmQgPSBjb21wb25lbnQuZWwuY29tcG9uZW50c1snbi1zb3VuZCddO1xyXG5cdFx0XHRcdFx0aWYgKGV2ZW50LnR5cGUgPT09ICdzb3VuZC1wbGF5ZWQnKSB7XHJcblx0XHRcdFx0XHRcdHNvdW5kLnBsYXlTb3VuZCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdHNvdW5kLnBhdXNlU291bmQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvbmVudGNoYW5nZWQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdFx0XHRpZiAoIXN5bmMuaXNNaW5lKSByZXR1cm47XHJcblx0XHRcdFx0dmFyIG5hbWUgPSBldmVudC5kZXRhaWwubmFtZTtcclxuXHRcdFx0XHRpZiAobmFtZSAhPT0gJ24tc291bmQnKSByZXR1cm47XHJcblx0XHRcdFx0Y29tcG9uZW50LnNvdW5kU3RhdGVSZWYuc2V0KGV2ZW50LmRldGFpbC5uZXdEYXRhKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRjb21wb25lbnQuc291bmRTdGF0ZVJlZi5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuXHRcdFx0XHRpZiAoc3luYy5pc01pbmUpIHJldHVybjtcclxuXHRcdFx0XHR2YXIgc3RhdGUgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRpZiAoIXN0YXRlKSByZXR1cm47XHJcblx0XHRcdFx0Y29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZSgnbi1zb3VuZCcsIHN0YXRlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRyZW1vdmU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHRoaXMuc291bmRTdGF0ZVJlZi5vZmYoJ3ZhbHVlJyk7XHJcblx0XHR0aGlzLnNvdW5kRXZlbnRSZWYub2ZmKCd2YWx1ZScpO1xyXG5cdH1cclxufSk7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvc3luYy1uLXNvdW5kLmpzXG4gKiogbW9kdWxlIGlkID0gN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXHJcbiogQ29ubmVjdCB0byBhIHJlbW90ZSBGaXJlYmFzZSBzZXJ2ZXIsIGFuZCBmYWNpbGl0YXRlIHN5bmNocm9uaXphdGlvbi4gVGhlc2VcclxuKiBvcHRpb25zIGNvcnJlc3BvbmQgZXhhY3RseSB3aXRoIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yXHJcbiogW2FsdHNwYWNlLnV0aWxpdGllcy5zeW5jLmNvbm5lY3Rde0BsaW5rIGh0dHA6Ly9hbHRzcGFjZXZyLmdpdGh1Yi5pby9BbHRzcGFjZVNESy9kb2MvbW9kdWxlLWFsdHNwYWNlX3V0aWxpdGllc19zeW5jLmh0bWwjLmNvbm5lY3R9LlxyXG4qIFRoaXMgY29tcG9uZW50IG11c3QgYmUgcHJlc2VudCBvbiBgYS1zY2VuZWAgZm9yIGFueSBvdGhlciBzeW5jIGNvbXBvbmVudHMgdG8gd29yay5cclxuKiBAbWVtYmVyb2Ygc3luY1xyXG4qIEBtaXhpbiBzeW5jLXN5c3RlbVxyXG4qIEBwcm9wIHtzdHJpbmd9IGF1dGhvciAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHlvdSBvciB5b3VyIG9yZ2FuaXphdGlvbi5cclxuKiBAcHJvcCB7c3RyaW5nfSBhcHAgLSBUaGUgbmFtZSBvZiB0aGUgYXBwLlxyXG4qIEBwcm9wIHtzdHJpbmd9IHJlZlVybCAtIE92ZXJyaWRlIHRoZSBiYXNlIHJlZmVyZW5jZS4gU2V0IHRoaXMgdG8gdXNlIHlvdXIgb3duIEZpcmViYXNlLlxyXG4qIEBwcm9wIHtzdHJpbmd9IGluc3RhbmNlIC0gT3ZlcnJpZGUgdGhlIGluc3RhbmNlIElELiBDYW4gYWxzbyBiZSBvdmVycmlkZGVuIHdpdGhcclxuKiBhIFVSTCBwYXJhbWV0ZXIuXHJcbiovXHJcbkFGUkFNRS5yZWdpc3RlclN5c3RlbSgnc3luYy1zeXN0ZW0nLFxyXG57XHJcblx0c2NoZW1hOiB7XHJcblx0XHRhdXRob3I6IHsgdHlwZTogJ3N0cmluZycsIGRlZmF1bHQ6IG51bGwgfSxcclxuXHRcdGFwcDogeyB0eXBlOiAnc3RyaW5nJywgZGVmYXVsdDogbnVsbCB9LFxyXG5cdFx0aW5zdGFuY2U6IHsgdHlwZTogJ3N0cmluZycsIGRlZmF1bHQ6IG51bGwgfSxcclxuXHRcdHJlZlVybDogeyB0eXBlOiAnc3RyaW5nJywgZGVmYXVsdDogbnVsbCB9XHJcblx0fSxcclxuXHRpbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjb21wb25lbnQgPSB0aGlzO1xyXG5cclxuXHRcdGlmKCF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5hcHApe1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1RoZSBzeW5jLXN5c3RlbSBtdXN0IGJlIHByZXNlbnQgb24gdGhlIHNjZW5lIGFuZCBjb25maWd1cmVkIHdpdGggcmVxdWlyZWQgZGF0YS4nKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbXBvbmVudC5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG5cdFx0Y29uc29sZS5sb2codGhpcy5kYXRhKTtcclxuXHRcdGFsdHNwYWNlLnV0aWxpdGllcy5zeW5jLmNvbm5lY3Qoe1xyXG5cdFx0XHRhdXRob3JJZDogdGhpcy5kYXRhLmF1dGhvcixcclxuXHRcdFx0YXBwSWQ6IHRoaXMuZGF0YS5hcHAsXHJcblx0XHRcdGluc3RhbmNlSWQ6IHRoaXMuZGF0YS5pbnN0YW5jZSxcclxuXHRcdFx0YmFzZVJlZlVybDogdGhpcy5kYXRhLnJlZlVybFxyXG5cdFx0fSkudGhlbihmdW5jdGlvbihjb25uZWN0aW9uKSB7XHJcblx0XHRcdHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcblxyXG5cdFx0XHR0aGlzLnNjZW5lUmVmID0gdGhpcy5jb25uZWN0aW9uLmluc3RhbmNlLmNoaWxkKCdzY2VuZScpO1xyXG5cdFx0XHR0aGlzLmNsaWVudHNSZWYgPSB0aGlzLmNvbm5lY3Rpb24uaW5zdGFuY2UuY2hpbGQoJ2NsaWVudHMnKTtcclxuXHJcblx0XHRcdC8vIHRlbXBvcmFyeSB3YXkgb2YgaGF2aW5nIHVuaXF1ZSBpZGVudGlmaWVycyBmb3IgZWFjaCBjbGllbnRcclxuXHRcdFx0dGhpcy5jbGllbnRJZCA9IHRoaXMuc2NlbmVFbC5vYmplY3QzRC51dWlkO1xyXG5cdFx0XHR2YXIgbWFzdGVyQ2xpZW50SWQ7XHJcblx0XHRcdHRoaXMuY2xpZW50c1JlZi5vbihcInZhbHVlXCIsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG5cdFx0XHRcdHZhciBjbGllbnRJZHMgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcblx0XHRcdFx0dmFyIG1hc3RlckNsaWVudEtleSA9IE9iamVjdC5rZXlzKGNsaWVudElkcylbMF07XHJcblx0XHRcdFx0bWFzdGVyQ2xpZW50SWQgPSBjbGllbnRJZHNbbWFzdGVyQ2xpZW50S2V5XTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLmNsaWVudHNSZWYub24oJ2NoaWxkX2FkZGVkJywgZnVuY3Rpb24oY2hpbGRTbmFwc2hvdCkge1xyXG5cdFx0XHRcdHZhciBqb2luZWRDbGllbnRJZCA9IGNoaWxkU25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0Ly9sZXQgdGhlIG1hc3RlciBjbGllbnQgZmxhZyBnZXQgc2V0IGZpcnN0XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0Y29tcG9uZW50LnNjZW5lRWwuZW1pdCgnY2xpZW50am9pbmVkJywge2lkOiBqb2luZWRDbGllbnRJZH0sIGZhbHNlKTtcclxuXHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLmNsaWVudHNSZWYub24oJ2NoaWxkX3JlbW92ZWQnLCBmdW5jdGlvbihjaGlsZFNuYXBzaG90KSB7XHJcblx0XHRcdFx0dmFyIGxlZnRDbGllbnRJZCA9IGNoaWxkU25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0Ly9sZXQgdGhlIG1hc3RlciBjbGllbnQgZmxhZyBnZXQgc2V0IGZpcnN0XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0Y29tcG9uZW50LnNjZW5lRWwuZW1pdCgnY2xpZW50bGVmdCcsIHtpZDogbGVmdENsaWVudElkfSwgZmFsc2UpO1xyXG5cdFx0XHRcdH0sIDApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIGFkZCBvdXIgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNvbm5lY3RlZCBjbGllbnRzLFxyXG5cdFx0XHQvLyBidXQgaGF2ZSBpdCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYnkgZmlyZWJhc2UgaWYgd2UgZGlzY29ubmVjdCBmb3IgYW55IHJlYXNvblxyXG5cdFx0XHR0aGlzLmNsaWVudHNSZWYucHVzaCh0aGlzLmNsaWVudElkKS5vbkRpc2Nvbm5lY3QoKS5yZW1vdmUoKTtcclxuXHJcblxyXG5cdFx0XHR0aGlzLmNvbm5lY3Rpb24uaW5zdGFuY2UuY2hpbGQoJ2luaXRpYWxpemVkJykub25jZSgndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuXHRcdFx0XHR2YXIgc2hvdWxkSW5pdGlhbGl6ZSA9ICFzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRzbmFwc2hvdC5yZWYoKS5zZXQodHJ1ZSk7XHJcblxyXG5cdFx0XHRcdGNvbXBvbmVudC5zY2VuZUVsLmVtaXQoJ2Nvbm5lY3RlZCcsIHsgc2hvdWxkSW5pdGlhbGl6ZTogc2hvdWxkSW5pdGlhbGl6ZSB9LCBmYWxzZSk7XHJcblx0XHRcdFx0Y29tcG9uZW50LmlzQ29ubmVjdGVkID0gdHJ1ZTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHJcblxyXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2lzTWFzdGVyQ2xpZW50Jywge1xyXG5cdFx0XHRcdGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbWFzdGVyQ2xpZW50SWQgPT09IHRoaXMuY2xpZW50SWQ7IH0uYmluZCh0aGlzKVxyXG5cdFx0XHR9KTtcclxuXHRcdH0uYmluZCh0aGlzKSk7XHJcblx0fVxyXG59KTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9zeW5jLXN5c3RlbS5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vVE9ETzogV2UgbmVlZCB0byBmaWd1cmUgb3V0IGEgd2F5IHRvIHJlY2lldmUgb3VyIGZpcnN0IHVwZGF0ZSB3aXRob3V0IGNhcmluZyBhYm91dCBvd25lcnNoaXAuXHJcbi8vIGZpcnN0VmFsdWUgaXMgcHJvYmFibHkgbm90IHRoZSByaWdodCB3YXkgdG8gZ28sIHByb2JhYmx5IHNvbWV0aGluZyBhYm91dCBoYXZpbmcgc2VudCB5ZXQuIE5lZWQgdG8gY2hhbmdlIGZvciBib3RoXHJcblxyXG4vKipcclxuKiBTeW5jaHJvbml6ZSB0aGUgcG9zaXRpb24sIHJvdGF0aW9uLCBhbmQgc2NhbGUgb2YgdGhpcyBvYmplY3Qgd2l0aCBhbGwgY2xpZW50cy5cclxuKiBSZXF1aXJlcyBib3RoIGEge0BsaW5rIHN5bmMuc3luYy1zeXN0ZW19IGNvbXBvbmVudCBvbiB0aGUgYGEtc2NlbmVgLCBhbmQgYVxyXG4qIHtAbGluayBzeW5jLnN5bmN9IGNvbXBvbmVudCBvbiB0aGUgdGFyZ2V0IGVudGl0eS5cclxuKiBAbWl4aW4gc3luYy10cmFuc2Zvcm1cclxuKiBAbWVtYmVyb2Ygc3luY1xyXG4qL1xyXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3N5bmMtdHJhbnNmb3JtJyxcclxue1xyXG5cdGRlcGVuZGVuY2llczogWydzeW5jJ10sXHJcblx0c2NoZW1hOiB7XHJcblx0fSxcclxuXHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgY29tcG9uZW50ID0gdGhpcztcclxuXHRcdHZhciBzeW5jID0gY29tcG9uZW50LmVsLmNvbXBvbmVudHMuc3luYztcclxuXHRcdGlmKHN5bmMuaXNDb25uZWN0ZWQpIHN0YXJ0KCk7IGVsc2UgY29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3RlZCcsIHN0YXJ0KTtcclxuXHJcblx0XHRmdW5jdGlvbiBzdGFydCgpe1xyXG5cclxuXHRcdFx0dmFyIHBvc2l0aW9uUmVmID0gc3luYy5kYXRhUmVmLmNoaWxkKCdwb3NpdGlvbicpO1xyXG5cdFx0XHR2YXIgcm90YXRpb25SZWYgPSBzeW5jLmRhdGFSZWYuY2hpbGQoJ3JvdGF0aW9uJyk7XHJcblx0XHRcdHZhciBzY2FsZVJlZiA9IHN5bmMuZGF0YVJlZi5jaGlsZCgnc2NhbGUnKTtcclxuXHJcblx0XHRcdGNvbXBvbmVudC51cGRhdGVSYXRlID0gMTAwO1xyXG5cclxuXHRcdFx0dmFyIHN0b3BwZWRBbmltYXRpb25zID0gW107XHJcblx0XHRcdC8vcGF1c2UgYWxsIGFuaW1hdGlvbnMgb24gb3duZXJzaGlwIGxvc3NcclxuXHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ293bmVyc2hpcGxvc3QnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgY2hpbGRyZW4gPSBjb21wb25lbnQuZWwuY2hpbGRyZW47XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0dmFyIHRhZ05hbWUgPSBjaGlsZHJlbltpXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRpZiAodGFnTmFtZSA9PT0gXCJhLWFuaW1hdGlvblwiKSB7XHJcblx0XHRcdFx0XHRcdHN0b3BwZWRBbmltYXRpb25zLnB1c2goY2hpbGRyZW5baV0pO1xyXG5cdFx0XHRcdFx0XHRjaGlsZHJlbltpXS5zdG9wKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ293bmVyc2hpcGdhaW5lZCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0b3BwZWRBbmltYXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHR2YXIgYW5pbWF0aW9uID0gc3RvcHBlZEFuaW1hdGlvbnNbaV07XHJcblx0XHRcdFx0XHRhbmltYXRpb24uc3RhcnQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c3RvcHBlZEFuaW1hdGlvbnMgPSBbXTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBvblRyYW5zZm9ybShzbmFwc2hvdCwgY29tcG9uZW50TmFtZSkge1xyXG5cdFx0XHRcdGlmIChzeW5jLmlzTWluZSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHR2YXIgdmFsdWUgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRpZiAoIXZhbHVlKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGNvbXBvbmVudC5lbC5zZXRBdHRyaWJ1dGUoY29tcG9uZW50TmFtZSwgdmFsdWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwb3NpdGlvblJlZi5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuXHRcdFx0XHRvblRyYW5zZm9ybShzbmFwc2hvdCwgJ3Bvc2l0aW9uJyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cm90YXRpb25SZWYub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcblx0XHRcdFx0b25UcmFuc2Zvcm0oc25hcHNob3QsICdyb3RhdGlvbicpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNjYWxlUmVmLm9uKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG5cdFx0XHRcdG9uVHJhbnNmb3JtKHNuYXBzaG90LCAnc2NhbGUnKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR2YXIgc2VuZFBvc2l0aW9uID0gdGhyb3R0bGUoZnVuY3Rpb24odmFsdWUpe1xyXG5cdFx0XHRcdHBvc2l0aW9uUmVmLnNldCh2YWx1ZSk7XHJcblx0XHRcdH0sIGNvbXBvbmVudC51cGRhdGVSYXRlKTtcclxuXHJcblx0XHRcdHZhciBzZW5kUm90YXRpb24gPSB0aHJvdHRsZShmdW5jdGlvbih2YWx1ZSl7XHJcblx0XHRcdFx0cm90YXRpb25SZWYuc2V0KHZhbHVlKTtcclxuXHRcdFx0fSwgY29tcG9uZW50LnVwZGF0ZVJhdGUpO1xyXG5cclxuXHRcdFx0dmFyIHNlbmRTY2FsZSA9IHRocm90dGxlKGZ1bmN0aW9uKHZhbHVlKXtcclxuXHRcdFx0XHRzY2FsZVJlZi5zZXQodmFsdWUpO1xyXG5cdFx0XHR9LCBjb21wb25lbnQudXBkYXRlUmF0ZSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBvbkNvbXBvbmVudENoYW5nZWQoZXZlbnQpe1xyXG5cdFx0XHRcdGlmICghc3luYy5pc01pbmUpIHJldHVybjtcclxuXHJcblx0XHRcdFx0dmFyIG5hbWUgPSBldmVudC5kZXRhaWwubmFtZTtcclxuXHRcdFx0XHR2YXIgbmV3RGF0YSA9IGV2ZW50LmRldGFpbC5uZXdEYXRhO1xyXG5cclxuXHRcdFx0XHRpZiAobmFtZSA9PT0gJ3Bvc2l0aW9uJykge1xyXG5cdFx0XHRcdFx0c2VuZFBvc2l0aW9uKG5ld0RhdGEpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAobmFtZSA9PT0gJ3JvdGF0aW9uJykge1xyXG5cdFx0XHRcdFx0c2VuZFJvdGF0aW9uKG5ld0RhdGEpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAobmFtZSA9PT0gJ3NjYWxlJykge1xyXG5cdFx0XHRcdFx0c2VuZFNjYWxlKG5ld0RhdGEpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9mcm9tIHVuZGVyc2NvcmUuanNcclxuXHRcdFx0ZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xyXG5cdFx0XHRcdHZhciB0aW1lb3V0LCBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XHJcblx0XHRcdFx0dmFyIHByZXZpb3VzID0gMDtcclxuXHRcdFx0XHRpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcclxuXHJcblx0XHRcdFx0dmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0ICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogRGF0ZS5ub3coKTtcclxuXHRcdFx0XHQgIHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdCAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuXHRcdFx0XHQgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHZhciB0aHJvdHRsZWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG5cdFx0XHRcdCAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcclxuXHRcdFx0XHQgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcclxuXHRcdFx0XHQgIGNvbnRleHQgPSB0aGlzO1xyXG5cdFx0XHRcdCAgYXJncyA9IGFyZ3VtZW50cztcclxuXHRcdFx0XHQgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XHJcblx0XHRcdFx0XHRpZiAodGltZW91dCkge1xyXG5cdFx0XHRcdFx0ICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcblx0XHRcdFx0XHQgIHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cHJldmlvdXMgPSBub3c7XHJcblx0XHRcdFx0XHRyZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG5cdFx0XHRcdFx0aWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XHJcblx0XHRcdFx0ICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcclxuXHRcdFx0XHQgIH1cclxuXHRcdFx0XHQgIHJldHVybiByZXN1bHQ7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0dGhyb3R0bGVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHRcdCAgcHJldmlvdXMgPSAwO1xyXG5cdFx0XHRcdCAgdGltZW91dCA9IGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gdGhyb3R0bGVkO1xyXG5cdFx0XHQgIH07XHJcblxyXG5cclxuXHRcdFx0Y29tcG9uZW50LmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvbmVudGNoYW5nZWQnLCBvbkNvbXBvbmVudENoYW5nZWQpO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvc3luYy10cmFuc2Zvcm0uanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcclxuKiBFbmFibGVzIHRoZSBzeW5jaHJvbml6YXRpb24gb2YgcHJvcGVydGllcyBvZiBlbnRpdGllcy4gQWxsIHByb3BlcnR5IHN5bmMgY29tcG9uZW50c1xyXG4qIHJlcXVpcmUgYm90aCBhIHtAbGluayBzeW5jLnN5bmMtc3lzdGVtfSBvbiBgYS1zY2VuZWAsIGFuZCBhIHtAbGluayBzeW5jLnN5bmN9XHJcbiogb24gdGhlIGVudGl0eSB0byBiZSBzeW5jZWQuXHJcbiogQG5hbWUgc3luY1xyXG4qIEBuYW1lc3BhY2Ugc3luY1xyXG4qIEBleGFtcGxlXHJcbiogPGEtc2NlbmUgc3luYy1zeXN0ZW09J2FwcDogZXhhbXBsZSBzeW5jOyBhdXRob3I6IGFsdHNwYWNldnInPlxyXG4qICAgPGEtZW50aXR5IHN5bmM9J293bk9uOiBjdXJzb3Jkb3duJyBzeW5jLWNvbG9yPjwvYS1lbnRpdHk+XHJcbiogPC9hLXNjZW5lPlxyXG4qL1xyXG5cclxuXHJcblxyXG4vKipcclxuKiBFbmFibGVzIHRoZSBzeW5jaHJvbml6YXRpb24gb2YgcHJvcGVydGllcyBvZiB0aGUgZW50aXR5LiBNdXN0IGJlIHVzZWQgaW5cclxuKiBjb25qdWN0aW9uIHdpdGggdGhlIHtAbGluayBzeW5jLnN5bmMtc3lzdGVtfSBjb21wb25lbnQgYW5kIGEgY29tcG9uZW50IGZvciBhXHJcbiogc3BlY2lmaWMgcHJvcGVydHkgKGUuZy4ge0BsaW5rIHN5bmMuc3luYy10cmFuc2Zvcm19KS5cclxuKiBAbWVtYmVyb2Ygc3luY1xyXG4qIEBtaXhpbiBzeW5jXHJcbiogQHByb3Age3N0cmluZ30gb3duT24gLSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQsIG9yIGEgbGlzdCBvZiBldmVudHMsIHRoYXRcclxuKiB3aWxsIGNhdXNlIHRoZSBsb2NhbCBjbGllbnQgdG8gdGFrZSBvd25lcnNoaXAgb2YgdGhpcyBvYmplY3QuIFRoaXMgZmllbGRcclxuKiBjYW5ub3QgYmUgdXBkYXRlZCBhZnRlciBpbml0aWFsaXphdGlvbi5cclxuKi9cclxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzeW5jJyxcclxue1xyXG5cdHNjaGVtYToge1xyXG5cdFx0bW9kZTogeyBkZWZhdWx0OiAnbGluaycgfSxcclxuXHRcdG93bk9uOiB7IHR5cGU6ICdzdHJpbmcnIH0gLy9jYW5ub3QgYmUgY2hhbmdlZCBhZnRlciBjcmVhdGlvblxyXG5cdH0sXHJcblx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIHNjZW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYS1zY2VuZScpO1xyXG5cdFx0dmFyIHN5bmNTeXMgPSBzY2VuZS5zeXN0ZW1zWydzeW5jLXN5c3RlbSddO1xyXG5cclxuXHRcdHZhciByZWY7XHJcblx0XHR2YXIga2V5O1xyXG5cdFx0dmFyIGRhdGFSZWY7XHJcblx0XHR2YXIgb3duZXJSZWY7XHJcblx0XHR2YXIgb3duZXJJZDtcclxuXHRcdHZhciBpc01pbmUgPSBmYWxzZTtcclxuXHJcblx0XHR2YXIgY29tcG9uZW50ID0gdGhpcztcclxuXHJcblx0XHRjb21wb25lbnQuaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuXHJcblx0XHRpZihzeW5jU3lzLmlzQ29ubmVjdGVkKSBzdGFydCgpOyBlbHNlIHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3RlZCcsIHN0YXJ0KTtcclxuXHJcblxyXG5cdFx0aWYoY29tcG9uZW50LmRhdGEub3duT24pXHJcblx0XHR7XHJcblx0XHRcdHZhciBvd25lcnNoaXBFdmVudHMgPSBjb21wb25lbnQuZGF0YS5vd25Pbi5zcGxpdCgvWyAsXSsvKTtcclxuXHRcdFx0Zm9yKHZhciBpID0gMCwgbWF4ID0gb3duZXJzaGlwRXZlbnRzLmxlbmd0aDsgaSA8IG1heDsgaSsrKXtcclxuXHRcdFx0XHRjb21wb25lbnQuZWwuYWRkRXZlbnRMaXN0ZW5lcihvd25lcnNoaXBFdmVudHNbaV0sIGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRpZihjb21wb25lbnQuaXNDb25uZWN0ZWQpe1xyXG5cdFx0XHRcdFx0XHRjb21wb25lbnQudGFrZU93bmVyc2hpcCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc3RhcnQoKXtcclxuXHRcdFx0Ly9NYWtlIHN1cmUgc29tZW9uZSBhbHdheXMgb3ducyBhbiBvYmplY3QuIElmIHRoZSBvd25lciBsZWF2ZXMgYW5kIHdlIGFyZSB0aGUgbWFzdGVyIGNsaWVudCwgd2Ugd2lsbCB0YWtlIGl0LlxyXG5cdFx0XHQvL1RoaXMgZW5zdXJlcywgZm9yIGV4YW1wbGUsIHRoYXQgc3luY2VkIGFuaW1hdGlvbnMga2VlcCBwbGF5aW5nXHJcblx0XHRcdHNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWVudGxlZnQnLCBmdW5jdGlvbihldmVudCl7XHJcblx0XHRcdFx0dmFyIHNob3VsZFRha2VPd25lcnNoaXAgPSAoIW93bmVySWQgfHwgb3duZXJJZCA9PT0gZXZlbnQuZGV0YWlsLmlkKSAmJiBzeW5jU3lzLmlzTWFzdGVyQ2xpZW50O1xyXG5cclxuXHRcdFx0XHRpZihzaG91bGRUYWtlT3duZXJzaGlwKSBjb21wb25lbnQudGFrZU93bmVyc2hpcCgpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmIChjb21wb25lbnQuZGF0YS5tb2RlID09PSAnbGluaycpIHtcclxuXHRcdFx0XHR2YXIgaWQgPSBjb21wb25lbnQuZWwuaWQ7XHJcblx0XHRcdFx0aWYgKCFpZCkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRW50aXRpZXMgY2Fubm90IGJlIHN5bmNlZCB1c2luZyBsaW5rIG1vZGUgd2l0aG91dCBhbiBpZC4nKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzeW5jU3lzOiAnICsgc3luY1N5cyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3N5bmNTeXMuc2NlbmVSZWY6ICcgKyBzeW5jU3lzLnNjZW5lUmVmKTtcclxuXHJcblx0XHRcdFx0bGluayhzeW5jU3lzLnNjZW5lUmVmLmNoaWxkKGlkKSk7XHJcblx0XHRcdFx0c2V0dXBSZWNlaXZlKCk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1Vuc3VwcG9ydGVkIHN5bmMgbW9kZTogJyArIGNvbXBvbmVudC5kYXRhLm1vZGUpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29tcG9uZW50LmlzQ29ubmVjdGVkID0gdHJ1ZTtcclxuXHRcdFx0Y29tcG9uZW50LmVsLmVtaXQoJ2Nvbm5lY3RlZCcsIG51bGwsIGZhbHNlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKGVudGl0eVJlZikge1xyXG5cdFx0XHRyZWYgPSBlbnRpdHlSZWY7XHJcblx0XHRcdGtleSA9IHJlZi5rZXkoKTtcclxuXHRcdFx0ZGF0YVJlZiA9IHJlZi5jaGlsZCgnZGF0YScpO1xyXG5cdFx0XHRjb21wb25lbnQuZGF0YVJlZiA9IGRhdGFSZWY7XHJcblx0XHRcdG93bmVyUmVmID0gcmVmLmNoaWxkKCdvd25lcicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNldHVwUmVjZWl2ZSgpIHtcclxuXHJcblx0XHRcdC8vaWYgbm9ib2R5IGhhcyBvd25lZCB0aGUgb2JqZWN0IHlldCwgd2Ugd2lsbC5cclxuXHRcdFx0b3duZXJSZWYudHJhbnNhY3Rpb24oZnVuY3Rpb24gKG93bmVyKSB7XHJcblx0XHRcdFx0aWYgKG93bmVyKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRvd25lclJlZi5vbkRpc2Nvbm5lY3QoKS5zZXQobnVsbCk7XHJcblx0XHRcdFx0cmV0dXJuIHN5bmNTeXMuY2xpZW50SWQ7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0b3duZXJSZWYub24oJ3ZhbHVlJyxcclxuXHRcdFx0XHRmdW5jdGlvbihzbmFwc2hvdCkge1xyXG5cdFx0XHRcdFx0dmFyIG5ld093bmVySWQgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcblx0XHRcdFx0XHR2YXIgZ2FpbmVkID0gbmV3T3duZXJJZCA9PT0gc3luY1N5cy5jbGllbnRJZCAmJiAhaXNNaW5lO1xyXG5cdFx0XHRcdFx0aWYgKGdhaW5lZCkgY29tcG9uZW50LmVsLmVtaXQoJ293bmVyc2hpcGdhaW5lZCcsIG51bGwsIGZhbHNlKTtcclxuXHJcblxyXG5cdFx0XHRcdFx0Ly9ub3RlIHRoaXMgYWxzbyBmaXJlcyB3aGVuIHdlIHN0YXJ0IHVwIHdpdGhvdXQgb3duZXJzaGlwXHJcblx0XHRcdFx0XHR2YXIgbG9zdCA9IG5ld093bmVySWQgIT09IHN5bmNTeXMuY2xpZW50SWQgJiYgaXNNaW5lO1xyXG5cdFx0XHRcdFx0aWYgKGxvc3Qpe1xyXG5cdFx0XHRcdFx0XHRjb21wb25lbnQuZWwuZW1pdCgnb3duZXJzaGlwbG9zdCcsIG51bGwsIGZhbHNlKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vd2Ugbm8gbG9uZ2VyIGhhdmUgdG8gY2xlYXIgb3VyIG93bmVyc2hpcCB3aGVuIHdlIGRpc2Nvbm5lY3RcclxuXHRcdFx0XHRcdFx0b3duZXJSZWYub25EaXNjb25uZWN0KCkuY2FuY2VsKCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0b3duZXJJZCA9IG5ld093bmVySWQ7XHJcblxyXG5cdFx0XHRcdFx0aXNNaW5lID0gbmV3T3duZXJJZCA9PT0gc3luY1N5cy5jbGllbnRJZDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogVGVsbCBzeW5jIHRvIHN0YXJ0IHB1c2hpbmcgbG9jYWwgcHJvcGVydHkgdmFsdWVzIGluc3RlYWQgb2YgdXBkYXRpbmdcclxuXHRcdCogbG9jYWwgZnJvbSByZW1vdGUgdmFsdWVzLlxyXG5cdFx0KiBAbWV0aG9kIHN5bmMuc3luYyN0YWtlT3duZXJzaGlwXHJcblx0XHQqL1xyXG5cdFx0Y29tcG9uZW50LnRha2VPd25lcnNoaXAgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0b3duZXJSZWYuc2V0KHN5bmNTeXMuY2xpZW50SWQpO1xyXG5cclxuXHRcdFx0Ly9jbGVhciBvdXIgb3duZXJzaGlwIGlmIHdlIGRpc2Nvbm5lY3RcclxuXHRcdFx0Ly90aGlzIGlzIG5lZWRlZCBpZiB3ZSBhcmUgdGhlIGxhc3QgdXNlciBpbiB0aGUgcm9vbSwgYnV0IHdlIGV4cGVjdCBwZW9wbGUgdG8gam9pbiBsYXRlclxyXG5cdFx0XHRvd25lclJlZi5vbkRpc2Nvbm5lY3QoKS5zZXQobnVsbCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzeW5jIG93bmVyc2hpcCBpcyB5b3Vycy5cclxuXHRcdCogQG1lbWJlciBzeW5jLnN5bmMjaXNNaW5lXHJcblx0XHQqIEByZWFkb25seVxyXG5cdFx0Ki9cclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb21wb25lbnQsICdpc01pbmUnLCB7XHJcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHJldHVybiBpc01pbmU7Ly9UT0RPOiBTaG91bGQgdGhpcyBiZSBzdGF0ZSBpbnN0ZWFkP1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3N5bmMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXHJcbiAqIFRoZSB3aXJlIGNvbXBvbmVudCBhbGxvd3MgeW91IHRvIHRyaWdnZXIgYW4gZXZlbnQgb24gYW5vdGhlciBlbnRpdHkgd2hlbiBhbiBldmVudCBvY2N1cnMgb24gYW4gZW50aXR5XHJcbiAqIEBtaXhpbiB3aXJlXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBvbiBOYW1lIG9mIGFuIGV2ZW50IHRvIGxpc3RlbiB0b1xyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZ2FpbmVkIE5hbWUgb2YgYSBzdGF0ZSB0byB3YXRjaCBmb3JcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGxvc3QgTmFtZSBvZiBhIHN0YXRlIHRvIHdhdGNoIGZvclxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZW1pdCBOYW1lIG9mIGFuIGV2ZW50IHRvIHRyaWdnZXIgb24gdGhlIHRhcmdldHNcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGdhaW4gTmFtZSBvZiBhIHN0YXRlIHRvIGFkZCBvbiB0aGUgdGFyZ2V0XHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBsb3NlIE5hbWUgb2YgYSBzdGF0ZSB0byByZW1vdmUgb24gdGhlIHRhcmdldFxyXG4gKiBAcHJvcGVydHkge3NlbGVjdG9yfSB0YXJnZXRzIEEgc2VsZWN0b3IgdG8gcGljayB3aGljaCBvYmplY3RzIHRvIHdpcmUgdG9cclxuICogQHByb3BlcnR5IHtzZWxlY3Rvcn0gdGFyZ2V0IC0gQSBzZWxlY3RvciB0byBwaWNrIGEgc2luZ2xlIG9iamVjdCB0byB3aXJlIHRvXHJcbiAqKi9cclxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCd3aXJlJyxcclxue1xyXG5cdG11bHRpcGxlOiB0cnVlLFxyXG5cdHNjaGVtYToge1xyXG5cdFx0b246IHt0eXBlOiAnc3RyaW5nJ30sXHJcblx0XHRlbWl0OiB7dHlwZTogJ3N0cmluZyd9LFxyXG5cdFx0Z2FpbmVkOiB7dHlwZTogJ3N0cmluZyd9LFxyXG5cdFx0bG9zdDoge3R5cGU6ICdzdHJpbmcnfSxcclxuXHRcdGdhaW46IHt0eXBlOiAnc3RyaW5nJ30sXHJcblx0XHRsb3NlOiB7dHlwZTogJ3N0cmluZyd9LFxyXG5cdFx0dGFyZ2V0czoge3R5cGU6ICdzZWxlY3RvckFsbCd9LFxyXG5cdFx0dGFyZ2V0OiB7dHlwZTogJ3NlbGVjdG9yJ31cclxuXHR9LFxyXG5cdHVwZGF0ZTogZnVuY3Rpb24gKG9sZERhdGEpIHtcclxuXHRcdGlmIChvbGREYXRhLm9uKSB7XHJcblx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihvbGREYXRhLm9uLCB0aGlzLmFjdE9uVGFyZ2V0cyk7XHJcblx0XHR9XHJcblx0XHRpZiAob2xkRGF0YS5nYWluZWQpIHtcclxuXHRcdFx0dGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdGF0ZWFkZGVkJywgdGhpcy5hY3RPblRhcmdldHNJZlN0YXRlTWF0Y2hlcyk7XHJcblx0XHR9XHJcblx0XHRpZiAob2xkRGF0YS5sb3N0KSB7XHJcblx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RhdGVyZW1vdmVkJywgdGhpcy5hY3RPblRhcmdldHNJZlN0YXRlTWF0Y2hlcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hY3RPblRhcmdldHMgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGZ1bmN0aW9uIGFjdChlbCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLmRhdGEuZW1pdCkge1xyXG5cdFx0XHRcdFx0ZWwuZW1pdCh0aGlzLmRhdGEuZW1pdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICh0aGlzLmRhdGEuZ2Fpbikge1xyXG5cdFx0XHRcdFx0ZWwuYWRkU3RhdGUodGhpcy5kYXRhLmdhaW4pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAodGhpcy5kYXRhLmxvc2UpIHtcclxuXHRcdFx0XHRcdGVsLnJlbW92ZVN0YXRlKHRoaXMuZGF0YS5sb3NlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYodGhpcy5kYXRhLnRhcmdldHMpIHRoaXMuZGF0YS50YXJnZXRzLmZvckVhY2goYWN0LmJpbmQodGhpcykpO1xyXG5cdFx0XHRpZih0aGlzLmRhdGEudGFyZ2V0KSBhY3QuY2FsbCh0aGlzLCB0aGlzLmRhdGEudGFyZ2V0KTtcclxuXHRcdH0uYmluZCh0aGlzKTtcclxuXHJcblx0XHR0aGlzLmFjdE9uVGFyZ2V0c0lmU3RhdGVNYXRjaGVzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdHZhciBzdGF0ZSA9IGV2ZW50LmRldGFpbC5zdGF0ZTtcclxuXHRcdFx0aWYgKHN0YXRlID09PSB0aGlzLmRhdGEuZ2FpbmVkIHx8IHN0YXRlID09PSB0aGlzLmRhdGEubG9zdCkge1xyXG5cdFx0XHRcdHRoaXMuYWN0T25UYXJnZXRzKCk7XHJcblx0XHRcdH1cclxuXHRcdH0uYmluZCh0aGlzKTtcclxuXHJcblx0XHRpZiAodGhpcy5kYXRhLm9uKSB7XHJcblx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmRhdGEub24sIHRoaXMuYWN0T25UYXJnZXRzKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmRhdGEuZ2FpbmVkKSB7XHJcblx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignc3RhdGVhZGRlZCcsIHRoaXMuYWN0T25UYXJnZXRzSWZTdGF0ZU1hdGNoZXMpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuZGF0YS5sb3N0KSB7XHJcblx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignc3RhdGVyZW1vdmVkJywgdGhpcy5hY3RPblRhcmdldHNJZlN0YXRlTWF0Y2hlcyk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRyZW1vdmU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmRhdGEub24sIHRoaXMuYWN0T25UYXJnZXRzKTtcclxuXHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RhdGVhZGRlZCcsIHRoaXMuYWN0T25UYXJnZXRzSWZTdGF0ZU1hdGNoZXMpO1xyXG5cdFx0dGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdGF0ZXJlbW92ZWQnLCB0aGlzLmFjdE9uVGFyZ2V0c0lmU3RhdGVNYXRjaGVzKTtcclxuXHR9XHJcbn0pO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3dpcmUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==